(self.webpackChunk_brick_hooks_root=self.webpackChunk_brick_hooks_root||[]).push([[5275],{73602:function(N,d,n){"use strict";n.d(d,{m:function(){return m.m}});var m=n(67624),x=n(93142)},53197:function(N,d,n){"use strict";n.r(d),n.d(d,{default:function(){return bn}});var m=n(75290),x=n(67294),U=JSON.parse('{"menus":{"en-US":{"*":[{"path":"/","title":"brick-hooks","meta":{}}],"/create-context-hook":[{"path":"/create-context-hook","title":"createContextHook","meta":{}}],"/use-array":[{"path":"/use-array","title":"useArray","meta":{}}],"/use-async":[{"path":"/use-async","title":"useAsync","meta":{}}],"/use-countdown":[{"path":"/use-countdown","title":"useCountDown","meta":{}}],"/use-counter":[{"path":"/use-counter","title":"useCounter","meta":{}}],"/use-countup":[{"path":"/use-countup","title":"useCountUp","meta":{}}],"/use-data-list-to-map":[{"path":"/use-data-list-to-map","title":"useDataListToMap","meta":{}}],"/use-data-list-to-tree":[{"path":"/use-data-list-to-tree","title":"useDataListToTree","meta":{}}],"/use-data-tree-to-list":[{"path":"/use-data-tree-to-list","title":"useDataTreeToList","meta":{}}],"/use-debounce-effect":[{"path":"/use-debounce-effect","title":"useDebounceEffect","meta":{}}],"/use-debounce-fn":[{"path":"/use-debounce-fn","title":"useDebounceFn","meta":{}}],"/use-debounce-state":[{"path":"/use-debounce-state","title":"useDebounceState","meta":{}}],"/use-debounce-value":[{"path":"/use-debounce-value","title":"useDebounceValue","meta":{}}],"/use-deep-compare":[{"path":"/use-deep-compare","title":"useDeepCompare","meta":{}}],"/use-did-mount":[{"path":"/use-did-mount","title":"useDidMount","meta":{}}],"/use-did-update":[{"path":"/use-did-update","title":"useDidUpdate","meta":{}}],"/use-effect-maunal":[{"path":"/use-effect-maunal","title":"useEffectMaunal","meta":{}}],"/use-event-bus":[{"path":"/use-event-bus","title":"useEventBus","meta":{}}],"/use-force-render":[{"path":"/use-force-render","title":"useForceRender","meta":{}}],"/use-history-ref":[{"path":"/use-history-ref","title":"useHistoryRef","meta":{}}],"/use-history-state":[{"path":"/use-history-state","title":"useHistoryState","meta":{}}],"/use-input":[{"path":"/use-input","title":"useInput","meta":{}}],"/use-interval":[{"path":"/use-interval","title":"useInterval","meta":{}}],"/use-iso-effect":[{"path":"/use-iso-effect","title":"useIsoEffect","meta":{}}],"/use-list-checked":[{"path":"/use-list-checked","title":"useListChecked","meta":{}}],"/use-list-data":[{"path":"/use-list-data","title":"useListData","meta":{}}],"/use-list-sequence-load":[{"path":"/use-list-sequence-load","title":"useListSequenceLoad","meta":{}}],"/use-list-state":[{"path":"/use-list-state","title":"useListState","meta":{}}],"/use-list-view-data":[{"path":"/use-list-view-data","title":"useListViewData","meta":{}}],"/use-log-render":[{"path":"/use-log-render","title":"useLogRender","meta":{}}],"/use-memo-compare":[{"path":"/use-memo-compare","title":"useMemoCompare","meta":{}}],"/use-methods":[{"path":"/use-methods","title":"useMethods","meta":{}}],"/use-methods-immer":[{"path":"/use-methods-immer","title":"useMethodsImmer","meta":{}}],"/use-object-state":[{"path":"/use-object-state","title":"useObjectState","meta":{}}],"/use-object-state-immer":[{"path":"/use-object-state-immer","title":"useObjectStateImmer","meta":{}}],"/use-polling":[{"path":"/use-polling","title":"usePolling","meta":{}}],"/use-previous":[{"path":"/use-previous","title":"usePrevious","meta":{}}],"/use-reducer-immer":[{"path":"/use-reducer-immer","title":"useReducerImmer","meta":{}}],"/use-ref-callback":[{"path":"/use-ref-callback","title":"useRefCallback","meta":{}}],"/use-render-count":[{"path":"/use-render-count","title":"useRenderCount","meta":{}}],"/use-set":[{"path":"/use-set","title":"useSet","meta":{}}],"/use-throttle-fn":[{"path":"/use-throttle-fn","title":"useThrottleFn","meta":{}}],"/use-timeout":[{"path":"/use-timeout","title":"useTimeout","meta":{}}],"/use-timeout-fn":[{"path":"/use-timeout-fn","title":"useTimeoutFn","meta":{}}],"/use-toggle":[{"path":"/use-toggle","title":"useToggle","meta":{}}],"/use-trim":[{"path":"/use-trim","title":"useTrim","meta":{}}],"/use-trim-state":[{"path":"/use-trim-state","title":"useTrimValue","meta":{}}],"/use-unmounted-ref":[{"path":"/use-unmounted-ref","title":"useUnmountedRef","meta":{}}],"/use-value-ref":[{"path":"/use-value-ref","title":"useUpdateRef","meta":{}}],"/use-will-unmount":[{"path":"/use-will-unmount","title":"useWillUnmount","meta":{}}],"/common":[{"path":"/common","title":"brick-hooks","meta":{}}],"/web":[{"path":"/web","title":"brick-hooks-web","meta":{}},{"title":"UseAnimate","path":"/web/use-animate","meta":{},"children":[{"path":"/web/use-animate","title":"useAnimate","meta":{}}]},{"title":"UseBreakpoint","path":"/web/use-breakpoint","meta":{},"children":[{"path":"/web/use-breakpoint","title":"useBreakpoint","meta":{}}]},{"title":"UseCookie","path":"/web/use-cookie","meta":{},"children":[{"path":"/web/use-cookie","title":"useCookie","meta":{}}]},{"title":"UseDarkMode","path":"/web/use-dark-mode","meta":{},"children":[{"path":"/web/use-dark-mode","title":"useDarkMode","meta":{}}]},{"title":"UseEventListener","path":"/web/use-event-listener","meta":{},"children":[{"path":"/web/use-event-listener","title":"useEventListener","meta":{}}]},{"title":"UseFreeDrag","path":"/web/use-free-drag","meta":{},"children":[{"path":"/web/use-free-drag","title":"useFreeDrag","meta":{}}]},{"title":"UseGeoLocation","path":"/web/use-geo-location","meta":{},"children":[{"path":"/web/use-geo-location","title":"useGeoLocation","meta":{}}]},{"title":"UseHover","path":"/web/use-hover","meta":{},"children":[{"path":"/web/use-hover","title":"useHover","meta":{}}]},{"title":"UseInView","path":"/web/use-in-view","meta":{},"children":[{"path":"/web/use-in-view","title":"useInView","meta":{}}]},{"title":"UseKey","path":"/web/use-key","meta":{},"children":[{"path":"/web/use-key","title":"useKey","meta":{}}]},{"title":"UseLazyImage","path":"/web/use-lazy-image","meta":{},"children":[{"path":"/web/use-lazy-image","title":"useLazyImage","meta":{}}]},{"title":"UseLazySequenceLoad","path":"/web/use-lazy-sequence-load","meta":{},"children":[{"path":"/web/use-lazy-sequence-load","title":"useLazySequenceLoad","meta":{}}]},{"title":"UseLink","path":"/web/use-link","meta":{},"children":[{"path":"/web/use-link","title":"useLink","meta":{}}]},{"title":"UseLockBodyScroll","path":"/web/use-lock-body-scroll","meta":{},"children":[{"path":"/web/use-lock-body-scroll","title":"useLockBodyScroll","meta":{}}]},{"title":"UseMedia","path":"/web/use-media","meta":{},"children":[{"path":"/web/use-media","title":"useMedia","meta":{}}]},{"title":"UseMediaQuery","path":"/web/use-media-query","meta":{},"children":[{"path":"/web/use-media-query","title":"useMediaquery","meta":{}}]},{"title":"UseOnline","path":"/web/use-online","meta":{},"children":[{"path":"/web/use-online","title":"useOnline","meta":{}}]},{"title":"UseScript","path":"/web/use-script","meta":{},"children":[{"path":"/web/use-script","title":"useScript","meta":{}}]},{"title":"UseScroll","path":"/web/use-scroll","meta":{},"children":[{"path":"/web/use-scroll","title":"useScroll","meta":{}}]},{"title":"UseScrollFixed","path":"/web/use-scroll-fixed","meta":{},"children":[{"path":"/web/use-scroll-fixed","title":"useFixed","meta":{}}]},{"title":"UseStorage","path":"/web/use-storage","meta":{},"children":[{"path":"/web/use-storage","title":"useStorage","meta":{}}]},{"title":"UseStyle","path":"/web/use-style","meta":{},"children":[{"path":"/web/use-style","title":"useStyle","meta":{}}]},{"title":"UseTitle","path":"/web/use-title","meta":{},"children":[{"path":"/web/use-title","title":"useTitle","meta":{}}]},{"title":"UseTransition","path":"/web/use-transition","meta":{},"children":[{"path":"/web/use-transition","title":"useTransition","meta":{}}]},{"title":"UseWindowResize","path":"/web/use-window-resize","meta":{},"children":[{"path":"/web/use-window-resize","title":"useWindowResize","meta":{}}]}],"/native":[{"path":"/native","title":"brick-hooks-native","meta":{}},{"title":"UseAnimate","path":"/native/use-animate","meta":{},"children":[{"path":"/native/use-animate","title":"useAnimate","meta":{}}]},{"title":"UseAnimateValue","path":"/native/use-animate-value","meta":{},"children":[{"path":"/native/use-animate-value","title":"useAnimateValue","meta":{}}]},{"title":"UseAppstate","path":"/native/use-appstate","meta":{},"children":[{"path":"/native/use-appstate","title":"useAppState","meta":{}}]},{"title":"UseAsyncStorage","path":"/native/use-async-storage","meta":{},"children":[{"path":"/native/use-async-storage","title":"useAsyncStorage","meta":{}}]},{"title":"UseFocusApp","path":"/native/use-focus-app","meta":{},"children":[{"path":"/native/use-focus-app","title":"useFocusApp","meta":{}}]},{"title":"UseInView","path":"/native/use-in-view","meta":{},"children":[{"path":"/native/use-in-view","title":"useInView","meta":{}}]},{"title":"UseLazySequenceLoad","path":"/native/use-lazy-sequence-load","meta":{},"children":[{"path":"/native/use-lazy-sequence-load","title":"useLazySequenceLoad","meta":{}}]},{"title":"UseScrollToTop","path":"/native/use-scroll-to-top","meta":{},"children":[{"path":"/native/use-scroll-to-top","title":"useScrollToTop","meta":{}}]},{"title":"UseTransition","path":"/native/use-transition","meta":{},"children":[{"path":"/native/use-transition","title":"useTransition","meta":{}}]}],"/business":[{"path":"/business","title":"brick-hooks-business","meta":{}},{"title":"UseAmapLocation","path":"/business/use-amap-location","meta":{},"children":[{"path":"/business/use-amap-location","title":"useAmapLocation","meta":{}}]},{"title":"UseAmapPoi","path":"/business/use-amap-poi","meta":{},"children":[{"path":"/business/use-amap-poi","title":"useAmapPoi","meta":{}}]},{"title":"UseCascader","path":"/business/use-cascader","meta":{},"children":[{"path":"/business/use-cascader","title":"useCascader","meta":{}}]},{"title":"UseCycleBuy","path":"/business/use-cycle-buy","meta":{},"children":[{"path":"/business/use-cycle-buy","title":"useCycleBuy","meta":{}}]}],"/use-focus-effect":[{"path":"/use-focus-effect","title":"useFocusEffect","meta":{}}],"/use-is-focused":[{"path":"/use-is-focused","title":"useIsFocused","meta":{}}],"/use-navigation":[{"path":"/use-navigation","title":"useNavigation","meta":{}}],"/use-navigation-state":[{"path":"/use-navigation-state","title":"useNavigationState","meta":{}}],"/use-page-focus":[{"path":"/use-page-focus","title":"usePageFocus","meta":{}}],"/use-scroll-to-top":[{"path":"/use-scroll-to-top","title":"useScrollToTop","meta":{}}],"/":[{"title":"\u4ECB\u7ECD","path":"/"},{"title":"Brick-hooks","path":"/common","children":[{"path":"/create-context-hook","title":"createContextHook"},{"path":"/use-array","title":"useArray"},{"path":"/use-async","title":"useAsync"},{"path":"/use-counter","title":"useCounter"},{"path":"/use-debounce-effect","title":"useDebounceEffect"},{"path":"/use-debounce-fn","title":"useDebounceFn"},{"path":"/use-debounce-state","title":"useDebounceState"},{"path":"/use-debounce-value","title":"useDebounceValue"},{"path":"/use-deep-compare","title":"useDeepCompare"},{"path":"/use-did-mount","title":"useDidMount"},{"path":"/use-will-unmount","title":"useWillUnmount"},{"path":"/use-did-update","title":"useDidUpdate"},{"path":"/use-unmounted-ref","title":"useUnmountedRef"},{"path":"/use-effect-maunal","title":"useEffectMaunal"},{"path":"/use-iso-effect","title":"useIsoEffect"},{"path":"/use-event-bus","title":"useEventBus"},{"path":"/use-force-render","title":"useForceRender"},{"path":"/use-input","title":"useInput"},{"path":"/use-interval","title":"useInterval"},{"path":"/use-memo-compare","title":"useMemoCompare"},{"path":"/use-methods","title":"useMethods"},{"path":"/use-methods-immer","title":"useMethodsImmer"},{"path":"/use-object-state","title":"useObjectState"},{"path":"/use-object-state-immer","title":"useObjectStateImmer"},{"path":"/use-polling","title":"usePolling"},{"path":"/use-previous","title":"usePrevious"},{"path":"/use-reducer-immer","title":"useReducerImmer"},{"path":"/use-ref-callback","title":"useRefCallback"},{"path":"/use-value-ref","title":"useUpdateRef"},{"path":"/use-set","title":"useSet"},{"path":"/use-throttle-fn","title":"useThrottleFn"},{"path":"/use-list-checked","title":"useListChecked"},{"path":"/use-list-data","title":"useListData"},{"path":"/use-list-state","title":"useListState"},{"path":"/use-list-view-data","title":"useListViewData"},{"path":"/use-data-list-to-tree","title":"useDataListToTree"},{"path":"/use-data-list-to-map","title":"useDataListToMap"},{"path":"/use-data-tree-to-list","title":"useDataTreeToList"},{"path":"/use-list-sequence-load","title":"useListSequenceLoad"},{"path":"/use-log-render","title":"useLogRender"},{"path":"/use-render-count","title":"useRenderCount"},{"path":"/use-timeout","title":"useTimeout"},{"path":"/use-timeout-fn","title":"useTimeoutFn"},{"path":"/use-toggle","title":"useToggle"},{"path":"/use-trim-state","title":"useTrimValue"},{"path":"/use-trim","title":"useTrim"},{"path":"/use-countdown","title":"useCountDown"},{"path":"/use-countup","title":"useCountUp"},{"path":"/use-history-ref","title":"useHistoryRef"},{"path":"/use-history-state","title":"useHistoryState"}]},{"title":"Brick-hooks-web","path":"/web","children":[{"path":"/web/use-animate","title":"useAnimate"},{"path":"/web/use-breakpoint","title":"useBreakpoint"},{"path":"/web/use-cookie","title":"useCookie"},{"path":"/web/use-dark-mode","title":"useDarkMode"},{"path":"/web/use-event-listener","title":"useEventListener"},{"path":"/web/use-free-drag","title":"useFreeDrag"},{"path":"/web/use-geo-location","title":"useGeoLocation"},{"path":"/web/use-hover","title":"useHover"},{"path":"/web/use-in-view","title":"useInView"},{"path":"/web/use-key","title":"useKey"},{"path":"/web/use-lazy-image","title":"useLazyImage"},{"path":"/web/use-lazy-sequence-load","title":"useLazySequenceLoad"},{"path":"/web/use-link","title":"useLink"},{"path":"/web/use-media","title":"useMedia"},{"path":"/web/use-media-query","title":"useMediaquery"},{"path":"/web/use-online","title":"useOnline"},{"path":"/web/use-script","title":"useScript"},{"path":"/web/use-scroll","title":"useScroll"},{"path":"/web/use-scroll-fixed","title":"useFixed"},{"path":"/web/use-storage","title":"useStorage"},{"path":"/web/use-style","title":"useStyle"},{"path":"/web/use-title","title":"useTitle"},{"path":"/web/use-transition","title":"useTransition"},{"path":"/web/use-window-resize","title":"useWindowResize"}]},{"title":"Brick-hooks-native","path":"/native","children":[{"path":"/native/use-animate","title":"useAnimate"},{"path":"/native/use-animate-value","title":"useAnimateValue"},{"path":"/native/use-transition","title":"useTransition"},{"path":"/native/use-appstate","title":"useAppstate"},{"path":"/native/use-async-storage","title":"useAsyncStorage"},{"path":"/native/use-focus-app","title":"useFocusApp"},{"path":"/native/use-in-view","title":"useInView"},{"path":"/native/use-lazy-sequence-load","title":"useLazySequenceLoad"},{"path":"/native/use-scroll-to-top","title":"useScrollToTop"}]},{"title":"Brick-hooks-business","path":"/business","children":[{"path":"/business/use-amap-location","title":"useAmapLocation"},{"path":"/business/use-amap-poi","title":"useAmapPoi"},{"path":"/business/use-cascader","title":"useCascader"},{"path":"/business/use-cycle-buy","title":"useCycleBuy"}]},{"title":"Brick-hooks-react-navigation4","path":"/navigation4","children":[{"path":"/use-focus-effect","title":"useFocusEffect"},{"path":"/use-is-focused","title":"useIsFocused"},{"path":"/use-navigation","title":"useNavigation"},{"path":"/use-navigation-state","title":"useNavigationState"},{"path":"/use-page-focus","title":"usePageFocus"},{"path":"/native/use-scroll-to-top","title":"useScrollToTop"}]}]}},"locales":[{"name":"en-US","label":"English"}],"navs":{"en-US":[{"title":"\u6307\u5357","path":"/"},{"title":"\u66F4\u65B0\u65E5\u5FD7","path":"https://github.com/MingNeo/custom-hooks/releases"},{"title":"GitHub","path":"https://github.com/MingNeo/custom-hooks"}]},"title":"Brick-hooks","logo":"/logo.svg","mode":"site","repository":{"url":"https://github.com/MingNeo/custom-hooks","branch":"master"},"theme":{},"exportStatic":{}}'),s=n(6840),V=n(6500),r=n.n(V),i=n(79004),H=`import React from 'react'
import useCountDown from '.'

export const Demo1 = () => {
  const { formatedCountdown } = useCountDown({ endTime: Date.now() + 1000000, step: 1000 })

  return (
    <div>
      <p>\u8BBE\u7F6E\u6307\u5B9A\u65F6\u95F4\u5012\u8BA1\u65F6</p>
      <p>{formatedCountdown}S</p>
    </div>
  )
}

export const Demo2 = () => {
  const { formatedCountdown, start } = useCountDown({ total: 5000, format: 's.SS', step: 10, autoRun: false })

  return (
    <div>
      <button onClick={start}>\u6BCF\u6B215\u79D2\u5012\u8BA1\u65F6</button>
      <p>{formatedCountdown}S</p>
    </div>
  )
}

export default function Demo() {
  return (
    <div>
      <Demo1 />
      <Demo2 />
    </div>
  )
}`,w=`import { useCallback, useEffect, useMemo, useRef, useState } from 'react'
import {
  formatTime as formatTimeByString,
  isBrowser,
  getTimeByString,
  getformatTimeInfo,
  invariant,
  setIntervalBySetTimeout,
  clearTimer,
} from '../utils'

interface CountDownOptions {
  total?: number // \u5012\u8BA1\u65F6\u65F6\u95F4\uFF0C\u683C\u5F0F\u6BEB\u79D2
  endTime?: number | string // \u7ED3\u675F\u65F6\u95F4\uFF0C\u65F6\u95F4\u6233\u683C\u5F0F \u6216 "yyyy-mm-dd HH:MM:SS"
  format?: string | ((progress: number) => string) // \u5C55\u793A\u7684\u683C\u5F0F
  step?: number // \u5FAA\u73AF\u7684\u65F6\u95F4
  onStart?: () => void
  onStep?: (step: number, formatedProgress: string) => void
  onFinished?: () => void
  autoRun?: boolean
}

interface StateProps {
  endTime: number // \u7ED3\u675F\u65F6\u95F4
  countdown: number // \u5012\u8BA1\u65F6\u65F6\u95F4timestamp
  status: 'idle' | 'running' | 'pause' | 'resumed' | 'finished'
}

export default function useCountDown({
  onStart,
  onStep,
  onFinished,
  step,
  format = 'hh:mm:ss',
  endTime,
  total,
  autoRun = true,
}: CountDownOptions) {
  invariant(!!endTime || !!total, 'endTime and total need least one')
  invariant(!endTime || !total, 'endTime and total need only one')
  const intervalRef = useRef<number | null>(null)
  const timerRef = useRef<any>(null)
  const statusRef = useRef<string>('idle')
  const endTimeRef = useRef(
    typeof endTime === 'string' ? getTimeByString(endTime) : endTime || Date.now() + (total || 0),
  )
  const [{ endTime: endTimeState, status, countdown }, setState] = useState<StateProps>({
    status: 'idle',
    endTime: endTimeRef.current,
    countdown: 0,
  })

  const formatedCountdown = useMemo(() => formatTime(countdown, format), [countdown, format])

  // \u505C\u6B62\u5012\u8BA1\u65F6
  const stop = useCallback(() => {
    clearTimer(intervalRef.current)
    clearTimeout(timerRef.current)
    setState((prev) => ({ ...prev, countdown: 0, status: 'finished' }))
    statusRef.current = 'finished'
    onFinished?.()
  }, [onFinished, setState])

  // \u5F00\u59CB\u5012\u8BA1\u65F6
  const start = useCallback(() => {
    clearTimer(intervalRef.current)
    onStart?.()
    endTimeRef.current = !endTime ? Date.now() + (total || 0) : endTimeRef.current
    setState((prev) => ({ ...prev, status: 'running', endTime: endTimeRef.current }))
    statusRef.current = 'running'

    const running = () => {
      // \u6BCF\u6B21\u90FD\u53D6\u5F53\u524D\u65F6\u95F4\u6BD4\u8F83\uFF0C\u800C\u975E\u51CF\u53BBstep\u7684\u65F6\u95F4\uFF0C\u9632\u6B62\u8FDB\u5165\u540E\u53F0\u7B49\u9020\u6210\u4E0D\u51C6\u786E\u7684\u60C5\u51B5
      const currentCountDown = Math.max(endTimeRef.current - Date.now(), 0)
      const formatedProgress = formatTime(currentCountDown, format)

      setState((prev) => ({ ...prev, countdown: currentCountDown }))
      onStep?.(currentCountDown, formatedProgress)

      currentCountDown === 0 && stop()
      return currentCountDown
    }

    const raf =
      window.requestAnimationFrame ||
      (window as any).webkitRequestAnimationFrame ||
      // eslint-disable-next-line no-undef
      ((callback: TimerHandler) => setTimeout(callback, 1000 / 60))
    const isUseInterval = (step && step >= 17) || !isBrowser

    timerRef.current = setTimeout(() => {
      const loop = () => {
        clearTimer(intervalRef.current)
        clearTimeout(timerRef.current)
        const progress = running()
        if (progress > 0 && statusRef.current === 'running') {
          intervalRef.current = isUseInterval ? setIntervalBySetTimeout(running, step) : raf(loop)
        }
      }
      loop()
    }, 0)
  }, [endTime, format, onStart, onStep, step, stop, total])

  useEffect(() => {
    autoRun && start()

    return () => {
      clearTimer(intervalRef.current)
      timerRef.current && clearTimeout(timerRef.current)
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [])

  return {
    status,
    endTime: endTimeState,
    formatedCountdown,
    countdown,
    ...getformatTimeInfo(countdown),
    start,
    stop,
  }
}

function formatTime(timestamp: number, format: string | ((progress: number) => string)) {
  // eslint-disable-next-line no-nested-ternary
  return typeof format === 'string'
    ? formatTimeByString(timestamp, format)
    : typeof format === 'function'
    ? format(timestamp)
    : ''
}`,c=`export function invariant(condition: boolean, message: string) {
  if (!condition) {
    throw new Error(message)
  }
}

export function isNil(value: any) {
  return value === undefined || value === null
}

export function isObject(value: any) {
  return typeof value === 'object' && Object.prototype.toString.call(value) === '[object Object]'
}

export function chunkArray(array, size = 1) {
  const length = array?.length || 0
  if (!length || size < 1) {
    return []
  }

  let index = 0
  const result = []

  while (index < length) {
    result.push(array.slice(index, (index += size)))
  }
  return result
}

export const isBrowser = !!(typeof window !== 'undefined' && window.document && window.document.createElement)

export const formatTime = (timestamp: number, format = 'dd hh:mm:ss.SSS'): string => {
  let formatedStr = format
  const dateFormat: any = {
    'd+': Math.floor(timestamp / 1000 / 60 / 60 / 24), // \u5929
    'h+': Math.floor((timestamp / 1000 / 60 / 60) % 24), // \u65F6
    'm+': Math.floor((timestamp / 1000 / 60) % 60), // \u5206
    's+': Math.floor((timestamp / 1000) % 60), // \u79D2
    'S+': timestamp % 1000,
  }

  Object.entries(dateFormat).forEach(([key, value]) => {
    const reg = new RegExp(\`(\${key})\`)
    if (reg.test(formatedStr))
      formatedStr = formatedStr.replace(reg, (m) => {
        if (key === 'S+') {
          return \`\${value}\${new Array(m.length).join('0')}\`.slice(0, m.length)
        }
        return m.length === 1 ? \`\${value}\` : \`00\${value}\`.substring(\`\${value}\`.length)
      })
  })
  return formatedStr
}

export const getformatTimeInfo = (timestamp: number) => {
  return {
    day: Math.floor(timestamp / 1000 / 60 / 60 / 24), // \u5929
    hour: Math.floor((timestamp / 1000 / 60 / 60) % 24), // \u65F6
    minutes: Math.floor((timestamp / 1000 / 60) % 60), // \u5206
    seconds: Math.floor((timestamp / 1000) % 60), // \u79D2
    millisecond: timestamp % 1000,
  }
}

const TIME_FORMAT_REG = /^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/

export const getDateByString = (date: string, utc = false) => {
  if (typeof date === 'string' && !/Z$/i.test(date)) {
    const d = date.match(TIME_FORMAT_REG) as any[]

    if (d) {
      const m = d[2] - 1 || 0
      const ms = (d[7] || '0').substring(0, 3)

      if (utc) {
        return new Date(Date.UTC(d[1], m, d[3] || 1, d[4] || 0, d[5] || 0, d[6] || 0, ms))
      }

      return new Date(d[1], m, d[3] || 1, d[4] || 0, d[5] || 0, d[6] || 0, ms)
    }
  }

  return new Date(date)
}

export const getTimeByString = (date: string, utc = false) => getDateByString(date, utc).getTime()

/**
 * isFunction
 */
export function isFunction(value) {
  return typeof value === 'function'
}

export function setIntervalBySetTimeout(callback: () => void, delay: number) {
  let timer: ReturnType<typeof setTimeout> | null = null
  let offset = 0 // \u8BEF\u5DEE\u65F6\u95F4

  let count = 0
  let nextDelay = delay
  const start = Date.now()

  const loop = () => {
    nextDelay = delay - offset
    callback()
    timer = setTimeout(() => {
      offset = Date.now() - start - count * delay
      count++
      loop()
    }, nextDelay)
  }

  loop()
  return timer
}

export function clearTimer(timer: number) {
  if (!timer) return

  try {
    clearInterval(timer)
  } catch (error) {}

  try {
    const clearRaf = window.cancelAnimationFrame || (window as any).webkitCancelAnimationFrame
    clearRaf(timer)
  } catch (error) {}

  try {
    clearTimeout(timer)
  } catch (error) {}
}`,j=`import React from 'react'
import useCounter from '.'

export default function Demo({ initialValue = 0, min = 0, max = 100 }) {
  const [count, actions] = useCounter(initialValue, { min, max })
  return (
    <div style={{ display: 'flex', width: '130px', justifyContent: 'space-between' }}>
      <button onClick={() => actions.dec()}>-</button>
      {count}
      <button onClick={() => actions.inc()}>+</button>
      <button onClick={() => actions.reset()}>reset</button>
    </div>
  )
}`,f=`import { useMemo, useState } from 'react'

interface CounterOptions {
  min?: number
  max?: number
  step?: number
}

interface Methods {
  set: (nextValue: number | ((value: number) => number)) => void
  inc: (step?: number) => void
  dec: (step?: number) => void
  reset: () => void
}

/**
 * \u8FD4\u56DE\u4E00\u4E2A\u6B65\u8FDB\u7684\u6570\u503C\uFF0C\u5E76\u63D0\u4F9B\u4E00\u7CFB\u5217\u65B9\u6CD5
 */
export default function useCounter(initialValue: number = 0, options: CounterOptions = {}): [number, Methods] {
  const [counter, setCounter] = useState(initialValue)

  const methods = useMemo(() => {
    const { min = -Infinity, max = Infinity, step: defaultStep = 1 } = options
    const setValue = (nextValue: number | ((value: number) => number)) => {
      const disposeValue = (value: number) => (value < min ? min : value > max ? max : value)
      setCounter((value) => disposeValue(typeof nextValue === 'function' ? nextValue(value) : nextValue))
    }
    return {
      set: setValue,
      inc: (step: number = defaultStep) => setValue((value: number) => value + step),
      dec: (step: number = defaultStep) => setValue((value: number) => value - step),
      reset: () => setCounter(initialValue),
    }
  }, [initialValue, options])

  return [counter, methods]
}`,z=`import React from 'react'
import useCountUp from '.'

export const Demo1 = () => {
  const { formatedCountup } = useCountUp({ maxLength: 1000 * 60 * 10, format: 'dd hh:mm:ss' })

  return (
    <div>
      <p>\u8BA1\u65F610\u5206\u949F</p>
      <p>{formatedCountup}</p>
    </div>
  )
}

export const Demo2 = () => {
  const { formatedCountup, start } = useCountUp({ maxLength: 5000, format: 's.SS', step: 10, autoRun: false })

  return (
    <div>
      <button onClick={start}>\u6BCF\u6B215\u79D2\u8BA1\u65F6</button>
      <p>{formatedCountup}S</p>
    </div>
  )
}

export default function Demo() {
  return (
    <div>
      <Demo1 />
      <Demo2 />
    </div>
  )
}`,C=`import { useCallback, useEffect, useRef } from 'react'
import useForceRender from '../useForceRender'
import { formatTime as formatTimeByString, isBrowser, setIntervalBySetTimeout, clearTimer } from '../utils'

interface CountupProps {
  format?: string | ((progress: number) => string) // \u5C55\u793A\u7684\u683C\u5F0F
  step?: number // \u5FAA\u73AF\u7684\u65F6\u95F4
  onStart?: () => void
  onStep?: (countup: number, formatedCountup: string) => void
  onFinished?: (countup: number, formatedCountup: string) => void
  autoRun?: boolean
  maxLength?: number // \u6700\u957F\u65F6\u95F4,\u683C\u5F0F\u6BEB\u79D2,\u8D85\u8FC7\u65F6\u6839\u636EloopWhenEnd\u8FDB\u884C\u91CD\u7F6E\u6216\u505C\u6B62\u8BA1\u65F6
  loopWhenEnd?: boolean // \u662F\u5426\u5FAA\u73AF\u8BA1\u65F6\uFF0C\u503C\u4E3Atrue\u65F6\u8BA1\u65F6\u7ED3\u675F\u65F6\u81EA\u52A8\u4ECE0\u91CD\u65B0\u5F00\u59CB\u8BA1\u65F6, \u5426\u5219\u505C\u6B62
}

type Running = () => { countup: number; formatedCountup: string }

interface StateProps {
  status: 'idle' | 'running' | 'pause' | 'finished'
}

/**
 * \u8BA1\u65F6hooks\uFF0C\u53EF\u4EE5\u7528\u4E8E\u5929\u3001\u65F6\u3001\u5206\u3001\u79D2\u3001\u6BEB\u79D2\u7684\u8BA1\u65F6
 */
export default function useCountup({
  onStart,
  onStep,
  onFinished,
  step,
  format = 'dd hh:mm:ss.SSS',
  maxLength,
  autoRun = true,
  loopWhenEnd = false,
}: CountupProps) {
  const intervalRef = useRef<number | null>(null)
  const timerRef = useRef<number | null>(null)
  const statusRef = useRef<string>('idle')
  const runningListRef = useRef<Running[]>([])
  const countUpRef = useRef<number>(0)

  const forceUpdate = useForceRender()

  const setCountup = useCallback((value, shouldForceUpdate = false) => {
    countUpRef.current = value
    shouldForceUpdate && forceUpdate()
  }, [])

  const formatedCountup = formatTime(countUpRef.current, format)

  // \u505C\u6B62\u8BA1\u65F6
  const stop = useCallback(
    (reset = false) => {
      clearTimer(intervalRef.current)
      clearTimeout(timerRef.current)
      statusRef.current = 'finished'
      onFinished && onFinished(countUpRef.current, formatTime(countUpRef.current, format))
      runningListRef.current = []
      setCountup(reset ? 0 : countUpRef.current, true)
    },
    [onFinished, format]
  )

  // \u91CD\u7F6E\u8BA1\u65F6
  const reset = useCallback(() => {
    clearTimer(intervalRef.current)
    clearTimeout(timerRef.current)
    statusRef.current = 'idle'
    runningListRef.current = []
    setCountup(0, true)
  }, [])

  const getCurrentCountup = useCallback(
    (startTime) => {
      // \u6BCF\u6B21\u90FD\u53D6\u5F53\u524D\u65F6\u95F4\u6BD4\u8F83\uFF0C\u800C\u975E\u51CF\u53BBstep\u7684\u65F6\u95F4\uFF0C\u9632\u6B62\u8FDB\u5165\u540E\u53F0\u7B49\u9020\u6210\u4E0D\u51C6\u786E\u7684\u60C5\u51B5
      let currentCountup = Math.max(Date.now() - startTime, 0)
      const isOvertime = maxLength && currentCountup >= maxLength
      if (isOvertime) {
        if (loopWhenEnd) {
          currentCountup = 0
          startTime = Date.now()
        } else {
          currentCountup = maxLength
        }
      }
      const formatedProgress = formatTime(currentCountup, format)

      setCountup(currentCountup, true)
      onStep && onStep(currentCountup, formatedProgress)

      // \u8D85\u65F6\u5E76\u4E14\u4E0D\u5FAA\u73AF\u7684\u8BDD\u505C\u6B62\u8BA1\u65F6
      isOvertime && !loopWhenEnd && stop()
      return { countup: currentCountup, formatedCountup: formatedProgress }
    },
    [maxLength, loopWhenEnd, onStep, format]
  )

  // \u5F00\u59CB\u8BA1\u65F6
  const start = useCallback(() => {
    onStart && onStart()
    let startTime = Date.now()
    const running = () => getCurrentCountup(startTime)

    const raf = isBrowser ? window.requestAnimationFrame || (window as any).webkitRequestAnimationFrame : undefined
    // \u5982\u679C\u4E0D\u8BA1\u6BEB\u79D2\u3001\u6216\u8005\u6307\u5B9A\u6B65\u957F\u8D85\u8FC71/60\u79D2\u3001\u6216\u5728\u975E\u6D4F\u89C8\u5668\u7AEF\uFF0C\u5219\u4F7F\u7528setTimeout
    const isUseInterval = !raf || (step && step >= 17) || (typeof format === 'string' && !/S+/gi.test(format))

    timerRef.current = setTimeout(() => {
      statusRef.current = 'running'
      runningListRef.current.push(running)
      const loop = () => {
        clearTimer(intervalRef.current)
        clearTimeout(timerRef.current)
        // const progress = running()
        // \u7EF4\u62A4\u4E00\u4E2Arunning\u51FD\u6570\u6570\u7EC4\uFF0C\u7528\u4E8E\u6682\u505C\u548C\u6062\u590D
        const current = runningListRef.current.splice(0, 1)[0]
        const progress = current?.()
        if ((loopWhenEnd || progress.countup > 0) && statusRef.current === 'running') {
          runningListRef.current.push(running)
          intervalRef.current = isUseInterval ? setIntervalBySetTimeout(running, step) : raf(loop)
        }
      }
      loop()
    }, 0)
  }, [format, onStart, step, loopWhenEnd, getCurrentCountup])

  useEffect(() => {
    autoRun && start()

    return () => {
      clearTimer(intervalRef.current)
      timerRef.current && clearTimeout(timerRef.current)
    }
  }, [])

  return {
    status: statusRef.current,
    formatedCountup,
    countup: countUpRef.current,
    start,
    stop,
    reset,
    getCurrentCountup,
  }
}

function formatTime(timestamp: number, format: string | ((progress: number) => string)) {
  // eslint-disable-next-line no-nested-ternary
  return typeof format === 'string'
    ? formatTimeByString(timestamp, format)
    : typeof format === 'function'
    ? format(timestamp)
    : ''
}`,h=`import { useReducer } from 'react'

type ForceUpdate = () => void

/**
 * \u8FD4\u56DE\u4E00\u4E2AforceUpdate\u65B9\u6CD5\uFF0C\u6BCF\u6B21\u8C03\u7528\u89E6\u53D1\u51FD\u6570\u7EC4\u4EF6\u5F3A\u5236\u66F4\u65B0
 */
export default function useForceRender(): ForceUpdate {
  return useReducer((n: number) => n + 1, 0)[1]
}`,Q=`import React, { useEffect } from 'react'
import useCounter from '../useCounter'
import useHistoryRef from '.'
import useForceRender from '../useForceRender'

export function Demo({ max = 10 } = {}) {
  const [count, { inc }] = useCounter(0)
  const forceUpdate = useForceRender()
  const { undo, redo, push, last, undoList, redoList, history } = useHistoryRef({
    max,
    onUpdate: (nextState) => {
      forceUpdate()
    },
  })

  useEffect(() => {
    push(count)
  }, [count, push])

  return (
    <div>
      <p>inputValue: {count}</p>
      <button onClick={(e) => inc()}>inc</button>
      <button disabled={undoList.length < 1} onClick={undo}>
        undo {undoList.length}
      </button>
      <button disabled={redoList.length < 1} onClick={redo}>
        redo
      </button>
      <p>last: {JSON.stringify(last)}</p>
      <p>undoList: {JSON.stringify(undoList)}</p>
      <p>history: {JSON.stringify(history)}</p>
      <p>redoList: {JSON.stringify(redoList)}</p>
    </div>
  )
}`,k=`import { useRef } from 'react'
import HistoryState, { Options, HistoryStock } from './historyState'

export interface useHistoryRefOptions<Raw, Serialized = Raw> extends Options<Raw, Serialized> {}

export interface Return<Raw, Serialized> {
  source: Raw // \u539F\u59CB\u6570\u636E
  history: HistoryStock<Serialized>[] // \u5386\u53F2\u8BB0\u5F55\u5217\u8868
  last: HistoryStock<Serialized> // \u6700\u540E\u4E00\u6761\u5386\u53F2\u8BB0\u5F55
  undoList: HistoryStock<Serialized>[] // \u5386\u53F2\u8BB0\u5F55\u5217\u8868\uFF0C\u540Chistory
  redoList: HistoryStock<Serialized>[] // \u91CD\u505A\u7684\u5386\u53F2\u8BB0\u5F55\u5217\u8868
  canUndo: boolean // \u662F\u5426\u53EF\u4EE5\u64A4\u9500
  canRedo: boolean // \u662F\u5426\u53EF\u4EE5\u91CD\u505A
  undo(): void // \u64A4\u9500
  redo(): void // \u91CD\u505A
  clear(): void // \u6E05\u7A7A\u5386\u53F2\u8BB0\u5F55
  push(newSource: Raw): void // \u521B\u5EFA\u4E00\u6761\u65B0\u5386\u53F2
  reset(): void // \u91CD\u7F6E\u5230\u6700\u8FD1\u7684\u8BB0\u5F55
  getHistory: HistoryStock<any>[]
  getUndoList: HistoryStock<any>[]
  getRedoList: HistoryStock<any>[]
}

/**
 *
 * @param source
 * @param options
 * @returns
 */
export default function useHistoryRef<Raw, Serialized = Raw>(
  // source: Raw,
  options: useHistoryRefOptions<Raw, Serialized> = {}
): Return<Raw, Serialized> {
  const ref = useRef<any>()
  if (!ref.current) {
    ref.current = new HistoryState(options)
  }

  return ref.current
}`,D=`export interface HistoryStock<T> {
  snapshot: T
  timestamp: number
}

export interface Options<Raw, Serialized = Raw> {
  max?: number // \u6700\u591A\u4FDD\u5B58\u591A\u5C11\u6761\u6570\u636E\uFF0C\u9ED8\u8BA4\u4E0D\u9650\u5236
  dump?: (source: Raw) => Serialized // \u5E8F\u5217\u5316\u6570\u636E\u7684\u51FD\u6570
  parse?: <Raw, Serialized = Raw>(value: Serialized) => Raw // \u53CD\u5E8F\u5217\u5316\u6570\u636E\u7684\u51FD\u6570
  onUpdate?: (value: Raw, dump: HistoryStock<Serialized>) => void // \u66F4\u65B0\u6570\u636E\u7684\u56DE\u8C03
}

function defaultDump<R, S>(source: R): S {
  if (typeof source === 'object' || Array.isArray(source)) {
    return JSON.parse(JSON.stringify(source)) as S
  }
  return source as unknown as S
}

function defaultParse<Raw, Serialized = Raw>(sourceDump: Serialized) {
  try {
    return JSON.parse(sourceDump as unknown as string) as Raw
  } catch (error) {
    return sourceDump as unknown as Raw
  }
}

export default class HistoryState<Raw, Serialized = Raw> {
  source: any
  last: HistoryStock<any> = {
    snapshot: undefined,
    timestamp: 0,
  }

  undoList: HistoryStock<any>[] = []
  redoList: HistoryStock<any>[] = []
  max: number
  dump: (v: Raw) => Serialized
  parse: <Raw, Serialized = Raw>(sourceDump: Serialized) => Raw
  onUpdate: (value: Raw, dump: HistoryStock<Serialized>) => void

  constructor(options: Options<Raw, Serialized> = {}) {
    const { max, dump = defaultDump, parse = defaultParse, onUpdate = (nextState: Raw) => {} } = options
    this.dump = dump
    this.parse = parse
    this.onUpdate = onUpdate
    this.push = this.push.bind(this)
    this.undo = this.undo.bind(this)
    this.redo = this.redo.bind(this)
    this.clear = this.clear.bind(this)
    this.reset = this.reset.bind(this)
    this.max = max
  }

  get canUndo() {
    return this.undoList.length > 0
  }

  get canRedo() {
    return this.redoList.length > 0
  }

  get history() {
    return this.undoList
  }

  createHistoryItem(newSource: Raw) {
    const newHistoryItem = {
      snapshot: this.dump(newSource),
      timestamp: Date.now(),
    }
    return newHistoryItem
  }

  undo() {
    if (this.canUndo) {
      const state = this.undoList.shift()
      if (state && this.last) {
        this.redoList.unshift(this.last)
        this._changeState(state)
      }
    }
  }

  redo() {
    if (this.canRedo) {
      const state = this.redoList.shift()
      this.undoList.unshift(this.last)
      this._changeState(state)
    }
  }

  clear() {
    this.undoList = []
    this.redoList = []
    this.onUpdate(this.source, this.last)
  }

  push(newSource: Raw) {
    const isFirst = typeof this.source === 'undefined'
    this.source = newSource
    if (isFirst) {
      this.undoList = []
      this.redoList = []
      const next = this.createHistoryItem(newSource)
      this.last = next
      this.onUpdate(this.source, this.last)
    } else if (this.last && this.last.snapshot !== this.undoList?.[0]?.snapshot) {
      this.undoList.unshift(this.last)
      if (this.max && this.undoList.length > this.max) this.undoList.splice(this.max, Infinity)
      if (this.redoList.length) this.redoList.splice(0, this.redoList.length)
      this.last = this.createHistoryItem(this.source)
      this._changeState(this.last)
    }
  }

  reset() {
    this._changeState(this.last)
  }

  private _changeState(record: HistoryStock<Serialized>) {
    const next = this.parse(record.snapshot) as unknown as Raw
    this.source = next
    this.last = record
    this.onUpdate(next, record)
  }

  getHistory() {
    return this.history
  }

  getUndoList() {
    return this.undoList
  }

  getRedoList() {
    return this.redoList
  }

  getCanUndo() {
    return this.canUndo
  }

  getCanRedo() {
    return this.canRedo
  }

  getSource() {
    return this.source
  }

  getLast() {
    return this.last
  }
}`,G=`import React from 'react'
import useListChecked from '.'

export default function Demo({ list = [{ id: 'A1' }, { id: 'A2' }, { id: 'A3' }] }) {
  const { isAllChecked, checkedIds, toggleChecked, toggleAllChecked } = useListChecked(list, [])

  return (
    <div>
      <span>
        <input type="checkbox" checked={isAllChecked} onChange={() => toggleAllChecked()} />
        \u5168\u9009
      </span>
      {list.map((v) => (
        <div key={v.id}>
          <input type="checkbox" checked={checkedIds.includes(v.id)} onChange={() => toggleChecked(v.id)} />
          {v.id}
        </div>
      ))}
    </div>
  )
}`,M=`import { useMemo } from 'react'
import { isNil } from '../utils'
import useMethods from '../useMethods'

type Id = string
interface Item extends Record<string, any> {
  id: Id
}

const checkedMapReducers = (state = {}) => {
  return {
    setChecked: (payload: { key: Id; checked: boolean }) => ({
      ...state,
      [payload.key]: payload.checked,
    }),

    toggleChecked: (payload: { key: Id; checked?: boolean }) => ({
      ...state,
      [payload.key]: payload.checked ?? !state[payload.key],
    }),

    setAllChecked: (checked: boolean) => Object.keys(state).reduce((prev, curr) => ({ ...prev, [curr]: checked }), {}),

    clearChecked: (state = {}) => Object.keys(state).reduce((prev, curr) => ({ ...prev, [curr]: false }), {}),

    expandCheckedMap: (payload: Item[] = []) =>
      payload.reduce((prev, curr) => ({ ...prev, [curr.id]: isNil(prev[curr.id]) ? false : prev[curr.id] }), state),
  }
}

/**
 * \u5217\u8868\u7684\u591A\u9009hooks\uFF0C\u9009\u62E9\uFF0C\u5168\u9009\uFF0C\u5DF2\u9009
 * @param {array} items \u6240\u6709id
 * @param {array} defaultSelecteds \u5F53\u524D\u5DF2\u9009\u4E2Dids
 */
export default function useListChecked(items: Item[] = [], defaultSelecteds: Id[] = []) {
  const [checkedMap, methods] = useMethods(
    checkedMapReducers,
    items.reduce((prev, curr) => ({ ...prev, [curr.id]: defaultSelecteds.includes(curr.id) }), {}),
  )

  const { isAllChecked, checkedIds, toggleAllChecked } = useMemo(
    () => ({
      isAllChecked: !!Object.values(checkedMap).length && !Object.values(checkedMap).some((v) => !v),
      // \u5F53\u524D\u9009\u4E2D\u7684key\u5217\u8868
      checkedIds: Object.keys(checkedMap).filter((key) => !!checkedMap[key]) as Id[],
      // \u5207\u6362\u5168\u9009\u72B6\u6001\u6216\u8BBE\u7F6E\u4E3A\u6307\u5B9A\u7684\u5168\u9009\u72B6\u6001
      toggleAllChecked: (checked?: boolean) => methods.setAllChecked(checked !== undefined ? checked : !isAllChecked),
    }),
    // eslint-disable-next-line react-hooks/exhaustive-deps
    [checkedMap],
  )

  const { setChecked, clearChecked, toggleChecked } = useMemo(() => {
    return {
      setChecked: (key: Id, checked: boolean) => methods.setChecked({ key, checked }),
      toggleChecked: (key: Id, checked?: boolean) => methods.toggleChecked({ key, checked }),
      // \u6E05\u7A7A\u9009\u4E2D
      clearChecked: () => methods.clearChecked(),
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [])

  // ids\u5217\u8868\u53D8\u5316\u65F6, \u66F4\u65B0map\u6570\u636E, \u52A8\u6001\u8F7D\u5165\u4E0B\u4E00\u9875\u6570\u636E\u7B49\u65F6\u66F4\u65B0checkMap
  // useEffect(() => {
  // methods.expandCheckedMap(items)
  // eslint-disable-next-line react-hooks/exhaustive-deps
  // }, [items])

  return {
    isAllChecked,
    checkedIds,
    setChecked,
    toggleChecked,
    toggleAllChecked,
    clearChecked,
    updateItems: methods.expandCheckedMap,
  }
}`,p=`import { useMemo, useReducer } from 'react'
import { isFunction } from '../utils'

export type Reducer = (...args: any[]) => any

export interface Action {
  type: string
  payload?: any
  [x: string]: any
}

export interface Dispatch {
  (actionName: string, ...args: any[]): void
  (action: Action): void
}

type MethodsReducer<S> = (state: S) => Record<string, Reducer>
export type Methods = Record<string, Reducer>

export interface BoundActionMethods extends Record<string, (...args: any[]) => void> {
  dispatch: Dispatch
}

export default function useMethods<S>(
  methods: Methods | MethodsReducer<S>,
  initialState: S | (() => S),
): [S, BoundActionMethods, Dispatch] {
  const [value, dispatch] = useReducer((prev: S, action: Action) => {
    return isFunction(methods)
      ? (methods as MethodsReducer<S>)(prev)[action.type](...action.args)
      : methods[action.type](prev, ...action.args)
  }, initialState)

  const boundMethods: BoundActionMethods = useMemo(() => {
    const dispatchMethods: Dispatch = (...args: any[]) => {
      dispatch(typeof args[0] === 'string' ? { type: args[0], args: args.slice(1) } : { type: args[0]?.type, args })
    }

    return (Object.keys(isFunction(methods) ? (methods as MethodsReducer<S>)({} as S) : methods) || []).reduce(
      (prev, type: string) => ({
        ...prev,
        [type]: (...args: any[]) => dispatch({ type, args }),
      }),
      { dispatch: dispatchMethods },
    )
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [])

  return [value, boundMethods, boundMethods.dispatch]
}`,K=`import React, { useRef } from 'react'
import useListSequenceLoad from '.'
import useTimeoutFn from '../useTimeoutFn'

const containerStyle = { width: '100%', height: 100, overflow: 'scroll', border: '1px solid' }

function Item(props) {
  return (
    <div
      style={{
        width: 200,
        height: 50,
        backgroundColor: 'powderblue',
        marginBottom: 10,
        border: '1px solid #eee',
      }}
      {...props}></div>
  )
}

const list = new Array(20).fill(1).map((v, i: number) => ({
  id: i + 1,
  value: i + 1,
}))

export const Demo = ({ Loading }) => {
  const rootRef = useRef<any>()
  const { showfooterLoading, showList, loadNextGroup } = useListSequenceLoad(list, { groupSize: 3 })

  const [loadNextGroupAsync] = useTimeoutFn(loadNextGroup, 0)
  return (
    <div>
      <div>\u5DF2\u52A0\u8F7D\u5217: {showList.map((v, i: number) => i + 1).join(',')}</div>
      <div ref={(ref) => (rootRef.current = ref)} style={containerStyle}>
        {showList.map((item) => (
          <Item key={item.id}>{item.value}</Item>
        ))}
        {showfooterLoading ? (
          Loading ? (
            <Loading loadNextGroupAsync={loadNextGroupAsync} rootRef={rootRef} />
          ) : (
            <div onClick={loadNextGroupAsync}>Load Next Group</div>
          )
        ) : null}
      </div>
    </div>
  )
}`,A=`import { useMemo, useState, useCallback } from 'react'

interface Options {
  list?: any[]
  groupSize?: number
}

// \u5217\u8868\u9875\u4EE5\u5206\u7EC4\u6A21\u5F0F\u6309\u9700\u52A0\u8F7D\u4E0B\u4E00\u7EC4\uFF0C\u9002\u7528\u6BCF\u4E2Aitem\u5404\u4E0D\u76F8\u540C\u60C5\u51B5\u3002\u5982\u9996\u9875\u88C5\u4FEE/\u4FE1\u606F\u6D41
export default function useListSequenceLoad(listData = [], { groupSize = 3 }: Options = {}) {
  const [showGroupIdx, setShowGroupIdx] = useState(1) // \u5F53\u524D\u52A8\u6001\u52A0\u8F7D\u7684\u7EC4

  const reset = useCallback(() => {
    setShowGroupIdx(1)
  }, [])

  // \u53EF\u4EE5\u6E32\u67D3\u7684\u7EC4\u4EF6\u5217\u8868
  return useMemo(() => {
    const nextRenderIndex = Math.max(showGroupIdx * groupSize, 0)
    const showList = listData.slice(0, Math.min(listData.length, nextRenderIndex))

    // \u4FEE\u6539\u5F85\u6E32\u67D3index\u5230\u4E0B\u4E00\u4E2A
    const loadNextGroup = () => {
      setShowGroupIdx((prevIdx) => (prevIdx * groupSize - 1 < listData.length ? prevIdx + 1 : prevIdx))
    }

    return {
      showList,
      isAllLoaded: nextRenderIndex >= listData.length,
      showfooterLoading: nextRenderIndex < listData.length,
      nextRenderIndex,
      loadNextGroup,
      reset,
    }
  }, [listData, showGroupIdx, reset])
}`,P=`import { useRef, useEffect, useCallback, useState } from 'react'

type Callback = (...args: any[]) => any

/**
 * \u65B9\u4FBF\u4F7F\u7528setTimeout\u51FD\u6570\u7684hook
 */
export default function useTimeoutFn(
  callback: Callback,
  time = 300
): [
  Callback,
  {
    isPending: boolean
    stop: (timer: any) => void
  }
] {
  const timerRef = useRef<any>()
  const [isPending, setIsPending] = useState(false)
  const fnRef = useRef<Callback>(callback)
  fnRef.current = callback

  const stop = useCallback((timer) => {
    clearTimeout(timer)
  }, [])

  const start = useCallback((...args) => {
    setIsPending(true)
    return new Promise((resolve) => {
      timerRef.current = setTimeout(() => {
        setIsPending(false)
        const callCb = async () => {
          return await fnRef.current(...args)
        }
        callCb().then((result) => resolve(result))
      }, time)
    })
  }, [])

  useEffect(() => {
    return () => {
      timerRef.current && stop(timerRef.current)
    }
  }, [stop])

  return [start, { isPending, stop }]
}`,Z=`import React from 'react'
import useListViewData from '..'

const fetchParams = { pageNo: 1, pageSize: 5 }

const mockData = new Array(30).fill(0).map((v, i) => ({ id: i, value: i }))

const fetchData = (params) => {
  const query = { ...fetchParams, ...(params || {}) }
  return new Promise((resolve) => {
    setTimeout(() => {
      const start = (query.pageNo - 1) * query.pageSize
      const data = mockData.slice(start, start + query.pageSize)
      resolve({ data, total: mockData.length, hasMore: query.pageNo < +(mockData.length / query.pageSize).toFixed(0) })
    }, 500)
  }) as any
}

export default function Demo() {
  const { current, listData, loading, loadData, loadNextPage, loadPrevPage, hasMore, total, pageTotal } =
    useListViewData(fetchData, {
      autoLoad: true,
      initialQuery: { pageSize: 5 },
      isMerge: false,
    })

  return (
    <div>
      <h2>\u7FFB\u9875\u793A\u4F8B</h2>
      <div>
        {loading ? (
          'loading'
        ) : (
          <ul>
            {listData.map((item, i) => (
              <li key={i}>\u7B2C{item.value}\u6761</li>
            ))}
          </ul>
        )}
      </div>
      <button disabled={current - 1 <= 0} onClick={() => loadPrevPage()}>
        prev
      </button>
      <select value={current} onChange={(e) => loadData({ pageNo: e.target.value })}>
        {new Array(pageTotal).fill(0).map((v, i) => (
          <option key={i} value={i + 1}>
            {i + 1}
          </option>
        ))}
      </select>
      <button disabled={!hasMore} onClick={() => loadNextPage()}>
        next
      </button>
      total: {total}
    </div>
  )
}`,y=`import { useCallback, useEffect, useMemo } from 'react'
import useObjectState from '../useObjectState'
import useAsync from '../useAsync'

export interface QueryParams {
  pageNo: number
  pageSize: number
  query: Record<string, any>
}

interface Options {
  isMerge?: boolean // \u662F\u5426\u81EA\u52A8\u5408\u5E76\uFF0C\u7528\u4E8E\u7FFB\u9875
  autoLoad?: boolean
  initialQuery?: {
    pageSize?: number
    pageNo?: number
  }
}

export type FetchFn = (
  query: QueryParams,
) => Promise<{ data: any[]; hasMore?: boolean; total?: number; [x: string]: any }>

export const defaultInitialQuery: QueryParams = {
  pageNo: 1,
  pageSize: 10,
  query: {},
}

const listViewReducers = {
  setQuery: (state: any, payload: any) => ({
    ...state,
    query: typeof payload === 'function' ? payload(state.query) : payload,
  }),
}

/**
 * \u5904\u7406\u5217\u8868\u6570\u636E\u7684hooks
 */
export default function useListViewData(fetchFn: FetchFn, options: Options = {}) {
  const { isMerge = false, autoLoad = false, initialQuery = {} } = options
  const initQuery = useMemo(() => ({ ...defaultInitialQuery, ...initialQuery }), [initialQuery])

  const [asyncFetchData, { loading }] = useAsync(fetchFn)

  const [{ listData, query, hasMore, total, pageTotal }, setObjectState, { setQuery }] = useObjectState(
    {
      hasMore: false,
      total: 0,
      pageTotal: 0,
      listData: [],
      query: initQuery, // \u7528\u4E8E\u7B5B\u9009\u7684\u8BF7\u6C42\u53C2\u6570
    },
    listViewReducers,
  )

  // \u83B7\u53D6\u6570\u636E, filter\u901A\u8FC7\u8BF7\u6C42\u53C2\u6570\u4F20\u5165
  const loadData = useCallback(
    (params: Record<string, any> = {}) => {
      const currentQuery = { ...query, ...params }
      return new Promise((resolve, reject) => {
        asyncFetchData(currentQuery)
          .then(({ data, hasMore: hasMorePage, total }) => {
            const pageTotal = +(total / currentQuery.pageSize).toFixed(0)
            setObjectState((prevState) => ({
              total,
              pageTotal,
              hasMore: hasMorePage ?? pageTotal > currentQuery.pageNo,
              query: currentQuery,
              listData: isMerge ? [...prevState.listData, ...data] : data,
            }))
            resolve('load data success')
          })
          .catch((e) => {
            reject(new Error(\`load data error\`))
          })
      })
    },
    [asyncFetchData, isMerge, query, setObjectState],
  )

  useEffect(() => {
    autoLoad && loadData()
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [autoLoad])

  // \u83B7\u53D6\u4E0B\u4E00\u9875\u6570\u636E
  const loadNextPage = useCallback(() => {
    return (
      hasMore &&
      loadData({
        ...query,
        pageNo: +query.pageNo + 1,
      })
    )
  }, [loadData, query, hasMore])

  // \u83B7\u53D6\u4E0A\u4E00\u9875\u6570\u636E
  const loadPrevPage = useCallback(() => {
    return (
      query.pageNo - 1 > 0 &&
      loadData({
        ...query,
        pageNo: query.pageNo - 1,
      })
    )
  }, [loadData, query])

  /**
   * \u6E05\u7A7A\u7B5B\u9009\u6761\u4EF6
   */
  const clearQuery = useCallback(() => {
    setQuery(initQuery)
  }, [initQuery, setQuery])

  // \u91CD\u8F7D\u6570\u636E\uFF0C\u5373\u6E05\u7A7A\u5206\u9875\u3001\u67E5\u8BE2\u6761\u4EF6\u91CD\u65B0\u8BF7\u6C42
  const reloadData = useCallback(() => {
    setQuery(initQuery)
    return loadData(initQuery)
  }, [initQuery, loadData, setQuery])

  return {
    current: query.pageNo,
    total,
    pageTotal,
    hasMore,
    listData,
    query,
    loading,
    loadData,
    loadNextPage,
    loadPrevPage,
    clearQuery,
    reloadData,
    setQuery,
  }
}`,g=`import { useCallback } from 'react'
import useMethods, { BoundActionMethods } from '../useMethods'

type State = Record<string, any>
type SetState = (nextState: any, merge?: boolean) => void

type Methods<S> = Record<string, (...args: any[]) => S>

const defaultMethods = {
  _set: (prevState: State, payload: State) => (typeof payload === 'function' ? payload(prevState) : payload),
  _setMerge: (prevState: State = {}, payload: State) => ({
    ...(prevState || {}),
    ...(typeof payload === 'function' ? payload(prevState) : payload),
  }),
}

/**
 * \u9762\u5411\u5BF9\u8C61\u7684useState\uFF0C\u81EA\u52A8\u8FDB\u884C\u5408\u5E76\uFF0C\u57FA\u672C\u53EF\u4EE5\u8BA4\u4E3A\u7B49\u540C\u4E8Eclass\u7EC4\u4EF6\u7684this.setState
 * @param initialState \u7EA6\u5B9A\u5FC5\u987B\u662F\u4E00\u4E2Aobject
 * @param methods \u81EA\u5B9A\u4E49reducers\u65B9\u6CD5
 * @returns [state, setState, stateMethods]
 */
export default function useObjectState<S extends State>(
  initialState: S = {} as S,
  methods: Methods<S> = {}
): [S, SetState, BoundActionMethods] {
  const [state, stateMethods] = useMethods<S>({ ...methods, ...defaultMethods }, initialState as S)

  const setState: SetState = useCallback(
    (nextState, merge: boolean = true) => (merge ? stateMethods._setMerge(nextState) : stateMethods._set(nextState)),
    // eslint-disable-next-line react-hooks/exhaustive-deps
    []
  )

  return [state, setState, stateMethods]
}`,v=`import { useCallback, useEffect, useMemo, useRef } from 'react'
import useDebounceFn from '../useDebounceFn'
import useObjectState from '../useObjectState'

type AsyncFunction = (...args: any[]) => any | Promise<any>

type Exector = (...args: any[]) => Promise<any>

type Status = 'success' | 'loading' | 'idle' | 'fail' | 'mutate success'

// type UseAsyncReturn = [exector: () => ]
/**
 * \u4EC5\u5BF9\u5F02\u6B65\u51FD\u6570\u505A\u7B80\u5355\u5904\u7406\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684\u51FD\u6570\u548Cloading\u3001result\u3001error\u7B49\u72B6\u6001
 * @param asyncFunction
 * @param options.immediate \u662F\u5426\u7EC4\u4EF6\u52A0\u8F7D\u65F6\u81EA\u52A8\u6267\u884C
 * @param options.onResult \u8BF7\u6C42\u6210\u529F\u8FD4\u56DE\u6570\u636E\u7684\u56DE\u8C03\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u76F4\u63A5.then\u540E\u5904\u7406\u5373\u53EF\uFF0C\u4F46\u6709\u65F6\u5019\u5E0C\u671B\u81EA\u52A8\u540C\u6B65\u72B6\u6001\uFF0C\u5219\u53EF\u4EE5\u914D\u7F6EonResult\u65B9\u6CD5
 * @param options.debounceTime \u8BBE\u7F6E\u503C\u65F6\u81EA\u52A8\u8FDB\u884Cdebounce\u5904\u7406
 */
export default function useAsync<A extends AsyncFunction>(
  asyncFunction: A,
  {
    immediate = false,
    onResult,
    debounceTime,
  }: {
    immediate?: boolean
    onResult?: (res: any) => void
    debounceTime?: number
    manual?: boolean
  } = {},
): [
  Exector,
  {
    result: any
    error: any
    loading: boolean
    status: 'success' | 'loading' | 'idle' | 'fail' | 'mutate success'
    mutate: (...args: any[]) => any
  },
] {
  const [{ result, status, error }, setData] = useObjectState<{ status: Status; result: any; error: any }>({
    status: 'idle',
    result: undefined,
    error: undefined,
  })

  const unmountedRef = useRef(false)
  const onResultRef = useRef(onResult)
  const resultRef = useRef(result)
  resultRef.current = result
  const fetchingPromiseRef = useRef<Promise<any>>()
  if (onResultRef.current !== onResult) onResultRef.current = onResult

  const originExector = useCallback(
    (...args: any[]) => {
      // \u5982\u679C\u6B63\u5728\u8BF7\u6C42\u4E2D\uFF0C\u5219\u76F4\u63A5\u8FD4\u56DE\u8BF7\u6C42\u7684promise
      if (fetchingPromiseRef.current) {
        return fetchingPromiseRef.current
      }
      fetchingPromiseRef.current = (async () => {
        setData({ status: 'loading' })
        try {
          const res = await asyncFunction(...args)
          fetchingPromiseRef.current = null
          setData({ result: res, status: 'success' })
          onResultRef.current && onResultRef.current(res)
          return res
        } catch (error) {
          fetchingPromiseRef.current = null
          setData({ result: undefined, error, status: 'fail' })
          Promise.reject(error)
        }
      })()
      return fetchingPromiseRef.current
    },
    [asyncFunction, setData],
  )

  const [debounceExector] = useDebounceFn(originExector, debounceTime)

  // \u5982\u679C\u6709debounceTime\u5219\u4F7F\u7528debounce\u7684\u51FD\u6570
  const exector = useMemo(
    () => (debounceTime ? debounceExector : originExector),
    [debounceExector, debounceTime, originExector],
  )

  const mutate = useCallback(async (callback) => {
    const data = await callback(resultRef.current)
    setData({ result: data, status: 'mutate success' })
  }, [])

  useEffect(() => {
    !unmountedRef.current && immediate && exector()

    return () => {
      unmountedRef.current = true
    }
    // \u53EA\u5728\u7EC4\u4EF6\u52A0\u8F7D\u65F6\u6267\u884C\u4E00\u6B21
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [])

  return [
    exector,
    {
      result,
      status,
      error,
      loading: status === 'loading' || status === 'mutate success',
      mutate,
    },
  ]
}`,b=`import { useRef, useMemo, useEffect } from 'react'
import { isNil } from '../utils'

type DebunceFn = (...args: any[]) => any
type Cancel = () => void

interface DebounceFnOptions {
  cancelWhenDestroy?: boolean // \u662F\u5426\u5728\u7EC4\u4EF6\u9500\u6BC1\u65F6\u53D6\u6D88debounce
  leading?: boolean // \u4E3Atrue\u65F6\u5728\u5EF6\u8FDF\u5F00\u59CB\u524D\u7ACB\u5373\u8C03\u7528
  trailing?: boolean // \u4E3Atrue\u65F6\u5728\u5EF6\u8FDF\u7ED3\u675F\u540E\u89E6\u53D1\u8C03\u7528
  // maxWait?: number // \u8BBE\u7F6E func \u5141\u8BB8\u88AB\u5EF6\u8FDF\u7684\u6700\u5927\u503C
}

/**
 * \u5904\u7406\u4E00\u4E2A\u51FD\u6570\u8FD4\u56DE\u9632\u6296\u7684\u51FD\u6570
 * @param handler \u9700\u8981\u8FDB\u884C\u9632\u6296\u5904\u7406\u7684\u51FD\u6570
 * @param wait \u7B49\u5F85\u65F6\u95F4
 * @param options.cancelWhenDestroy \u662F\u5426\u5728\u7EC4\u4EF6\u9500\u6BC1\u65F6\u53D6\u6D88debounce
 * @param options.leading \u662F\u5426\u5728\u5EF6\u8FDF\u5F00\u59CB\u524D\u7ACB\u5373\u8C03\u7528
 * @param options.trailing \u662F\u5426\u5728\u5EF6\u8FDF\u7ED3\u675F\u540E\u89E6\u53D1\u8C03\u7528
 * @returns
 */
export default function useDebounceFn(
  handler: DebunceFn,
  wait?: number,
  options: DebounceFnOptions = {}
): [DebunceFn, Cancel] {
  const { cancelWhenDestroy = true, leading = false, trailing = true } = options
  const optionsRef = useRef({ wait, cancelWhenDestroy, leading, trailing, fired: false })
  optionsRef.current = { ...optionsRef.current, wait, cancelWhenDestroy, leading, trailing }

  const timer = useRef<number>()
  const fnRef = useRef<DebunceFn>(handler)
  fnRef.current = handler

  useEffect(() => {
    return () => {
      if (optionsRef.current.cancelWhenDestroy && timer.current) {
        clearTimeout(timer.current)
        timer.current = null
      }
    }
  }, [])

  return useMemo(() => {
    const cancel = () => {
      timer.current && clearTimeout(timer.current)
    }

    const debounceFn = (...args: any) => {
      const cb = (fire: boolean) => {
        cancel()
        fire && fnRef.current && fnRef.current.apply(null, args)
        timer.current = null
      }

      if (!isNil(optionsRef.current.wait)) {
        if (optionsRef.current.leading && !timer.current) {
          cb(true)
        }

        cancel()
        timer.current = setTimeout(() => {
          cb(optionsRef.current.trailing)
        }, optionsRef.current.wait) as unknown as number
      } else {
        cancel()
        cb(true)
      }
    }
    return [debounceFn, cancel]
  }, [])
}`,W=`import React, { useEffect, useRef } from 'react'
import 'intersection-observer'
import useListViewData from '..'

const fetchParams = { pageNo: 1, pageSize: 5 }

const mockData = new Array(30).fill(0).map((v, i) => ({ id: i, value: i }))

const fetchData = (params) => {
  const query = { ...fetchParams, ...(params || {}) }
  return new Promise((resolve) => {
    setTimeout(() => {
      const start = (query.pageNo - 1) * query.pageSize
      const data = mockData.slice(start, start + query.pageSize)
      resolve({ data, total: mockData.length, hasMore: query.pageNo < +(mockData.length / query.pageSize).toFixed(0) })
    }, 500)
  }) as any
}

export default function Demo() {
  const { listData, loading, loadNextPage, hasMore } = useListViewData(fetchData, {
    autoLoad: true,
    initialQuery: { pageSize: 10 },
    isMerge: true,
  })

  const rootRef = useRef()
  const targetRef = useRef()

  useEffect(() => {
    const io = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          entry.isIntersecting && hasMore && loadNextPage()
        })
      },
      {
        root: rootRef.current || null,
        rootMargin: \`0px\`,
        threshold: 0,
      },
    )
    io.observe(targetRef.current)
    return () => {
      io.disconnect()
    }
  }, [hasMore, loadNextPage])

  return (
    <div>
      <h2>\u6EDA\u52A8\u52A0\u8F7D\u793A\u4F8B</h2>
      <div style={{ border: 'solid 1px', height: '100px', overflow: 'scroll', padding: 0 }} ref={rootRef}>
        <ul style={{ padding: 0 }}>
          {listData.map((item, i) => (
            <li style={{ listStyleType: 'none', borderBottom: 'solid 0.5px #bbb' }} key={i}>
              \u7B2C{item.value}\u6761
            </li>
          ))}
        </ul>
        <div ref={targetRef}>{loading ? 'loading' : ''}</div>
      </div>
    </div>
  )
}`,Y=`import React from 'react'
import usePolling from '.'

const wait = (ms) => new Promise((resolve) => setTimeout(resolve, ms))
const fetchData = () =>
  wait(400).then(() => {
    const num = Math.random()
    if (num > 0.3) {
      return Array.from('\u{1F641}\u{1F602}\u{1F31D}\u{1F60F}\u{1F60E}\u{1F44D}\u{1F44C}\u{1F697}')[~~(num * 8)]
    } else {
      throw Error('\u672A\u6210\u529F\uFF0C\u7EE7\u7EED\u5C1D\u8BD5\u4E2D')
    }
  })

export default function Demo() {
  const { result, error, pollingCount, isPolling, startPolling, stopPolling } = usePolling(fetchData, {
    interval: 500,
    retryCount: 2,
  })

  const handleClick = () => {
    isPolling ? stopPolling() : startPolling()
  }

  return (
    <div>
      <button onClick={handleClick}>{isPolling ? '\u505C\u6B62\u8F6E\u8BE2' : '\u70B9\u51FB\u5F00\u59CB\u8F6E\u8BE2'}</button>
      <p>pollingCount: {pollingCount}</p>
      <p>{isPolling ? 'polling...' : ''}</p>
      <p>{error ? error.message : result}</p>
    </div>
  )
}`,L=`import { useCallback, useEffect, useRef, useState } from 'react'

type Callback = (...args: any[]) => Promise<any>
interface Options {
  interval?: number // \u8F6E\u8BE2\u95F4\u9694\u65F6\u95F4
  retryCount?: number // \u8F6E\u8BE2\u5931\u8D25\u540E\u91CD\u8BD5\u6B21\u6570
  onSuccess?: (data: any) => boolean | void // \u6210\u529F\u540E\u7684\u56DE\u8C03\u51FD\u6570
  onFail?: (data: any) => void // \u5931\u8D25\u540E\u7684\u56DE\u8C03\u51FD\u6570
}

/**
 * \u8F6E\u8BE2\u4E00\u4E2A\u8BF7\u6C42
 * @param callback
 * @param options
 * @returns
 */
const usePolling = (callback: Callback, options: Options) => {
  const { interval = 3000, retryCount = 0, onSuccess, onFail } = options
  // callback \u662F\u5FC5\u586B\u7684
  if (!callback) {
    throw new Error('No callback provided to poll. ')
  }
  const [{ isPolling, data, error, pollingCount }, setState] = useState({
    isPolling: false,
    data: undefined,
    error: null,
    pollingCount: 0,
  })

  const infoRef = useRef<{
    interval?: number
    retryCount?: number
    isPolling?: boolean
    isMounted?: boolean
    pollTimer?: number
    callback?: Callback
    onSuccess?: (data: any) => any
    onFail?: (data: any) => any
  }>({
    isMounted: false,
    retryCount,
  })
  infoRef.current.interval = interval
  infoRef.current.isPolling = isPolling
  infoRef.current.callback = callback
  infoRef.current.onSuccess = onSuccess
  infoRef.current.onFail = onFail

  const stopPolling = () => {
    if (infoRef.current.pollTimer) {
      clearTimeout(infoRef.current.pollTimer)
      infoRef.current.pollTimer = null
    }
    if (infoRef.current.isMounted) {
      setState((prev) => ({ ...prev, isPolling: false }))
    }
  }

  const runPolling = useCallback(() => {
    infoRef.current.pollTimer = setTimeout(async () => {
      const { callback, onSuccess, onFail, isPolling } = infoRef.current
      callback()
        .then((data) => {
          // \u5982\u679C\u8FD4\u56DEtrue\uFF0C\u5219\u7EE7\u7EED\u8F6E\u8BE2
          const continuePolling = onSuccess?.(data)
          setState((prev) => ({ ...prev, data, pollingCount: prev.pollingCount + 1, error: null }))
          isPolling && continuePolling ? runPolling() : stopPolling()
        })
        .catch((err) => {
          onFail?.(err)
          setState((prev) => ({ ...prev, pollingCount: prev.pollingCount + 1, error: err }))
          if (infoRef.current.retryCount > 0) {
            infoRef.current.retryCount--
            runPolling()
          } else {
            stopPolling()
          }
        })
    }, infoRef.current.interval)
  }, [])

  const startPolling = useCallback(() => {
    // \u5F00\u59CB\u65F6\u91CD\u7F6E\u91CD\u8BD5\u6B21\u6570
    infoRef.current.retryCount = retryCount
    setState((prev) => ({ ...prev, pollingCount: 0, isPolling: true }))
    runPolling()
  }, [retryCount, runPolling])

  useEffect(() => {
    const info = infoRef.current
    info.isMounted = true
    startPolling()
    return () => {
      info.isMounted = false
      stopPolling()
    }
  }, [startPolling])

  return { isPolling, pollingCount, result: data, error, startPolling, stopPolling }
}

export default usePolling`,J=`import React from 'react'
import { useCounter, useForceRender, usePrevious } from '../'

export const EqualsModeTrueDemo = () => {
  const [count, { inc, dec }] = useCounter(0)
  const last = usePrevious(count)
  const forceUpdate = useForceRender()

  return (
    <div>
      <button onClick={() => inc()}>+</button>
      <button onClick={() => dec()}>-</button>
      <button onClick={() => forceUpdate()}>\u5F3A\u5236\u6E32\u67D3</button>
      <p>
        result: current {count} previous {last}
      </p>
    </div>
  )
}

export const EqualsModeFalseDemo = () => {
  const [count, { inc, dec }] = useCounter(0)
  const last = usePrevious(count, false)
  const forceUpdate = useForceRender()

  return (
    <div>
      <button onClick={() => inc()}>+</button>
      <button onClick={() => dec()}>-</button>
      <button onClick={() => forceUpdate()}>\u5F3A\u5236\u6E32\u67D3</button>
      <p>
        current {count} previous {last}
      </p>
    </div>
  )
}

export default function () {
  return (
    <div>
      <p>default: equalsMode, \u53EA\u6709\u5F53\u503C\u53D8\u5316\u65F6\u89E6\u53D1</p>
      <EqualsModeTrueDemo />
      <p>not equalsMode\uFF0C \u6BCF\u6B21render\u65F6\u89E6\u53D1</p>
      <EqualsModeFalseDemo />
    </div>
  )
}`,X=`export { default as createContextHook } from './createContextHook'

export { default as useArray } from './useArray'
export { default as useAsync } from './useAsync'
export { default as useCounter } from './useCounter'
export { default as useDebounceEffect } from './useDebounceEffect'
export { default as useDebounceFn } from './useDebounceFn'
export { default as useDebounceState } from './useDebounceState'
export { default as useDebounceValue } from './useDebounceValue'
export { default as useDeepCompare } from './useDeepCompare'
export { default as useDidMount } from './useDidMount'
export { default as useWillUnmount } from './useWillUnmount'
export { default as useDidUpdate } from './useDidUpdate'
export { default as useUnmountedRef } from './useUnmountedRef'
export { default as useEffectMaunal } from './useEffectMaunal'
export { default as useIsoEffect } from './useIsoEffect'
export {
  default as useEventBus,
  createContextEventBus,
  EventBus,
  publish,
  createEventBus,
  useSubscribe,
} from './useEventBus'
export { default as useForceRender } from './useForceRender'
export { default as useInput } from './useInput'
export { default as useInterval } from './useInterval'
export { default as useMemoCompare } from './useMemoCompare'
export { default as useMethods } from './useMethods'
export { default as useMethodsImmer } from './useMethodsImmer'
export { default as useObjectState } from './useObjectState'
export { default as useObjectStateImmer } from './useObjectStateImmer'
export { default as usePolling } from './usePolling'
export { default as usePrevious } from './usePrevious'
export { default as useReducerImmer } from './useReducerImmer'
export { default as useRefCallback } from './useRefCallback'
export { default as useValueRef } from './useValueRef'
export { default as useSet } from './useSet'
export { default as useThrottleFn } from './useThrottleFn'

// List \u76F8\u5173
export { default as useListChecked } from './useListChecked'
export { default as useListData } from './useListData'
export { default as useListState } from './useListState'
export { default as useListViewData } from './useListViewData'
export { default as useDataListToTree } from './useDataListToTree'
export { default as useDataListToMap } from './useDataListToMap'
export { default as useDataTreeToList } from './useDataTreeToList'
export { default as useListSequenceLoad } from './useListSequenceLoad'

// \u5F00\u53D1\u5DE5\u5177
export { default as useLogRender } from './useLogRender'
export { default as useRenderCount } from './useRenderCount'

// export { useStore } from 'hydrogen-store'
export { default as useTimeout } from './useTimeout'
export { default as useTimeoutFn } from './useTimeoutFn'
export { default as useToggle } from './useToggle'
export { default as useTrimState } from './useTrimState'
export { default as useTrim } from './useTrim'
export { default as useCountDown } from './useCountdown'
export { default as useCountUp } from './useCountup'
export { default as useHistoryRef } from './useHistoryRef'
export { default as useHistoryState } from './useHistoryState'`,q=`// eslint-disable-next-line no-use-before-define
import React, { createContext as createReactContext, useContext as useReactContext, useEffect, useReducer } from 'react'
import { isObject } from '../utils'
import { EventBus } from '../useEventBus/eventBus'

interface UseCustomHook {
  (...args: any[]): any
}

interface WrapperStateFn {
  (): Record<string, any>
  __IS_GETTER_HOOK__: boolean
  type: 'object' | 'array'
}

type WrapperState = (memoObj: Record<string, any>) => WrapperStateFn

type Getter = (result: any, methods?: { wrapperState?: WrapperState }) => any

/**
 * \u521B\u5EFA\u4E00\u4E2Ahooks\u7684context
 */
export default function createContextHook<G extends Record<string, Getter>>(useCustomHook: UseCustomHook, getters?: G) {
  const initialState = {}
  const CustomHookContext = createReactContext<any>(initialState)
  const eventBus = new EventBus()
  // \u521B\u5EFA\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF\u5B58\u50A8\u5B9E\u65F6result\uFF0C\u4ECE\u521B\u5EFA\u8D77\u5F15\u7528\u5C31\u4E0D\u4F1A\u53D8\u5316
  const globalResult: any = {}

  const Provider = (props: any) => {
    const { children, ...restProps } = props || {}
    const hookResult = useCustomHook({ ...restProps })
    globalResult.hookResult = hookResult

    useEffect(() => {
      eventBus.publish('__hookContext__:getterHookChanged')
    }, [hookResult])

    useEffect(() => {
      // \u5378\u8F7D\u65F6\u5C06globalResult\u6E05\u7A7A\u6389\uFF0C\u9632\u6B62\u6301\u7EED\u5360\u5185\u5B58
      return () => {
        delete globalResult.hookResult
      }
    }, [])

    return <CustomHookContext.Provider value={{ hookResult }}>{children}</CustomHookContext.Provider>
  }

  const useHook = () => {
    const { hookResult } = useReactContext(CustomHookContext)
    return hookResult
  }

  const resultGetters: { [K in keyof G]?: () => any } = Object.entries(getters || {}).reduce((prev, [name, getter]) => {
    const useGetterHook = () => {
      const [result, dispatch] = useReducer(
        (prev: any, current: any) => getNewGetterResult({ current, prev, getter }),
        getNewGetterResult({ current: globalResult.hookResult, prev, getter })
      )

      useEffect(() => {
        eventBus.subscribe(\`__hookContext__:getterHookChanged\`, () => {
          dispatch(globalResult.hookResult)
        })
      }, [])
      return result
    }
    return { ...prev, [name]: useGetterHook }
  }, {})

  return { Provider, ...resultGetters, useHook }
}

function getNewGetterResult({ current, getter, prev }: any = {}) {
  const getterResult = getter ? getter(current, { wrapperState }) : current

  if (typeof getterResult === 'function' && getterResult.__IS_GETTER_HOOK__) {
    const result = getterResult()
    if (!getterResult.type || prev === undefined) {
      return result
    }
    if (getterResult.type === 'object') {
      return checkArrayShouldUpdate({ result, prev }) ? result : prev
    } else if (getterResult.type === 'array') {
      return checkObjShouldUpdate({ result, prev }) ? result : prev
    }
  }

  return getterResult
}

function checkArrayShouldUpdate({ result, prev }) {
  return Array.from(new Set(Object.keys(result).concat(Object.keys(prev || {})))).some(
    (key) => prev[key] !== result[key]
  )
}

function checkObjShouldUpdate({ result, prev }) {
  return Array.from(new Set([...result].concat(prev))).some((value, index) => prev[index] !== result[index])
}

function wrapperState(result) {
  let getResult = () => result
  if (isObject(result)) {
    getResult = () => {
      return result || {}
    }
    ;(getResult as WrapperStateFn).type = 'object'
  } else if (Array.isArray(result)) {
    getResult = () => {
      return result || []
    }
    ;(getResult as WrapperStateFn).type = 'array'
  }

  ;(getResult as WrapperStateFn).__IS_GETTER_HOOK__ = true
  return getResult as WrapperStateFn
}`,$=`export type Subscription<T = any> = (value: T, ...args: any[]) => void
export type EventType = string | symbol

export interface EventBusOptions {
  autoFireLatest?: boolean
}

// \u8C03\u7528\u8BA2\u9605\u7684\u65B9\u6CD5
function applySubscription<T>(subscription: Subscription<T>, payload: T) {
  try {
    subscription(payload)
  } catch (e) {
    // \u5EF6\u8FDF\u629B\u51FA\u9519\u8BEF\uFF0C\u9632\u6B62\u963B\u585E\u4E86\u5176\u4ED6\u4EFB\u52A1\u7684\u6267\u884C
    setTimeout(() => {
      throw e
    }, 0)
  }
}

export class EventBus<T = any> {
  private eventContainer = new Map<EventType, Set<Subscription<T>>>()
  cacheLatest = new Map<EventType, any>()
  autoFireLatest = false

  constructor(options: EventBusOptions = {}) {
    this.autoFireLatest = options.autoFireLatest
  }

  publish = (type: EventType, payload?: T) => {
    const subscriptions = this.eventContainer.get(type)
    this.cacheLatest.set(type, {
      hasFired: true,
      payload,
    })
    if (subscriptions) {
      subscriptions.forEach((subscription) => applySubscription(subscription, payload))
    }
  }

  subscribe = (type: EventType, handler: Subscription<T>) => {
    const subscriptions = this.eventContainer.get(type) || new Set<Subscription<T>>()
    subscriptions.add(handler)
    this.eventContainer.set(type, subscriptions)
    // autoFireLatest \u4E3A true\u65F6\u7ED1\u5B9A\u540E\u7ACB\u5373\u8C03\u7528\u6700\u8FD1\u4E00\u6B21\u89E6\u53D1
    if (this.autoFireLatest && this.cacheLatest.has(type)) {
      applySubscription(handler, this.cacheLatest.get(type).payload)
    }
    return this.unSubscribe.bind(this, type, handler)
  }

  // \u53EA\u8BA2\u9605\u4E00\u6B21\uFF0C\u81EA\u52A8\u9500\u6BC1
  subscribeOnce(type: EventType, handler: Subscription<T>) {
    const subscription = (...args: any[]) => {
      handler.apply(null, args)
      this.unSubscribe(type, subscription)
    }
    this.subscribe(type, subscription)
  }

  unSubscribe = (type: EventType, subscription: Subscription<T>) => {
    const subscriptions = this.eventContainer.get(type)
    subscriptions && subscriptions.delete(subscription)
    return this
  }

  clearSubscriptions(type: EventType) {
    this.eventContainer.forEach((subscriptions, eventType) => {
      if (eventType === type && subscriptions.size) {
        this.eventContainer.delete(eventType)
      }
    })
  }
}`,_=`import useMethods, { BoundActionMethods } from '../useMethods'

export const arrayMethods = {
  set: (state: any, value: any) => (typeof value === 'function' ? value(state) : value),

  push: (state = [], value: any) => [...state, value],

  pop: (state: string | any[]) => state.slice(0, -1),

  slice: (state: string | any[], start?: number, end?: number) => state.slice(start, end),

  clear: () => [],

  reverse: (state: any[]) => [...state].reverse(),

  concat: (state: any[], ...args: any[]) => [...state].concat(...args),

  sort: (state: any[], callback?: (a: any, b: any) => number) => [...state].sort(callback),

  sortBy: (state: any[] = [], { field, order = 'ASC' }) => {
    if (!order || !['ASC', 'DESC'].includes(order)) throw new Error('order error')
    return [...state].sort((a, b) => (order === 'ASC' ? a[field] - b[field] : b[field] - a[field]))
  },

  remove: (state: any[], value: any) =>
    state.filter((...args: any) => (typeof value === 'function' ? !value(...args) : args[0] !== value)),

  // \u6839\u636Eid\u79FB\u9664\u6570\u636E\uFF0C\u6570\u636E\u683C\u5F0F\u5FC5\u9700\u4E3A[{ [idkey], ... }]
  removeById: (state: Record<string, any>[], id: string, idKey: string = 'id') =>
    state.filter((v) => v && v[idKey] !== id),

  removeIndex: (state: any[], value: number) => state.filter((v: any, i: number) => i !== value),
}

/**
 * \u5F53state\u4E3A\u6570\u7EC4\u65F6\uFF0C\u6570\u636E\u9700\u8981\u662Fimmutable\u7684\uFF0C\u4E0D\u65B9\u4FBF\u4F7F\u7528push\u7B49\u65B9\u6CD5\u76F4\u63A5\u64CD\u7EB5\u6570\u636E\uFF0C\u6B64hook\u63D0\u4F9B\u51E0\u4E2A\u5E38\u7528\u65B9\u6CD5\uFF0C\u4FEE\u6539\u53EF\u4EE5\u81EA\u52A8\u89E6\u53D1\u6E32\u67D3
 */
export default function useArray<T>(initial?: T[] | (() => T[])): [T[], BoundActionMethods] {
  const [listData, actions] = useMethods(arrayMethods, initial || [])
  return [listData, actions]
}`,ee=`import { useRef, useMemo, useEffect, EffectCallback } from 'react'

/**
 * \u4E00\u4E2A\u9632\u6296\u89E6\u53D1\u7684useEffect
 */
export default function useDebounceEffect(callback: EffectCallback, wait = 100, deps = []) {
  const timerRef = useRef<number>()
  const waitRef = useRef<number>(wait)
  const callbackRef = useRef<EffectCallback>(callback)
  callbackRef.current = callback

  const destructorSetRef = useRef(new Set<any>())

  const { debounceCallback, cancel } = useMemo(() => {
    const cancel = () => {
      clearTimeout(timerRef.current)
      for (const destructor of destructorSetRef.current) {
        destructor && destructor()
        destructorSetRef.current.delete(destructor)
      }
    }

    const debounceCallback = () => {
      timerRef.current && clearTimeout(timerRef.current)

      timerRef.current = setTimeout(() => {
        if (callbackRef.current) {
          const destructor = callbackRef.current.apply(null)
          destructor && destructorSetRef.current.add(destructor)
        }
        timerRef.current = null
      }, waitRef.current) as unknown as number
    }
    return {
      debounceCallback,
      cancel,
    }
  }, [])

  useEffect(() => {
    deps?.length && debounceCallback()
    return () => {
      cancel()
    }
  }, deps)
}`,ne=`import { useState } from 'react'
import useDebounceFn from '../useDebounceFn'

/**
 * \u4E0EReact.useState\u7528\u6CD5\u4E00\u81F4\uFF0C\u5BF9\u6570\u636E\u8FDB\u884C\u81EA\u52A8\u9632\u6296\u5904\u7406
 */
export default function useDebounceState<S>(initialState: S | (() => S), wait = 100) {
  const [state, setState] = useState(initialState)
  const [debounceSetState] = useDebounceFn(setState, wait)

  return [state, debounceSetState] as [S, typeof setState]
}`,te=`import { useEffect, useRef, useState } from 'react'

/**
 * \u9632\u6296hooks
 */
export default function useDebounceValue(value: any, wait = 100) {
  const timer = useRef<any>()
  const [state, setstate] = useState(value)

  useEffect(() => {
    timer.current && clearTimeout(timer.current)
    timer.current = setTimeout(() => {
      setstate(value)
    }, wait)

    return () => {
      clearTimeout(timer.current)
    }
  }, [value, wait])

  return state
}`,re=`import { useState, useRef } from 'react'
import isEqual from 'lodash.isequal'
import cloneDeep from 'lodash.clonedeep'

/**
 * \u5728\u6BCF\u6B21\u66F4\u65B0\u65F6\u8FDB\u884C\u6DF1\u6BD4\u8F83\uFF0C\u5E76\u8FD4\u56DE\u65B0\u7684\u503C
 * \u6DF1\u6BD4\u8F83\u6BD4\u8F83\u8017\u6027\u80FD\uFF0C\u614E\u7528
 */
export default function useDeepCompare(value: Record<string, any> | any[]) {
  const [state, setState] = useState({ value, isEqual: true })
  const isEqualRef = useRef<boolean>(true)

  if (value && !isEqual(value, state.value)) {
    isEqualRef.current = false
    setState({ isEqual: false, value: cloneDeep(value) })
  } else if (isEqualRef.current && !state.isEqual) {
    setState((prevState) => ({ isEqual: true, value: prevState.value }))
  }

  return state
}`,oe=`import { useEffect } from 'react'
import useValueRef from '../useValueRef'

/**
 * \u63D0\u4F9B\u4E00\u4E2A\u7C7B\u4F3C\u4E8Eclass\u7EC4\u4EF6\u751F\u547D\u5468\u671F\u7684hooks
 */
export default function useDidMount(onMount: () => void): void {
  const ref = useValueRef(onMount)

  useEffect(() => {
    ref.current && ref.current()
  }, [])
}`,ae=`import { useRef } from 'react'

export default function useValueRef<T>(value: T) {
  const valueRef = useRef<T>(value)
  valueRef.current = value
  return valueRef
}`,se=`import { useEffect } from 'react'
import useValueRef from '../useValueRef'

/**
 * \u63D0\u4F9B\u4E00\u4E2A\u7C7B\u4F3C\u4E8Eclass\u7EC4\u4EF6\u751F\u547D\u5468\u671F\u7684hooks
 */
export default function useWillUnmount(onMount: () => void): void {
  const ref = useValueRef(onMount)

  useEffect(() => () => ref.current && ref.current(), [])
}`,ie=`import { useRef, useEffect } from 'react'

/**
 * \u63D0\u4F9B\u4E00\u4E2A\u7C7B\u4F3C\u4E8EcomponentDidUpdate\u751F\u547D\u5468\u671F\u7684hooks\uFF0C\u9996\u6B21\u4E0D\u6267\u884C\uFF0C\u4EC5\u66F4\u65B0\u65F6\u6267\u884C\u65B9\u6CD5
 */
export default function useDidUpdate(fn: () => void, dep?: any[]) {
  const ref = useRef({ fn, mounted: false })
  ref.current.fn = fn

  useEffect(() => {
    if (!ref.current.mounted) {
      ref.current.mounted = true
    } else {
      ref.current.fn()
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, dep)
}`,ue=`import { useRef, useEffect } from 'react'

export default function useUnmountedRef() {
  const unmountedRef = useRef(false)
  useEffect(function () {
    unmountedRef.current = false
    return function () {
      unmountedRef.current = true
    }
  }, [])
  return unmountedRef
}`,le=`import { useEffect, useReducer, useRef, EffectCallback } from 'react'

/**
 * \u540CuseEffect\uFF0C\u4E0D\u540C\u7684\u662F\uFF0C\u4E0D\u901A\u8FC7deps\u8FDB\u884C\u89E6\u53D1, \u800C\u901A\u8FC7\u8FD4\u56DE\u4E00\u4E2A\u66F4\u65B0\u51FD\u6570\u89E6\u53D1effect callback
 */
export default function useEffectMaunal(effect: EffectCallback) {
  const [count, callEffect] = useReducer((prev) => prev + 1, 0)
  const effectRef = useRef(effect)
  effectRef.current = effect

  useEffect(() => {
    if (count > 0) {
      return effectRef.current()
    }
  }, [count])

  return callEffect
}`,ce=`import React from 'react'
import { isBrowser } from '../utils'

const useIsoEffect = isBrowser ? React.useLayoutEffect : React.useEffect
export default useIsoEffect`,de=`import React, { useEffect, createContext, useContext } from 'react'
import useRefCallback from '../useRefCallback'
import { EventBus, EventType, Subscription } from './eventBus'

interface Publish {
  (type: EventType, payload?: any): void
  (payload?: any): void
}

interface SubscribeOptions {
  once?: boolean
}

interface UseSubscribe<T = any> {
  (type: EventType, callback: Subscription<T>, options?: SubscribeOptions): void
}

interface Subscribe {
  <T>(type: EventType, callback: Subscription<T>, options?: SubscribeOptions): any
  <T>(callback: Subscription<T>, options?: SubscribeOptions): any
}

type UseEventBus = <T = any>(
  type?: EventType
) => {
  publish: Publish
  useSubscribe: T
  subscribe: any
}

interface EventBusContext<T>
  extends React.Context<{
    publish: Publish
    useSubscribe: UseSubscribe<T>
    subscribe: Subscribe
    useEventBus: UseEventBus
  }> {
  useEventBus?: () => {
    publish: Publish
    useSubscribe: UseSubscribe<T>
    subscribe: Subscribe
    useEventBus: UseEventBus
  }
}

/**
 * \u8BA2\u9605\u5F53\u524D\u4E8B\u4EF6\u7684\u51FD\u6570\uFF0C\u56DE\u8C03\u51FD\u6570\u4F20\u8FDB\u6765\u540E\u5C31\u4E0D\u4F1A\u518D\u6539\u53D8\uFF0C\u5982\u679C\u5728react\u7EC4\u4EF6\u4E2D\u4E2D\u4F7F\u7528\u6709\u53EF\u80FD\u4F1A\u9020\u6210\u51FD\u6570\u4F9D\u8D56\u503C\u4E0D\u662F\u6700\u65B0
 * \u4E00\u822C\u60C5\u51B5\u4E0Bhooks/\u7EC4\u4EF6\u4E2D\u76F4\u63A5\u4F7F\u7528useSubscribe\uFF0C\u5916\u90E8js\u4E2D\u8BA2\u9605\u4F7F\u7528subscribe
 */
function subscribeOrigin<T>(
  bus: EventBus<T>,
  type: EventType,
  callback: Subscription<T>,
  options: SubscribeOptions = {}
) {
  return options.once ? bus?.subscribeOnce(type, callback) : bus?.subscribe(type, callback)
}

function useSubscribeOrigin<T>(
  bus: EventBus,
  eventName: EventType,
  callback: Subscription<T>,
  options: SubscribeOptions = {}
) {
  const subscription = useRefCallback<Subscription<T>>(callback)

  useEffect(() => {
    const unSubscribe = subscribeOrigin<T>(bus, eventName, subscription, options)
    return () => {
      unSubscribe && unSubscribe()
    }
  }, [])
}

function useEventBus(
  bus: EventBus,
  type?: EventType
): {
  publish: Publish
  useSubscribe: UseSubscribe
  subscribe: Subscribe
} {
  return {
    publish: type ? bus.publish.bind(null, type) : bus.publish.bind(null),
    useSubscribe: type ? useSubscribeOrigin.bind(null, bus, type) : useSubscribeOrigin.bind(null, bus),
    subscribe: type ? subscribeOrigin.bind(null, bus, type) : subscribeOrigin.bind(null, bus),
  }
}

/**
 * \u521B\u5EFA\u4E00\u4E2A\u72EC\u7ACB\u7684eventBus\u5B9E\u4F8B
 * @returns
 */
export function createEventBus() {
  const bus = new EventBus()

  return {
    publish: bus?.publish.bind(null) as Publish,
    useSubscribe: useSubscribeOrigin.bind(null, bus) as UseSubscribe,
    subscribe: subscribeOrigin.bind(null, bus) as Subscribe,
    useEventBus: useEventBus.bind(null, bus) as UseEventBus,
  }
}

/**
 * \u53EF\u4EE5\u751F\u6210\u4E00\u4E2A\u7528\u4E8E\u4E0A\u4E0B\u6587\u7684EventBus\u53CA\u76F8\u5173hooks
 */
export function createContextEventBus<T = any>() {
  const contextState = createEventBus()
  const eventBusContext: EventBusContext<T> = createContext(contextState)

  const useContextEventBus = () => {
    return useContext(eventBusContext)
  }

  eventBusContext.useEventBus = useContextEventBus

  return eventBusContext
}

const { publish, useEventBus: useEventBusWithoutContext, useSubscribe: useSubscribeWithoutContext } = createEventBus()

export { useEventBusWithoutContext as default, EventBus, publish, useSubscribeWithoutContext as useSubscribe }`,pe=`import { useCallback } from 'react'
import useValueRef from '../useValueRef'

type Callback = (...args: any[]) => any

/**
 * \u8FD4\u56DE\u4E00\u4E2Afunction\uFF0C\u53EF\u4EE5\u4FDD\u8BC1\u51FD\u6570\u5F15\u7528\u5730\u5740\u5728\u7EC4\u4EF6\u4E2D\u4E0D\u4F1A\u53D8\u5316
 */
export default function useRefCallback<T = Callback>(cb: T) {
  const fnRef = useValueRef<T>(cb)

  return useCallback((...args: any[]) => {
    return fnRef.current && (fnRef.current as any)(...args)
  }, [])
}`,me=`import { useState, useCallback } from 'react'

type OnChange = string | ((value: any, event: Event) => void)

/**
 *
 * @param initialValue \u9ED8\u8BA4\u503C
 * @param [valueKey] \u53EF\u9009\uFF0C\u53D6\u503C\u7684key\uFF0C\u9ED8\u8BA4\u4E3Avalue
 * @param [onChange]  \u53EF\u9009\uFF0ConChange\u4E8B\u4EF6
 */
export default function useInput(initialValue: any, valueKey?: string, onChange?: OnChange) {
  if (typeof valueKey === 'function') {
    onChange = valueKey
  }

  const valueType: string = valueKey || 'value'

  const [value, setValue] = useState(initialValue)
  const setValueFromEvent = useCallback(
    (event) => {
      const current = event.currentTarget[valueType]
      setValue(current)
      if (typeof onChange === 'function') onChange(current, event)
    },
    [onChange, valueType]
  )

  return {
    value,
    onChange: setValueFromEvent,
    setValue,
    bindEvent: {
      value,
      onChange: setValueFromEvent,
    },
  }
}`,fe=`import { useEffect, useRef, useState, useMemo } from 'react'

type Callback = (...args: any[]) => any
interface Options {
  autoRun?: boolean
}

/**
 * \u65B9\u4FBF\u4F7F\u7528setInterval\u7684hook
 */
export default function useInterval(callback: Callback, time = 300, { autoRun = true }: Options = {}) {
  const intervalFn = useRef<Callback>()
  intervalFn.current = callback
  const intervalId = useRef<number>(null)
  const [isRunning, setIsRunning] = useState(false)

  const { start, stop } = useMemo(() => {
    return {
      start: () => {
        intervalId.current = setInterval(() => {
          intervalFn.current()
          setIsRunning(true)
        }, time)
      },
      stop: () => {
        clearInterval(intervalId.current)
        intervalId.current = null
        setIsRunning(false)
      },
    }
  }, [time])

  useEffect(() => {
    autoRun && start()
    return () => {
      stop()
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [time])

  return {
    isRunning,
    start,
    stop,
  }
}`,he=`import { useEffect, useRef } from 'react'

/**
 * \u8FD9\u4E2Ahooks \u8FD4\u56DE\u4E00\u4E2Amemo\u7684\u503C\uFF0C\u53EF\u4EE5\u4F7F\u7528compare\u51FD\u6570\u4E0E\u81EA\u8EAB\u7684\u4E0A\u4E00\u6B21\u503C\u505A\u6BD4\u8F83
 */
export default function useMemoCompare(nextValue: any, compare: (prev: any, curr: any) => any) {
  const previousRef = useRef()

  const isEqual = compare(previousRef.current, nextValue)

  useEffect(() => {
    if (!isEqual) {
      previousRef.current = nextValue
    }
  })

  return isEqual ? previousRef.current : nextValue
}`,ye=`import produce from 'immer'
import { Draft, PatchListener } from 'immer/dist/immer.d'
import { ReducerAction, useMemo, useReducer } from 'react'

interface Action {
  type: string
  payload?: any
  [x: string]: any
}

interface Reducer<S> {
  (state: Draft<S>, payload?: Action | any): void
}

type Methods<S> = Record<string, Reducer<S>>
interface Dispatch {
  (actionType: string, payload?: any): void
  (action: Action): void
}

export type Actions = {
  dispatch: Dispatch
} & Exclude<Record<string, (payload?: any) => void>, 'dispatch'>

interface Options {
  patchListener?: PatchListener
}

export default function useMethodsImmer<S>(
  methods: Methods<S>,
  initialState: any,
  initializer: any = undefined,
  Options: Options = {}
): [S, Actions] {
  const immerReducer = useMemo(() => {
    return (state: S, action: ReducerAction<Reducer<any>>) =>
      produce(
        state,
        (draft: Draft<S>) => {
          const method = methods[action.type]
          if (method) {
            return method(draft, ...(action.args || []))
          }
        },
        Options.patchListener
      )
  }, [methods, Options.patchListener])

  const [state, dispatch] = useReducer(immerReducer, initialState, initializer)

  const actions: Actions = useMemo(() => {
    const dispatchMethod: Dispatch = (...args: any[]) => {
      dispatch(typeof args[0] === 'string' ? { type: args[0], args: args.slice(1) } : { type: args[0]?.type, args })
    }
    return Object.keys(methods).reduce(
      (prev, type) => ({ ...prev, [type]: (...args: any[]) => dispatch({ type, args }) }),
      { dispatch: dispatchMethod }
    )

    // \u56E0\u4E3A\u4F7F\u7528immer\uFF0C\u6B64\u5904\u5E76\u4E0D\u9700\u8981\u76D1\u542Cstate\u53D8\u52A8\uFF0Cmethods\u4E5F\u5E94\u8BE5\u662F\u9759\u6001\u914D\u7F6E\u597D\u7684\uFF0C\u4E0D\u4F1A\u52A8\u6001\u589E\u52A0
    // \u4F46\u662Factions\u4E0B\u7684reducer\u5E94\u5F53\u662F\u7EAF\u51FD\u6570\uFF0C\u4E0D\u7136\u4F1A\u9020\u6210\u5F15\u7528\u7684\u5176\u4ED6state\u4E0D\u662F\u6700\u65B0\u503C
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [])

  return [state, actions]
}`,ge=`import { useCallback } from 'react'
import useMethodsImmer from '../useMethodsImmer'

type State = Record<string, any>
type SetState = (nextState: any, merge?: boolean) => any
type BoundMethod = (nextState: any, payload?: any) => any

const defaultMethods = {
  _set: (draftState, payload: State = {}) => {
    if (typeof payload === 'function') {
      payload(draftState)
    } else {
      // \u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684\u503C
      return { ...payload }
    }
  },
  _setMerge: (draftState, payload: State) => {
    if (typeof payload === 'function') {
      payload(draftState)
    } else {
      Object.entries(payload).forEach(([key, value]) => {
        draftState[key] = value
      })
    }
  },
}

/**
 * \u9762\u5411\u5BF9\u8C61\u7684useState\uFF0C\u81EA\u52A8\u8FDB\u884C\u5408\u5E76\uFF0C\u57FA\u672C\u53EF\u4EE5\u8BA4\u4E3A\u7B49\u540C\u4E8Eclass\u7EC4\u4EF6\u7684this.setState
 * @param initialState \u7EA6\u5B9A\u5FC5\u987B\u662F\u4E00\u4E2Aobject
 * @param methods \u81EA\u5B9A\u4E49reducers\u65B9\u6CD5
 * @returns [state, setState, stateMethods]
 */
export default function useObjectStateImmer<S extends State>(
  initialState: S,
  methods: Record<string, (...args: any[]) => S>
): [S, SetState, Record<string, BoundMethod>] {
  const [state, stateMethods] = useMethodsImmer<S>({ ...methods, ...defaultMethods }, initialState || {})

  const setState: SetState = useCallback(
    (nextState, merge: boolean = false) => (merge ? stateMethods._setMerge(nextState) : stateMethods._set(nextState)),
    // eslint-disable-next-line react-hooks/exhaustive-deps
    []
  )

  return [state, setState, stateMethods]
}`,ve=`import produce from 'immer'
import { Draft } from 'immer/dist/immer.d'
import { useReducer, Dispatch } from 'react'

type Reducer<S, A> = (state: Draft<S>, action: A) => void

/**
 * \u4F7F\u7528immer\u7684reducer
 * @param reducer immer\u5F62\u5F0F\u7EC4\u7EC7\u7684reducer
 * @param initialState \u540CReact.Reducer\u7684initialState
 * @param initializer \u540CReact.Reducer\u7684initializer
 */
export default function useImmerReducer<S = any, A = any>(
  reducer: Reducer<S, A>,
  initialState: S,
  initializer?: (initial: any) => S
): [S, Dispatch<A>] {
  // @ts-ignore
  return useReducer(() => produce(reducer), initialState as any, initializer)
}`,be=`import useMethods from '../useMethods'

// export interface SetMethods<S> {
//   add: (item: S) => void
//   remove: (item: S) => void
//   toggle: (item: S) => void
//   reset: () => void
//   has: (item: S) => boolean
// }

const methods = {
  add: (prevState: Set<any>, item: any) => new Set(Array.from(prevState.add(item))),
  delete: (prevState: Set<any>, item: any) => new Set(Array.from((prevState.delete(item), prevState))),
  has: (prevState: Set<any>, item: any) => prevState.has(item),
  toggle: (prevState: Set<any>, item: any) =>
    new Set(Array.from(prevState.has(item) ? (prevState.delete(item), prevState) : prevState.add(item))),
  reset: (prevState: Set<any>, initialSet: Set<any>) => new Set(initialSet),
}

const useSet = <S>(initialSet = new Set<S>()) => {
  return useMethods(methods as any, initialSet)
}

export default useSet`,Se=`import { useEffect, useRef } from 'react'

type ThrottleFn = (...args: any[]) => void
type Cancel = () => void

/**
 * \u5BF9\u4E00\u4E2A\u51FD\u6570\u8FDB\u884C\u8282\u6D41\u5904\u7406\uFF0C\u8FD4\u56DE\u5904\u7406\u8FC7\u7684\u51FD\u6570
 * @param handler \u9700\u8981\u8FDB\u884C\u8282\u6D41\u5904\u7406\u7684\u51FD\u6570
 * @param wait \u7B49\u5F85\u65F6\u95F4
 * @param isImmediate \u662F\u5426\u7ACB\u5373\u6267\u884C\uFF0C\u9ED8\u8BA4\u4E3Afalse
 * @returns [throttleFn, cancel]
 */
function useThrottleFn(handler: ThrottleFn, wait = 200, isImmediate = false): [ThrottleFn, Cancel] {
  const timeoutRef = useRef<any>()
  const nextArgsRef = useRef<any[]>(null)

  const throttleFn = (...args: any[]) => {
    if (!timeoutRef.current) {
      const timeoutCallback = () => {
        if (!isImmediate && nextArgsRef.current) {
          const currentArgs = [...nextArgsRef.current]
          nextArgsRef.current = null
          timeoutRef.current = setTimeout(timeoutCallback, wait)
          return handler(...currentArgs)
        }
        timeoutRef.current = null
      }

      timeoutRef.current = setTimeout(timeoutCallback, wait)

      isImmediate && handler(...args)
    }
    // \u5F53\u524D\u5DF2\u7ECF\u6709\u7B49\u5F85\u6267\u884C\u7684\u51FD\u6570\uFF0C\u5FFD\u7565\u672C\u6B21\u89E6\u53D1\uFF0C\u4EC5\u66F4\u65B0\u4E00\u4E0B\u53C2\u6570
    nextArgsRef.current = args
  }

  const cancel = () => {
    timeoutRef.current && clearTimeout(timeoutRef.current)
    timeoutRef.current = null
    nextArgsRef.current = null
  }

  useEffect(() => {
    return () => {
      cancel()
    }
  }, [])

  return [throttleFn, cancel]
}

export default useThrottleFn`,Re=`import { useMemo, useRef } from 'react'
import { arrayMethods } from '../useArray'
import { transformListToTree, transformListToMap, transformListToGroup, transformListToPartition } from './helper'

export type FilterCallback<T = any> = (value: T, index: number, array: readonly T[]) => boolean
export type MapCallback<T = any> = (value: T, index: number, array: readonly T[]) => any[]
export type ReduceCallback<T = any> = (previousValue: T, currentValue: T, currentIndex: T, array: T[]) => T

export interface ChainIns {
  _value: any
  next: (fn: any) => this
  value: () => any
  add: (value: any) => this
  pop: () => this
  slice: (start?: number, end?: number) => this
  reverse: () => this
  sort: (callback?: (a: any, b: any) => number) => this
  sortBy: ({ field, order }: { field: string; order?: string }) => this
  remove: (value: any) => this
  filter: (callback: (v: any) => boolean) => this
  map: (callback: MapCallback) => this
  reduce: (callback: ReduceCallback, initialValue?: any) => this
  transTree: (options?: { parentId?: string; id?: string; children?: string }) => this
  // \u5C06\u6570\u7EC4\u8F6C\u5316\u4E3AObject
  transObj: (options?: { key?: string }) => this
  group: (options?: { groupKey?: string }) => this
  partition: (options?: { groupKey?: string }) => this
  removeById: (id: string, idKey?: string) => this
  removeIndex: (value: number) => this
}

export const baseMethods = {
  transTree: transformListToTree,
  transObj: transformListToMap,
  group: transformListToGroup,
  partition: transformListToPartition,
  removeById: arrayMethods.removeById,
  removeIndex: arrayMethods.removeIndex,
  sortBy: arrayMethods.sortBy,
}

// \u4E00\u4E9B\u4EC5\u63D0\u4F9Bchain\u4F7F\u7528\u7684\u57FA\u7840\u65B9\u6CD5
export const chainOriginMethods = {
  ...baseMethods,
  add: arrayMethods.push,
  pop: arrayMethods.pop,
  slice: arrayMethods.slice,
  remove: arrayMethods.remove,
  reverse: arrayMethods.reverse,
  sort: arrayMethods.sort,
  filter: (value: Record<string, any>[], callback: FilterCallback) => value.filter(callback),
  map: (value: Record<string, any>[], callback: MapCallback) => value.map(callback),
  reduce: (value: Record<string, any>[], callback: ReduceCallback, initialValue?: any) =>
    value.reduce(callback, initialValue),
}

export const transformsMap = {
  // \u94FE\u5F0F\u64CD\u4F5C\u6570\u636E
  chain: (origin: any) => {
    const chainIns = {
      _value: origin,
      next(fn) {
        this._value = fn(this._value, baseMethods)
        return this
      },
      value() {
        return this._value
      },
      ...Object.entries(chainOriginMethods).reduce((prev, [key, method]) => {
        return {
          ...prev,
          [key]: function (...args: any[]) {
            // @ts-ignore
            this._value = method(this._value, ...args)
            return this
          },
        }
      }, {}),
    }

    return chainIns as ChainIns
  },
  ...baseMethods,
}

/**
 * \u5BF9Record<string, any>[]\u683C\u5F0F\u7684\u6570\u636E\u8FDB\u884Cmemo\u5904\u7406, \u81EA\u52A8\u76D1\u542C\u53D8\u5316\u5E76\u66F4\u65B0\uFF0C
 * \u53EF\u4EE5\u4F7F\u7528\u81EA\u5B9A\u4E49\u5904\u7406\u51FD\u6570\u5BF9\u6570\u636E\u8FDB\u884C\u5404\u79CD\u57FA\u7840\u5904\u7406\u53CA\u8F6C\u5316\u4E3Atree\u3001obj\u3001group\u7B49\u9AD8\u7EA7\u5904\u7406
 */
export default function useListData<T extends Record<string, any>>(
  value: T[] = [],
  factory?: (originData: T[], transformMethods: typeof transformsMap) => any,
  deps: any[] = []
) {
  const factoryRef = useRef(factory)
  factoryRef.current = factory

  return useMemo(() => {
    return factoryRef.current ? factoryRef.current(value, { ...transformsMap }) : value
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [value, ...deps])
}`,xe=`import { isNil } from '../utils'

type Data = Record<string, any>[]

export function transformListToTree(data: Data, { parentId = 'pid', id = 'id', children = 'children' } = {}) {
  const cloneData = JSON.parse(JSON.stringify(data)) as Data
  const dataMap = transformListToMap(data)
  return cloneData.filter((curr) => {
    const childrenItem = cloneData.filter((child) => curr[id] === child[parentId])
    if (childrenItem.length) {
      curr[children] = childrenItem
    }
    return !curr[parentId] || isNil(dataMap[curr[parentId]])
  })
}

export function transformListToMap(data: Data, { key = 'id' } = {}) {
  return data.reduce((prev: any, cur: any) => {
    prev[cur[key]] = cur
    return prev
  }, {})
}

export function transformListToGroup(data: Data = [], { groupKey }: { groupKey?: string } = {}) {
  const groupByDataMap = {}
  if (groupKey) {
    data.forEach((item) => {
      groupByDataMap[item[groupKey]] = [...(groupByDataMap[item[groupKey]] || []), item].filter((v) => !!v)
    })
    return groupByDataMap
  } else {
    return data
  }
}

export function transformListToPartition(data: Data = [], { groupKey }: { groupKey?: string } = {}) {
  const groupMap = transformListToGroup(data, { groupKey })
  return Object.values(groupMap)
}

/**
 * \u5B57\u6BB5\u5C55\u5F00
 */
export function transformListToFoldList(data: Data = [], { fields }: { fields?: string[] } = {}) {
  return fields.reduce((prev, field) => [...prev, ...foldData(data, { field })], [])
}

function foldData(data: Data = [], { field }) {
  return data.reduce((prev: any[], item) => {
    const { field: fieldValue, ...restData } = item
    return [...prev, { key: field, value: fieldValue, ...restData }]
  }, []) as any[]
}

const transform = {
  tree: transformListToTree,
  obj: transformListToMap,
  group: transformListToGroup,
  partition: transformListToPartition,
  fold: transformListToFoldList,
}

export default transform`,we=`import useArray from '../useArray'
import { BoundActionMethods } from '../useMethods'
import useListData, { transformsMap } from '../useListData'

/**
 * \u57FA\u4E8EuseArray\u53CAuseListData\uFF0C\u5BF9Record<string, any>[]\u683C\u5F0F\u7684\u6570\u636E\u66F4\u65B0\u65F6\u8FDB\u884C\u81EA\u52A8\u5904\u7406\uFF0C\u53EF\u4EE5\u4F7F\u7528\u81EA\u5B9A\u4E49\u5904\u7406\u51FD\u6570\u5BF9\u6570\u636E\u8FDB\u884C\u5904\u7406
 */
export default function useListState<T extends Record<string, any>>(
  initialValue: T[],
  transform?: (originData: T[], transformMethods: typeof transformsMap) => any
): [T[], BoundActionMethods] {
  const [state, arrayMethods] = useArray<T>(initialValue)
  const listState = useListData(state, transform)

  return [listState, arrayMethods]
}`,Ce=`import useListData from '../useListData'

type Data = Record<string, any>[]

// \u8F6C\u5316\u4E00\u4E2A\u6241\u5E73\u6570\u636E\u4E3A\u6811\u5F62\u6570\u636E
export default function useDataListToTree(data: Data, { parentId = 'pid', id = 'id', children = 'children' } = {}) {
  return useListData(data, (originValue, { transTree }) => transTree(originValue, { parentId, id, children }))
}`,ke=`import useListData from '../useListData'

/**
 * \u8F6C\u5316\u4E00\u4E2A\u6241\u5E73\u6570\u636E\u4E3Amap
 * before: [{ id, value }, { id, value }]
 * after: { [id1]: value1, [id2]: value2 }
 */
export default function useDataListToMap<T = Record<string, any>>(data: T[], { key = 'id' } = {}) {
  return useListData(data, (originValue, { transObj }) => transObj(originValue, { key }))
}`,De=`import { useMemo } from 'react'

type Data = Record<string, any>[]

/**
 * \u5C06\u4E00\u4E2A\u6811\u8F6C\u5316\u4E3A\u6570\u7EC4
 */

function transformTreeToList(data: Data, pid = 0, { pidKey = 'pid' } = {}) {
  const newData: any[] = []
  data.forEach((item) => {
    const { children, ...restData } = item
    newData.push({ ...restData, [pidKey]: pid })
    if (children) {
      newData.push(...transformTreeToList(children, item.id))
      delete item.children
    }
  })
  return newData
}

/**
 *  \u8F6C\u5316\u4E00\u4E2A\u6811\u5F62\u6570\u636E\u4E3A\u6241\u5E73\u6570\u636E
 */
export default function useDataTreeToList(data: any) {
  return useMemo(() => transformTreeToList(data), [data])
}`,Me=`import { useEffect, useRef } from 'react'
import useRenderCount from '../useRenderCount'

/**
 * \u6253\u5370\u5F53\u524D\u7EC4\u4EF6/hooks\u4E2D\u54EA\u4E2A\u53C2\u6570\u53D8\u5316\u4E86\u5F15\u8D77\u66F4\u65B0\u3001\u7EC4\u4EF6\u6E32\u67D3\u6B21\u6570
 * \u8FD9\u4E2Ahooks\u5728\u751F\u4EA7\u4E2D\u4E00\u5B9A\u8981\u7981\u7528\u6389\uFF01\uFF01
 * @param {*} props
 * @param {*} customCallback \u53EF\u4EE5\u901A\u8FC7callback\u81EA\u884C\u8FDB\u884C\u6253\u5370\u8F93\u51FA
 * @returns renderTimes \u7EC4\u4EF6\u6E32\u67D3\u4E86\u591A\u5C11\u6B21
 */
export default function useLogRender(props: Record<string, any> = {}, customCallback?: (changesObj: {}) => any) {
  const previousProps = useRef<{}>()
  const renderCount = useRenderCount()

  const changedMapRef = useRef<any>({})

  useEffect(() => {
    if (previousProps.current) {
      const allKeys = Object.keys({ ...previousProps.current, ...props })
      const changedMap = (changedMapRef.current = {})

      allKeys.forEach((key) => {
        if (previousProps.current[key] !== props[key]) {
          changedMap[key] = {
            key,
            from: previousProps.current[key],
            to: props[key],
          }
        }
      })

      renderCount && console.log('[render count]:', renderCount)
      Object.keys(changedMap).length && console.log('[why update]:', changedMap)

      customCallback && customCallback(changedMap)
    }
    previousProps.current = props
  })

  return { renderCount, changedMap: changedMapRef.current }
}`,Ae=`import { useRef } from 'react'

export default function useRenderCount() {
  const renderCountRef = useRef(0)
  return ++renderCountRef.current
}`,Pe=`import { useEffect, useRef } from 'react'

type Callback = () => void

/**
 * \u65B9\u4FBF\u4F7F\u7528setTimeout\u7684hook
 */
export default function useTimeout<S extends Callback>(callback: S, time = 300) {
  const callbackFn = useRef<S>()
  callbackFn.current = callback

  useEffect(() => {
    const timer = setTimeout(() => {
      callbackFn.current()
    }, time)

    return () => {
      clearTimeout(timer)
    }
  }, [time])
}`,Le=`import { useReducer } from 'react'

/**
 * \u5207\u6362\u5E03\u5C14\u503C
 */
export default function useToggle(initialValue = false): [boolean, () => void] {
  return useReducer((state) => !state, !!initialValue)
}`,Te=`import { useState } from 'react'

type setTrimState = (state: string | ((oldState: string | undefined) => string | undefined)) => void
/**
 * \u5BF9\u5B57\u7B26\u4E32\u6570\u636E\u8FDB\u884C\u53BB\u6389\u7A7A\u683C\u7684\u5904\u7406, \u7528\u6CD5\u540CuseState
 * @param initialValue
 * @param fullTrim \u9ED8\u8BA4\u4E3Afalse\uFF0C\u5373\u4EC5\u53BB\u9664\u9996\u5C3E\u7A7A\u683C\uFF0C\u4E3Atrue\u65F6\u5C06\u53BB\u6389\u5B57\u7B26\u4E32\u4E2D\u6240\u6709\u7A7A\u683C
 * @returns
 */
export default function useTrimState(
  initialValue: string | undefined,
  fullTrim: boolean = false
): [string, setTrimState] {
  const [trimState, setState] = useState<string>(trim(initialValue || '', fullTrim))

  const setTrimState: setTrimState = (state) => {
    setState(typeof state === 'function' ? (oldState) => trim(state(oldState), fullTrim) : trim(state, fullTrim))
  }

  return [trimState, setTrimState]
}

function trim(target: string, fullTrim: boolean = false) {
  if (!fullTrim) {
    return target.trim()
  }
  return target.replace(/\\s/gm, '')
}`,Ie=`import { useMemo } from 'react'

/**
 * \u5BF9\u5B57\u7B26\u4E32\u6570\u636E\u8FDB\u884C\u81EA\u52A8\u53BB\u6389\u7A7A\u683C\u7684\u5904\u7406, \u57FA\u4E8EuseMemo\u5C01\u88C5
 * @param value
 * @param fullTrim \u9ED8\u8BA4\u4E3Afalse\uFF0C\u5373\u4EC5\u53BB\u9664\u9996\u5C3E\u7A7A\u683C\uFF0C\u4E3Atrue\u65F6\u5C06\u53BB\u6389\u5B57\u7B26\u4E32\u4E2D\u6240\u6709\u7A7A\u683C
 * @returns
 */
export default function useTrim(value: string | undefined, fullTrim: boolean = false): string {
  return useMemo(() => trim(value || '', fullTrim), [fullTrim, value])
}

function trim(target: string, fullTrim: boolean = false) {
  if (!fullTrim) {
    return target.trim()
  }
  return target.replace(/\\s/gm, '')
}`,Ee=`import useForceRender from '../useForceRender'
import useHistoryRef, { Return, useHistoryRefOptions } from "../useHistoryRef"

/**
 *
 * @param source
 * @param options
 * @returns
 */
export default function useHistoryState<Raw, Serialized = Raw>(
  options: useHistoryRefOptions<Raw, Serialized> = {}
): Return<Raw, Serialized> {
  const forceUpdate = useForceRender()
  return useHistoryRef({
    ...options,
    onUpdate: (...args) => {
      options.onUpdate && options.onUpdate(...args)
      forceUpdate()
    },
  })
}`,Be=`import React from 'react'
import useAnimate from '.'

const baseStyle = {
  width: 50,
  height: 50,
  backgroundColor: 'powderblue',

  display: 'flex',
  justifyContent: 'center',
  alignItems: 'center',
}

export function Demo1() {
  const [styleProps, { start }] = useAnimate({
    from: {
      opacity: 0,
      marginLeft: 0,
      width: 50,
      height: 50,
      rotateZ: '0deg',
    },
    to: {
      opacity: 1,
      marginLeft: 300,
      width: 200,
      height: 200,
      rotateZ: '200deg',
    },
  })

  return (
    <>
      <div style={{ ...baseStyle, ...styleProps }} />
      <div>
        <button onClick={() => start()}>Start</button>
      </div>
    </>
  )
}

export function Demo2() {
  const [styleProps, { start }] = useAnimate({
    from: {
      opacity: 0,
      marginLeft: 0,
      width: 50,
      height: 50,
    },
    to: {
      opacity: 1,
      marginLeft: 300,
      width: 200,
      height: 200,
    },
    duration: 500,
    autoRun: false,
    delay: 100,
    easing: 'bounce',
    // easing: 'linear',
    // easing: 'ease',
    // easing: 'quad',
    // easing: 'cubic',
    // easing: 'sin',
    // easing: 'circle',
    // easing: 'exp',
    // easing: 'in',
    // easing: 'out',
    // easing: 'inOut',
  })
  return (
    <>
      <div
        style={{
          ...baseStyle,
          ...styleProps,
        }}
      />
      {/* <Animated.Text>
        {interpolate({
          outputRange: [0, 100],
        })}
      </Animated.Text> */}
      <div>
        <button onClick={() => start()}>Start</button>
      </div>
    </>
  )
}

export function Demo3() {
  const [styleProps, { start }] = useAnimate({
    from: {
      opacity: 0,
      marginLeft: 0,
      width: 50,
      height: 50,
    },
    to: [
      {
        opacity: 1,
        marginLeft: 300,
        width: 200,
        height: 200,
      },
      {
        opacity: 0,
        marginLeft: 0,
        width: 50,
        height: 50,
      },
    ],
    loop: 1,
    autoRun: false,
    duration: 1000,
  })
  return (
    <>
      <div style={{ ...baseStyle, ...styleProps }} />
      <div>
        <button onClick={() => start()}>Start</button>
      </div>
    </>
  )
}

export function RangeDemo() {
  const [styleProps, { start }] = useAnimate({
    from: {
      opacity: 0,
      marginLeft: 0,
      width: 50,
      height: 50,
    },
    range: [0, 0.2, 0.8, 1],
    to: [
      {
        opacity: 1,
        marginLeft: 300,
        width: 200,
        height: 200,
      },
      // \u7528\u4E8E\u505C\u7559\u5728\u5F53\u524D\u72B6\u6001
      {
        opacity: 1,
        marginLeft: 300,
        width: 200,
        height: 200,
      },
      {
        opacity: 0,
        marginLeft: 0,
        width: 50,
        height: 50,
      },
    ],
    loop: 1,
    duration: 1000,
  })
  return (
    <>
      <div style={{ ...baseStyle, ...styleProps }} />
      <div>
        <button onClick={() => start()}>Start</button>
      </div>
    </>
  )
}

export function DemoLoop() {
  const [styleProps] = useAnimate({
    from: {
      opacity: 1,
      backgroundColor: '#ffaaee',
    },
    to: [
      {
        opacity: 1,
        backgroundColor: '#ffaaee',
      },
      {
        opacity: 0,
        backgroundColor: 'rgb(14,26,19)',
      },
    ],
    loop: -1,
    duration: 1000,
  })
  return <div style={{ ...baseStyle, ...styleProps }} />
}

export default function Demo() {
  return (
    <div>
      <DemoLoop />
      <Demo2 />
      <Demo3 />
    </div>
  )
}`,T=`import { useCallback, useEffect, useMemo, useRef, useState } from 'react'
import { useIsoEffect } from 'brick-hooks'
import uuid from 'uuid'
import useStyle from '../useStyle'
import createDangerousStringForStyles, { bounceKeyFrames } from './helper'

interface Style extends Record<string, string> {}

interface Options {
  from?: Style
  to?: Style | Style[]
  range?: number[]
  duration?: number
  easing?: 'linear' | 'ease' | 'in' | 'out' | 'inOut' | 'bounce'
  delay?: number
  loop?: number
  autoRun?: boolean
  keyframesName?: string
  shouldReset?: boolean
  defaultUseFrom?: boolean
  reverse?: boolean
}

export default function useAnimate({
  from,
  to,
  range,
  duration = 500,
  easing = 'ease',
  delay = 0,
  loop = 1,
  autoRun = true,
  keyframesName,
  defaultUseFrom = true,
  reverse = false,
}: Options = {}): [Record<string, any>, { start: (options: { reverse?: boolean }) => void; reset: () => void }] {
  const uuidRef = useRef()
  if (!uuidRef.current) {
    uuidRef.current = uuid()
  }

  const fromRef = useRef(defaultUseFrom ? from : {})
  const toRef = useRef(to)
  toRef.current = to
  const rangeRef = useRef(range)
  rangeRef.current = range
  const timerRef = useRef<any>()

  const [style, setStyle] = useState(fromRef.current)
  const id = useMemo(() => keyframesName ?? \`keyframe-\${uuidRef.current}\`, [keyframesName])

  useEffect(() => {
    console.log('first')
  }, [])

  useStyle(
    useMemo(() => {
      if (!keyframesName && fromRef.current && toRef.current) {
        const styleContent = getKeyFramesStyle({
          id,
          from: fromRef.current,
          to: toRef.current,
          range: rangeRef.current,
          easing,
        })
        return \`\${styleContent}\`
      } else {
        return undefined
      }
    }, [easing, id, keyframesName]),
    id,
    {
      removeOnDestroy: true,
    },
  )

  const reset = useCallback(() => setStyle({ ...fromRef.current }), [])

  const start = useCallback(
    ({ reverse: currentReverse }: { reverse?: boolean } = {}) => {
      if (!timerRef.current) {
        reset()
        timerRef.current = setTimeout(() => {
          const animation = \`\${duration}ms \${easing === 'bounce' ? 'linear' : easing} \${delay}ms \${
            loop === -1 ? 'infinite' : loop
          } \${currentReverse || reverse ? 'reverse' : 'normal'} both running \${id}\`

          setStyle({
            backfaceVisibility: 'hidden',
            // perspective: '1000',
            ...fromRef.current,
            animation,
            WebkitAnimation: animation,
          })
          timerRef.current = null
        }, 0)
      }
    },
    [reset, duration, easing, delay, loop, id, reverse],
  )

  useIsoEffect(() => {
    autoRun && start()
  }, [autoRun, start])

  useEffect(() => {
    return () => {
      timerRef.current && clearTimeout(timerRef.current)
      reset()
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [])

  return [style, { start, reset }]
}

// \u5BF9\u5355\u6761style\u503C\u8FDB\u884C\u5904\u7406
function getKeyFramesStyle({ id, from, to, range, easing }) {
  const isMulti = Array.isArray(to)
  const inputRange = range?.length
    ? range
    : isMulti
    ? to.reduce((prev, curr, i) => [...prev, i === to.length - 1 ? 1 : (1 / to.length) * (i + 1)], [0])
    : [0, 1]
  const outputRange = isMulti ? [from, ...to] : [from, to]

  return \`
    @keyframes \${id} {
      \${easing === 'bounce' ? bounceKeyFrames(outputRange[outputRange.length - 1]) : ''}

      \${inputRange
        .map((v, i) => {
          return \`
        \${v * 100}% {
          \${createDangerousStringForStyles(outputRange[i])}
        }
        \`
        })
        .join('')}
    }
  \`
}`,S=`import React, { useCallback, useRef } from 'react'
import { isBrowser } from '../utils'

const useIsoEffect = isBrowser ? React.useLayoutEffect : React.useEffect

/**
 * \u5411\u9875\u9762\u4E2D\u63D2\u5165\u4E00\u6BB5style
 * @param {string} styleContent css\u5185\u5BB9
 * @param {string} id \u552F\u4E00id, \u7528\u4E8E\u5378\u8F7D\u65F6\u5220\u9664\uFF0C\u5982\u4E0D\u9700\u8981\u53EF\u4E0D\u4F20
 * @param {Object} options \u914D\u7F6E\u9879
 * @param {boolean} options.removeOnDestroy \u5378\u8F7D\u65F6\u662F\u5426\u5220\u9664\uFF0C\u9ED8\u8BA4\u4E3Afalse
 */
export default function useStyle(
  styleContent: string,
  id?: string,
  { removeOnDestroy = false }: { removeOnDestroy?: boolean } = {},
) {
  const styleNodeRef = useRef(null)
  const setStyle = useCallback(() => {
    try {
      let style = (styleNodeRef.current = document.querySelector<HTMLStyleElement>(\`style#\${id}\`))

      if (!style) {
        style = document.createElement('style')
        style.id = id
        style.type = 'text/css'
        style.innerHTML = styleContent || ''
        document.head.appendChild(style)
      } else {
        style.innerHTML = styleContent || ''
      }
    } catch (error) {
      console.warn(error)
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [id, styleContent])

  const removeStyle = useCallback(() => {
    try {
      const style = styleNodeRef.current || document.querySelector<HTMLStyleElement>(\`style#\${id}\`)
      style && document.head.removeChild(style)
    } catch (error) {
      console.warn(error)
    }
  }, [id])

  useIsoEffect(() => {
    isBrowser && setStyle()
    return () => {
      isBrowser && removeOnDestroy && removeStyle()
      styleNodeRef.current = null
    }
  }, [setStyle, removeStyle])

  return removeStyle
}`,l=`export function invariant(condition: boolean, message: string) {
  if (!condition) {
    throw new Error(message)
  }
}

export function isNil(value: any) {
  return value === undefined || value === null
}

export function isObject(value: any) {
  return typeof value === 'object' && Object.prototype.toString.call(value) === '[object Object]'
}

/**
 * @example '2px' + 1 = '3px'
 * @example '15em' + (-2) = '13em'
 */
export function increaseWithUnit(target: string | number, delta: number): string | number {
  if (typeof target === 'number') return target + delta
  const value = target.match(/^-?[0-9]+\\.?[0-9]*/)?.[0] || ''
  const unit = target.slice(value.length)
  const result = parseFloat(value) + delta
  if (Number.isNaN(result)) return target
  return result + unit
}

export const isBrowser = !!(typeof window !== 'undefined' && window.document && window.document.createElement)`,I=`const uppercasePattern = /([A-Z])/g
const msPattern = /^ms-/

const transformKeys = [
  'matrix',
  'perspective',
  'rotate',
  'rotateX',
  'rotateY',
  'rotateZ',
  'scale',
  'scaleX',
  'scaleY',
  'translateX',
  'translateY',
  'skewX',
  'skewY',
]

// \u6A21\u62DFreact-native bounce \u7F13\u52A8\u51FD\u6570\u52A8\u753B\u6548\u679C
// https://easings.net/#easeInBounce
export const bounceKeyFrames = (style) => \`
0% {
  \${createDangerousStringForStyles(style, 0)}
}

12% {
  \${createDangerousStringForStyles(style, 0.1089)}
}

24% {
  \${createDangerousStringForStyles(style, 0.4356)}
}

36% {
  \${createDangerousStringForStyles(style, 0.9801)}
}

44% {
  \${createDangerousStringForStyles(style, 0.7502)}
}

74% {
  \${createDangerousStringForStyles(style, 0.9837)}
}

82% {
  \${createDangerousStringForStyles(style, 0.9375)}
}

92% {
  \${createDangerousStringForStyles(style, 0.9934)}
}

96% {
  \${createDangerousStringForStyles(style, 0.9846)}
}

100% {
  \${createDangerousStringForStyles(style, 1)}
}
\`

/**
 * CSS properties which accept numbers but are not in units of "px".
 */
const isUnitlessNumber = {
  animationIterationCount: true,
  borderImageOutset: true,
  borderImageSlice: true,
  borderImageWidth: true,
  boxFlex: true,
  boxFlexGroup: true,
  boxOrdinalGroup: true,
  columnCount: true,
  columns: true,
  flex: true,
  flexGrow: true,
  flexPositive: true,
  flexShrink: true,
  flexNegative: true,
  flexOrder: true,
  gridArea: true,
  gridRow: true,
  gridRowEnd: true,
  gridRowSpan: true,
  gridRowStart: true,
  gridColumn: true,
  gridColumnEnd: true,
  gridColumnSpan: true,
  gridColumnStart: true,
  fontWeight: true,
  lineClamp: true,
  lineHeight: true,
  opacity: true,
  order: true,
  orphans: true,
  tabSize: true,
  widows: true,
  zIndex: true,
  zoom: true,
  // SVG-related properties
  fillOpacity: true,
  floodOpacity: true,
  stopOpacity: true,
  strokeDasharray: true,
  strokeDashoffset: true,
  strokeMiterlimit: true,
  strokeOpacity: true,
  strokeWidth: true,

  matrix: true,
  perspective: true,
  rotate: true,
  rotateX: true,
  rotateY: true,
  rotateZ: true,
  scale: true,
  scaleX: true,
  scaleY: true,
  // translateX: true,
  // translateY: true,
  skewX: true,
  skewY: true,
}

function hyphenateStyleName(name) {
  return name.replace(uppercasePattern, '-$1').toLowerCase().replace(msPattern, '-ms-')
}

function dangerousStyleValue(name, value, isCustomProperty, easingNum) {
  const isEmpty = value == null || typeof value === 'boolean' || value === ''

  if (isEmpty) {
    return ''
  }

  if (
    !isCustomProperty &&
    typeof value === 'number' &&
    value !== 0 &&
    !(Object.prototype.hasOwnProperty.call(isUnitlessNumber, name) && isUnitlessNumber[name])
  ) {
    return value * easingNum + 'px'
  }

  return ('' + value).trim()
}

export default function createDangerousStringForStyles(style = {}, easingNum = 1) {
  const styles: Record<string, any> = {}
  const transform = {}
  Object.entries(style).forEach(([key, value]: any) => {
    if (transformKeys.includes(key)) {
      transform[key] = value
    } else {
      styles[key] = value
    }
  })
  let serialized = ''
  let delimiter = ''

  for (const styleName in styles) {
    if (!Object.prototype.hasOwnProperty.call(styles, styleName)) {
      continue
    }

    const styleValue = styles[styleName]

    if (styleValue != null) {
      const isCustomProperty = styleName.indexOf('--') === 0
      serialized += delimiter + (isCustomProperty ? styleName : hyphenateStyleName(styleName)) + ':'
      serialized += dangerousStyleValue(styleName, styleValue, isCustomProperty, easingNum)
      delimiter = ';'
    }
  }

  // \u5BF9transform\u4F5C\u7279\u6B8A\u5904\u7406
  serialized += Object.entries(transform).reduce((prev, [styleName, styleValue]: any) => {
    prev += \` \${styleName}(\${dangerousStyleValue(styleName, styleValue, false, easingNum)})\`
    return prev
  }, \`;\${hyphenateStyleName('transform')}:\`)

  return serialized || null
}`,Fe=`import React from 'react'
import useBreakpoint from '.'
import useMedia from '../useMedia'

export default function Demo() {
  const breakpointList = [
    { min: 1200, value: 6 },
    { min: 768, max: 1200, value: 12 },
    { max: 768, value: 24 },
  ]
  const col = useBreakpoint(breakpointList)
  return <div>col: {col}</div>
}

export function Demo1() {
  const mediaQueryValueList = [
    {
      media: '(min-width: 768px)',
      value: 6,
    },
    {
      media: '(max-width: 768px)',
      value: 24,
    },
  ]
  const col = useMedia(mediaQueryValueList)
  return <div>col: {col}</div>
}`,Oe=`import { useMemo } from 'react'
import useMedia from '../useMedia'
import { increaseWithUnit, isNil } from '../utils'

interface Breakpoint {
  min?: number
  max?: number
  value: any
}
type BreakpointList = Breakpoint[]

export default function useBreakpoint(breakpointList: BreakpointList, initialValue?: any) {
  return useMedia(
    useMemo(
      () =>
        breakpointList
          .map((v) => {
            const { min, max } = v
            let media: string = ''
            if (!isNil(min) && isNil(max)) {
              media = \`(min-width: \${increaseWithUnit('0px', min)})\`
            } else if (isNil(min) && !isNil(max)) {
              media = \`(max-width: \${increaseWithUnit('-0.1px', max)})\`
            } else if (!isNil(min) && !isNil(max)) {
              media = \`(min-width: \${increaseWithUnit('0px', min)}) and (max-width: \${increaseWithUnit('-0.1px', max)})\`
            }
            return { ...v, media }
          })
          .filter((v) => v.media),
      [breakpointList]
    ),
    initialValue
  )
}`,Ne=`import { useEffect, useRef, useReducer } from 'react'
import { isBrowser } from '../utils'

interface MediaQueryValue {
  media: string
  value: any
  mql?: MediaQueryList
}
type MediaQueryValueList = MediaQueryValue[]

export default function useMedia<T = any>(mediaQueryValueList: MediaQueryValueList = [], initialValue?: T): T {
  const mediaQueryListRef = useRef<MediaQueryValue[]>(getMediaQueryList(mediaQueryValueList))

  useEffect(() => {
    mediaQueryListRef.current = getMediaQueryList(mediaQueryValueList)
  }, [mediaQueryValueList])

  const [value, dispatch] = useReducer(() => {
    return mediaQueryListRef.current.find(({ mql }) => mql.matches)?.value ?? initialValue
  }, initialValue ?? mediaQueryListRef.current.find(({ mql }) => mql.matches)?.value)

  useEffect(() => {
    const onMediaChange = () => {
      mediaQueryListRef.current = getMediaQueryList(mediaQueryValueList)
      dispatch()
    }
    isBrowser && mediaQueryListRef.current.forEach(({ mql }) => {
      if (Object.prototype.hasOwnProperty.call(mql, 'addEventListener')) {
        mql.addEventListener('change', onMediaChange)
      } else {
        mql.addListener(onMediaChange)
      }
    })

    return () => {
      isBrowser && mediaQueryListRef.current.forEach(({ mql }) => {
        if (Object.prototype.hasOwnProperty.call(mql, 'removeEventListener')) {
          mql!.removeEventListener('change', onMediaChange)
        } else {
          mql!.removeListener(onMediaChange)
        }
      })
    }
  }, [])

  return value
}

function defaultMatchMedia(media: string) {
  return isBrowser ? window.matchMedia(media) : ({ media, matches: false, onchange: null }) as MediaQueryList
}

function getMediaQueryList(mediaQueryValueList: MediaQueryValueList, matchMedia = defaultMatchMedia) {
  return mediaQueryValueList.reduce((prev, curr) => [...prev, { ...curr, mql: matchMedia(curr.media) }], [])
}`,Ue=`import React, { useState } from 'react'
import useFreeDrag from '.'
import useEventListener from '../useEventListener'

export const Demo1 = () => {
  const [dragStyle, setDragStyle] = useState({})
  const { onMousedown } = useFreeDrag((rect) => setDragStyle(rect))
  const ref = useEventListener('mousedown', onMousedown)

  return (
    <div style={{ position: 'relative', height: 450, width: '100%' }}>
      <div
        ref={(r) => (ref.current = r)}
        style={{ position: 'absolute', height: 50, width: 50, backgroundColor: 'blue', ...dragStyle }}
      />
    </div>
  )
}

export const Demo2 = () => {
  const { onMousedown, style: dragStyle } = useFreeDrag()

  return (
    <div style={{ position: 'relative', height: 200, width: '100%' }}>
      <div onMouseDown={onMousedown} style={{ height: 50, width: 50, backgroundColor: 'blue', ...dragStyle }} />
    </div>
  )
}

export default Demo2`,Ve=`import { MouseEventHandler, useEffect, useMemo, useRef, useState } from 'react'

// \u66F4\u65B0\u7EC4\u4EF6\u7684left/top\uFF0C\u5373\u53EF\u81EA\u7531\u62D6\u52A8\u7EC4\u4EF6
interface Rect {
  top: number
  left: number
}

type OnDragMoving = (rect: Rect, event: MouseEvent) => void

interface DragStyle {
  top: number
  left: number
  position?: 'absolute'
}

/**
 * \u53EF\u4EE5\u5FEB\u901F\u7ED9\u4E00\u4E2A\u7EDD\u5BF9\u5B9A\u4F4D\u7684\u8282\u70B9\u63D0\u4F9B\u81EA\u7531\u62D6\u62FD\u80FD\u529B
 * @param props
 * @returns
 */
export default function useFreeDrag(
  onDragMoving: OnDragMoving = () => {},
  { initialRect = { top: 0, left: 0 } }: { initialRect?: Rect } = {},
) {
  const dragInfo = useRef({
    top: Number(initialRect?.top),
    left: Number(initialRect?.left),
    disX: null,
    disY: null,
  })

  const [dragStyle, setDragStyle] = useState<DragStyle>({ ...initialRect })

  useEffect(() => {
    dragInfo.current.top = Number(initialRect?.top)
    dragInfo.current.left = Number(initialRect?.left)
  }, [initialRect?.top, initialRect?.left])

  const styleRef = useRef({
    top: Number(initialRect?.top),
    left: Number(initialRect?.left),
  })

  const methods = useMemo(() => {
    const getMovingPosition = (e: { clientX: number; clientY: number }) => {
      return {
        x: e.clientX - (dragInfo.current.disX || 0),
        y: e.clientY - (dragInfo.current.disY || 0),
      }
    }

    const dragMoving = (event: MouseEvent) => {
      event.stopPropagation()
      event.preventDefault()
      const { x, y } = getMovingPosition(event)
      if (!x && !y) return
      styleRef.current.top = dragInfo.current.top + y
      styleRef.current.left = dragInfo.current.left + x

      const rect = {
        top: styleRef.current.top,
        left: styleRef.current.left,
      }
      setDragStyle({ ...rect, position: 'absolute' })
      onDragMoving(rect, event)
    }

    const onMouseup = () => {
      dragInfo.current.top = styleRef.current.top
      dragInfo.current.left = styleRef.current.left
      document.removeEventListener('mousemove', dragMoving)
    }

    // \u79FB\u9664\u7ED1\u5B9A\u4E8B\u4EF6
    const removeEventListeners = () => {
      document.removeEventListener('mouseup', onMouseup)
      document.removeEventListener('click', onMouseup)
      document.removeEventListener('mousemove', dragMoving)
    }

    // \u6BCF\u6B21\u70B9\u51FB\u9009\u62E9\u7EC4\u4EF6\u540E\u521D\u59CB\u5316\u4F4D\u7F6E\u5E76\u7ED1\u5B9A\u4E8B\u4EF6
    const preparation: MouseEventHandler<HTMLDivElement> = (e) => {
      // \u8BB0\u5F55\u6309\u4E0B\u6309\u952E\u65F6\u9F20\u6807\u6240\u5728\u4F4D\u7F6E
      dragInfo.current.disX = e.clientX
      dragInfo.current.disY = e.clientY

      removeEventListeners()
      document.addEventListener('mouseup', onMouseup, { once: true })
      document.addEventListener('click', onMouseup, { once: true })
    }

    const readyDrag: MouseEventHandler<HTMLDivElement> = (e) => {
      e.preventDefault()
      if (e.button !== 0) return
      preparation(e)
      dragInfo.current.top = dragInfo.current.top ?? Number(initialRect?.top)
      dragInfo.current.left = dragInfo.current.left ?? Number(initialRect?.left)
      document.addEventListener('mousemove', dragMoving)
    }

    return {
      readyDrag,
      removeEventListeners,
    }
  }, [])

  useEffect(() => {
    methods.removeEventListeners()
    return () => {
      methods.removeEventListeners()
    }
  }, [])

  return {
    onMousedown: methods.readyDrag,
    style: dragStyle,
    props: { onMousedown: methods.readyDrag, style: dragStyle },
    parentStyle: { position: 'relative' },
  }
}`,E=`import { useEffect, useRef } from 'react'
import { isBrowser } from '../utils'

type Handler = (...args: any[]) => void
interface Options {
  capture?: boolean
  once?: boolean
  passive?: boolean
  signal?: AbortSignal
  dom?: Element
}

/**
 * \u4F7F\u7528\u4E8B\u4EF6\u7684hook
 */
function useEventListener(eventName: string, handler: Handler, { dom, ...options }: Options = {}) {
  const ref = useRef<any>()
  const handlerRef = useRef<Handler>(handler)
  handlerRef.current = handler

  const optionsRef = useRef<Options>(options)
  optionsRef.current = options

  useEffect(() => {
    if (isBrowser) {
      const element = dom || ref.current || window
      const eventListener = function (event: Event) {
        handlerRef.current && handlerRef.current.call(this, event)
      }
      element.addEventListener(eventName, eventListener, optionsRef.current)

      return () => {
        element.removeEventListener(eventName, eventListener, optionsRef.current)
      }
    }
  }, [eventName, dom])

  return ref
}

export default useEventListener`,He=`import React from 'react'
import useGeoLocation from '..'
import './index.css'

const DefaultIcon = (
  <svg
    className="icon"
    viewBox="0 0 1024 1024"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    p-id="4449"
    width="20"
    height="20"
  >
    <path
      // eslint-disable-next-line max-len
      d="M512 1011.2l-25.6-25.6C268.8 748.8 160 569.6 160 448c0-198.4 153.6-352 352-352s352 153.6 352 352c0 128-108.8 307.2-326.4 537.6l-25.6 25.6zM512 160c-160 0-288 128-288 288 0 102.4 96 256 288 473.6 192-204.8 288-364.8 288-473.6 0-160-128-288-288-288z"
      p-id="4450"
    ></path>
    <path
      // eslint-disable-next-line max-len
      d="M512 608C422.4 608 352 537.6 352 448S422.4 288 512 288s160 70.4 160 160S601.6 608 512 608z m0-256c-51.2 0-96 44.8-96 96S460.8 544 512 544 608 499.2 608 448 563.2 352 512 352z"
      p-id="4451"
    ></path>
  </svg>
)

export default function LocationBar() {
  const { location, loading, loadLocation } = useGeoLocation()

  return (
    <div className="location-bar">
      <div className="left">
        <span>{DefaultIcon}</span>
        <span>{loading ? '\u6B63\u5728\u5B9A\u4F4D' : \`\${location?.latitude}, \${location?.longitude}\`}</span>
      </div>
      <div className="right" onClick={loadLocation}>
        \u91CD\u65B0\u5B9A\u4F4D
      </div>
    </div>
  )
}`,je=`/* eslint-disable no-undef */
import { useAsync } from 'brick-hooks'
import { useCallback, useEffect, useReducer, useRef } from 'react'
import { isBrowser } from '../utils'

export const defaultNavigator = isBrowser ? window.navigator : undefined

export interface UseGeolocationOptions {
  enableHighAccuracy?: boolean
  maximumAge?: number
  timeout?: number
  navigator?: Navigator
  watch?: boolean
}

/**
 * \u83B7\u53D6\u6D4F\u89C8\u5668geo\u5B9A\u4F4D
 */
export default function useGeolocation(options: UseGeolocationOptions = {}) {
  const {
    enableHighAccuracy = true,
    maximumAge = 30000,
    timeout = 27000,
    navigator = defaultNavigator,
    watch = false,
  } = options

  const isSupportedRef = useRef(!!(navigator && 'geolocation' in navigator))

  const [, forceUpdate] = useReducer((prev) => prev + 1, 0)

  const timestamp = useRef<number | null>(null)
  const error = useRef(null)
  const coords = useRef({
    accuracy: 0,
    latitude: Infinity,
    longitude: Infinity,
    altitude: null,
    altitudeAccuracy: null,
    heading: null,
    speed: null,
  })

  const updatePosition = (position) => {
    timestamp.current = position.timestamp
    coords.current = {
      accuracy: position.coords.accuracy,
      altitude: position.coords.altitude,
      altitudeAccuracy: position.coords.altitudeAccuracy,
      heading: position.coords.heading,
      latitude: position.coords.latitude,
      longitude: position.coords.longitude,
      speed: position.coords.speed,
    }
    error.current = null
    forceUpdate()
  }

  const onError = (err) => {
    console.log(err)
    error.current = err
    forceUpdate()
  }

  const getCurrentPosition = useCallback(() => {
    return new Promise((resolve, reject) => {
      navigator!.geolocation.getCurrentPosition(
        (position) => {
          updatePosition(position)
          resolve(position)
        },
        (error) => {
          onError(error)
          reject(error)
        },
        {
          enableHighAccuracy,
          maximumAge,
          timeout,
        },
      )
    })
  }, [enableHighAccuracy, maximumAge, navigator, timeout])

  const [getCurrentPositionAsync, { loading }] = useAsync(getCurrentPosition)

  useEffect(() => {
    let watcher: number
    if (isSupportedRef.current) {
      if (watch) {
        watcher = navigator!.geolocation.watchPosition(updatePosition, onError, {
          enableHighAccuracy,
          maximumAge,
          timeout,
        })
      } else {
        getCurrentPositionAsync()
      }
    }

    return () => {
      if (watcher && navigator) navigator.geolocation.clearWatch(watcher)
    }
  }, [enableHighAccuracy, getCurrentPositionAsync, maximumAge, navigator, timeout, watch])

  return {
    isSupported: isSupportedRef.current,
    location: coords.current,
    timestamp: timestamp.current,
    error: error.current,
    loading,
    loadLocation: getCurrentPositionAsync,
  }
}

export type UseGeolocationReturn = ReturnType<typeof useGeolocation>`,ze=`.location-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 300px;
  background-color: aliceblue;
  border-radius: 10px;
  padding: 0 10px;
  height: 30px;
  font-size: 12px;
}

.location-bar .left {
  display: flex;
  justify-content: space-between;
  align-items: center;
}`,Qe=`import React, { useRef, useState } from 'react'
import useHover from '.'

export default function Demo() {
  const domNodeRef = useRef()
  const isHover = useHover(domNodeRef)

  return (
    <div
      ref={domNodeRef}
      style={{
        border: 'solid 1px blue',
        width: '200px',
        height: '200px',
        ...(isHover ? { background: 'blue', color: 'white' } : {}),
      }}
    >
      \u60AC\u6D6E\u4E0A\u6765
    </div>
  )
}

export function Demo2() {
  const domNodeRef = useRef()
  const [stateHover, setStateHover] = useState(false)
  useHover(domNodeRef, {
    onOver: () => {
      setStateHover(true)
    },
    onOut: () => {
      setStateHover(false)
    },
  })

  return (
    <div
      ref={domNodeRef}
      style={{
        border: 'solid 1px blue',
        width: '200px',
        height: '200px',
        ...(stateHover ? { background: 'blue', color: 'white' } : {}),
      }}
    >
      \u60AC\u6D6E\u4E0A\u6765
    </div>
  )
}`,Ge=`import { useReducer, useRef } from 'react'
import useEventListener from '../useEventListener'

interface Options {
  onOver?: () => void
  onOut?: () => void
  updateOnStatusChange?: boolean // \u662F\u5426\u5728\u60AC\u6D6E\u72B6\u6001\u6539\u53D8\u65F6\u89E6\u53D1\u7EC4\u4EF6\u5237\u65B0
}

export default function useHover(ref: any, { onOver, onOut, updateOnStatusChange = true }: Options = {}) {
  const isHoverRef = useRef<boolean>(false)
  const [, forceUpddate] = useReducer((prev) => prev + 1, 0)

  useEventListener(
    'mouseover',
    () => {
      isHoverRef.current = true
      updateOnStatusChange && forceUpddate()
      onOver && onOver()
    },
    { dom: ref.current },
  )

  useEventListener(
    'mouseout',
    () => {
      isHoverRef.current = false
      updateOnStatusChange && forceUpddate()
      onOut && onOut()
    },
    { dom: ref.current },
  )

  return isHoverRef.current
}`,Ke=`import React from 'react'
import useInView from '.'

const Demo = () => {
  const { isInView, rootProps, targetProps } = useInView()

  return (
    <>
      <div>{isInView ? '\u8FDB\u5165\u53EF\u89C6\u533A\u57DF\u4E86' : '\u4E0D\u5728\u53EF\u89C6\u533A\u57DF'}</div>
      <div style={{ width: '100%', height: 100, overflow: 'scroll', border: '1px solid' }} {...rootProps}>
        <div
          style={{
            width: 200,
            height: 50,
            backgroundColor: 'powderblue',
            marginTop: 300,
            marginBottom: 300,
          }}
          {...targetProps}
        />
      </div>
    </>
  )
}

export default Demo`,B=`import 'intersection-observer'
import { useEffect, useRef, useState } from 'react'

interface Status {
  isInView: boolean
  ratio: number
}

function useInView(
  options: {
    target?: any
    root?: any
    onInView?: (status: Status) => any
    onOutView?: (status: Status) => any
    rootMargin?: number
    threshold?: number | number[]
  } = {},
) {
  const {
    target,
    root,
    onInView, // \u63D0\u4F9B\u4E00\u4E2A\u63A5\u6536\u76D1\u542C\u7684\u56DE\u8C03\u51FD\u6570
    onOutView, // \u63D0\u4F9B\u4E00\u4E2A\u63A5\u6536\u76D1\u542C\u7684\u56DE\u8C03\u51FD\u6570
    rootMargin = 0, // \u53C2\u89C1https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
    threshold = 0, // \u53C2\u89C1https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
  } = options
  const containerRef = useRef<any>()

  let rootRef
  if (root) {
    if (Object.prototype.hasOwnProperty.call(root, 'current')) {
      rootRef = root
    } else {
      containerRef.current = root
    }
  }
  rootRef = rootRef || containerRef
  const targetRef = useRef<any>(target?.current ? target.current : target)

  const onInViewRef = useRef<any>()
  onInViewRef.current = onInView

  const onOutViewRef = useRef<any>()
  onOutViewRef.current = onOutView

  const [status, setStatus] = useState({ isInView: false, ratio: 0 })

  useEffect(() => {
    const io = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          const newStatus = { isInView: entry.isIntersecting, ratio: entry.intersectionRatio }
          setStatus(newStatus)
          entry.isIntersecting ? onInViewRef.current?.(newStatus) : onOutViewRef.current?.(newStatus)
        })
      },
      {
        root: rootRef.current || null,
        rootMargin: \`\${rootMargin || 0}px\`,
        threshold,
      },
    )
    io.observe(targetRef.current)
    return () => {
      io.disconnect()
    }
  }, [rootMargin, rootRef, threshold])

  return {
    ...status,
    rootProps: {
      ref: (ref: any) => (rootRef.current = ref),
    },
    targetProps: {
      ref: (ref: any) => (targetRef.current = ref),
    },
  }
}

export default useInView`,Ze=`import React from 'react'
import useLazyImage from '.'

const Demo = () => {
  useLazyImage('.lazy-load-container img')

  return (
    <div className="lazy-load-container">
      {new Array(10).fill(0).map((v, i) => {
        return (
          <img
            style={{ width: '100%', height: 100 }}
            key={i}
            data-src="http://img.mp.sohu.com/upload/20170524/ae7c725e1aa1435ebd208aacf873ac9d_th.png"
          />
        )
      })}
    </div>
  )
}

export default Demo`,We=`import { useEffect } from 'react'
import 'intersection-observer'
import { isBrowser } from '../utils'

/**
 * \u5BF9\u56FE\u7247\u81EA\u52A8\u5224\u65AD\u662F\u5426\u5728\u53EF\u89C6\u533A\u57DF\u5E76\u8FDB\u884C\u61D2\u52A0\u8F7D
 * \u56FE\u7247\u4E0D\u8BBE\u7F6Esrc\u800C\u8BBE\u7F6E\u4E00\u4E2AsourceAttr\uFF0C\u5E76\u4F7F\u7528\u8FD9\u4E2Ahook
 * @param querySelector
 * @param options.sourceAttr
 * @param options.checkIsInWindow \u81EA\u5B9A\u4E49\u68C0\u6D4B\u662F\u5426\u5728\u89C6\u53E3\u4E2D
 */
export default function useLazyImages(querySelector: string, { sourceAttr = 'data-src', ...ioOptions } = {}) {
  useEffect(() => {
    if(isBrowser) {
      const io = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          const node = entry.target as any
          if (entry.isIntersecting && !node.src) {
            node.src = node.getAttribute(sourceAttr) || ''
          }
        })
      }, ioOptions)
      const imgs = document.querySelectorAll(querySelector)
      Array.from(imgs).forEach((node: HTMLImageElement) => {
        io.observe(node)
      })
      return () => {
        io.disconnect()
      }
    }
  }, [])
}`,Ye=`import React from 'react'
import useLazySequenceLoad from '.'

const containerStyle = { width: '100%', height: 100, overflow: 'scroll', border: '1px solid' }

function Item(props) {
  return (
    <div
      style={{
        width: 200,
        height: 50,
        backgroundColor: 'powderblue',
        marginBottom: 10,
        border: '1px solid #eee',
      }}
      {...props}
    ></div>
  )
}

const list = new Array(20).fill(1).map((v, i: number) => ({
  id: i + 1,
  value: i + 1,
}))

export const Demo1 = () => {
  const { showfooterLoading, showList, rootProps, loadingProps } = useLazySequenceLoad(list, {
    groupSize: 3,
    wait: 500,
  })

  return (
    <div>
      <div>\u5DF2\u52A0\u8F7D\u5217: {showList.map((v, i: number) => i + 1).join(',')}</div>
      <div {...rootProps} style={containerStyle}>
        {showList.map((item) => (
          <Item key={item.id}>{item.value}</Item>
        ))}
        {showfooterLoading ? <div {...loadingProps}>Loading</div> : null}
      </div>
    </div>
  )
}

// UseLazySequenceLoad \u8BBE\u7F6ErootMargin \u6765\u63D0\u524D\u52A0\u8F7D
export const Demo2 = () => {
  const { showfooterLoading, showList, rootProps, loadingProps } = useLazySequenceLoad(list, {
    groupSize: 3,
    rootMargin: 200,
  })

  return (
    <div>
      <div>\u5DF2\u52A0\u8F7D\u5217: {showList.map((v, i: number) => i + 1).join(',')}</div>
      <div {...rootProps} style={containerStyle}>
        {showList.map((item) => (
          <Item key={item.id}>{item.value}</Item>
        ))}
        {showfooterLoading ? <div {...loadingProps}>Loading</div> : null}
      </div>
    </div>
  )
}

export default Demo1`,Je=`import { useListSequenceLoad, useTimeoutFn } from 'brick-hooks'
import { useRef } from 'react'
import useInView from '../useInView'

interface Options {
  target?: Element // \u6307\u5B9A\u4E00\u4E2Adom \u8282\u70B9\uFF0C\u5373\u5E95\u90E8\u7684loading\u8282\u70B9\uFF0C\u53EF\u4EE5\u4E0D\u4F20\u76F4\u63A5\u4F7F\u7528loadingProps
  root?: Element // \u6EDA\u52A8\u7684\u5BB9\u5668
  groupSize?: number // \u7EC4\u5927\u5C0F\uFF0C\u6BCF\u51E0\u4E2A\u5143\u7D20\u4E3A\u4E00\u7EC4\uFF0C\u9ED8\u8BA4\u4E3A3
  onLoadingInView?: (loadNextGroupCallback: () => void) => void // \u5982\u4E0D\u81EA\u52A8\u52A0\u8F7D\u4E0B\u4E00\u7EC4\uFF0C\u5219\u53EF\u4EE5\u624B\u5DE5\u5904\u7406inView\u4E8B\u4EF6
  rootMargin?: number // \u53C2\u89C1https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
  threshold?: number | number[] // \u53C2\u89C1https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
  wait?: number // loading \u8FDB\u5165\u53EF\u89C6\u533A\u57DF\u540E\u7B49\u5F85\u591A\u4E45\u52A0\u8F7D\u4E0B\u4E00\u7EC4\uFF0C\u9ED8\u8BA4\u4E3A0
}

export default function useLazySequenceLoad(
  listData: any[],
  { target, root, groupSize = 3, onLoadingInView, rootMargin, threshold, wait = 0 }: Options,
) {
  const targetRef = useRef<any>(target)
  const rootRef = useRef<any>(root)

  const { showfooterLoading, showList, loadNextGroup } = useListSequenceLoad(listData, { groupSize })
  const [loadNextGroupAsync] = useTimeoutFn(loadNextGroup, wait)

  const { targetProps: loadingProps, rootProps } = useInView({
    target: targetRef,
    root: rootRef,
    onInView: () => {
      onLoadingInView ? onLoadingInView(loadNextGroupAsync) : loadNextGroupAsync()
    },
    rootMargin,
    threshold,
  })

  return {
    showfooterLoading,
    showList,
    rootProps,
    loadingProps,
  }
}`,Xe=`import React from 'react'
import useScroll from '.'

const Demo = () => {
  const { rootRef, y, scrollToTop } = useScroll()

  return (
    <>
      <p>scrollTop: {y}</p>
      <div ref={rootRef} style={{ width: '100%', height: 100, overflow: 'scroll', border: '1px solid' }}>
        <div
          style={{
            width: 200,
            height: 50,
            backgroundColor: 'powderblue',
            marginTop: 500,
          }}
          onClick={() => scrollToTop(0)}
        >
          return top
        </div>
      </div>
    </>
  )
}

export default Demo`,F=`import { useState, useRef, useCallback, useEffect, useMemo, Ref } from 'react'
import { isBrowser } from '../utils'

/**
 * \u6B64hooks\u7528\u4E8E\u83B7\u53D6\u4E00\u4E2Ascroll\u7684\u6EDA\u52A8\u503C,\u4E14\u63D0\u4F9B\u4E00\u4E2A\u65B9\u6CD5\u6EDA\u52A8\u5230\u5F53\u524D\u5BB9\u5668\u7684\u9876\u90E8\uFF0C\u7528\u4E8E\u5982\u5207\u6362tab\u65F6\u91CD\u7F6E\u5217\u8868\u4F4D\u7F6E\u7B49
 */
export default function useScroll({
  root,
  onScroll: onScrollChange,
}: { root?: Element | Ref<Element> | (Window & typeof globalThis); onScroll?: any } = {}) {
  const [pos, setPos] = useState({ x: 0, y: 0 })
  const scrollRef = useRef<any>((root as any)?.current || root || (isBrowser ? window : undefined))
  if (root) scrollRef.current = (root as any)?.current || root || (isBrowser ? window : undefined)
  const timerRef = useRef<any>()

  useEffect(() => {
    let ticking: number | null = null
    const onScroll = () => {
      // \u4F7F\u7528requestAnimationFrame\u505A\u9632\u6296
      if (ticking === null) {
        ticking = window.requestAnimationFrame(() => {
          const { scrollLeft, scrollTop } = isWindow(scrollRef.current)
            ? document.documentElement || document.body || {}
            : scrollRef.current || {}
          setPos({ x: scrollLeft, y: scrollTop })
          onScrollChange?.({ left: scrollLeft, top: scrollTop, x: scrollLeft, y: scrollTop })
          ticking = null
        })
      }
    }
    isBrowser && scrollRef.current?.addEventListener('scroll', onScroll)
    return () => {
      timerRef.current && clearTimeout(timerRef.current)
      isBrowser && scrollRef.current?.removeEventListener('scroll', onScroll)
    }
  }, [])

  const scrollToTop = useCallback((y = 0) => {
    timerRef.current = setTimeout(() => {
      scrollRef.current?.scrollTo?.({ y, top: y })
    }, 0)
  }, [])

  const scrollToLeft = useCallback((x = 0) => {
    timerRef.current = setTimeout(() => {
      scrollRef.current?.scrollTo?.({ x, left: x })
    }, 0)
  }, [])

  return useMemo(() => {
    return { ...pos, left: pos.x, top: pos.y, rootRef: scrollRef, scrollToTop, scrollToLeft }
  }, [pos, scrollToTop, scrollToLeft])
}

function isWindow(node) {
  return node && (node === window || node === document)
}`,qe=`import React from 'react'
import useScrollFixed from '.'

export const containerStyle = {
  width: '100%',
  maxHeight: '100%',
  height: 400,
  overflow: 'scroll',
  border: '1px solid',
}

function Item(props) {
  return (
    <div
      style={{
        width: 200,
        height: 20,
        backgroundColor: 'powderblue',
        marginBottom: 10,
        border: '1px solid #eee',
      }}
      {...props}
    ></div>
  )
}

const list1 = new Array(3).fill(1).map((v, i: number) => ({
  id: i + 1,
  value: i + 1,
}))

const list2 = new Array(20).fill(1).map((v, i: number) => ({
  id: i + 1,
  value: i + 1,
}))

export default function Demo() {
  const { targetRef, rootRef, isFixed, fixedStyle } = useScrollFixed({
    limit: 90,
  })
  return (
    <div>
      <div ref={(ref) => (rootRef.current = ref)} style={containerStyle}>
        {list1.map((item) => (
          <Item key={item.id}>{item.value}</Item>
        ))}
        {isFixed && (
          <div
            style={{
              height: 22,
            }}
          ></div>
        )}
        <div style={fixedStyle as any} ref={targetRef}>
          \u54C8\u54C8\u54C8\u54C8\u54C8
        </div>
        {list2.map((item) => (
          <Item key={item.id}>{item.value}</Item>
        ))}
      </div>
    </div>
  )
}`,$e=`import { MutableRefObject, useMemo, useRef } from 'react'
import { isBrowser } from '../utils'
import useScroll from '../useScroll'

type NodeRef = MutableRefObject<Element | undefined> | Element | undefined

interface GetLimitOptions {
  root: NodeRef
  target: NodeRef
}

type Limit = (() => number) | number

type CheckIsFixed = (args: {
  offset: number // \u6EDA\u52A8\u7684\u8DDD\u79BB
  limit: number // \u5224\u65AD\u662F\u5426\u60AC\u6D6E\u7684\u504F\u79FB\u91CF
  root: NodeRef
  target: NodeRef
}) => boolean

const DefaultFixedStyle = {
  zIndex: 100,
  position: 'fixed',
}

function useScrollFixed(
  options: {
    target?: MutableRefObject<any> | any
    root?: MutableRefObject<any> | any
    limit?: Limit
    fixedStyle?: Record<string, any>
    horizontal?: boolean
    onScroll?: () => void
    checkIsFixed?: CheckIsFixed
    initialFixed?: boolean
  } = {},
) {
  const {
    limit = 200,
    target,
    root,
    fixedStyle: propFixedStyle = {},
    horizontal = false,
    initialFixed = false,
    onScroll,
    checkIsFixed,
  } = options
  const propFixedStyleRef = useRef(propFixedStyle)

  const targetRef = useRef<any>(target?.current ?? target ?? (isBrowser ? window : undefined))
  if (target) targetRef.current = target?.current ?? target ?? (isBrowser ? window : undefined)

  const { x, y, rootRef } = useScroll({ root, onScroll })

  const fixedInfoRef = useRef({
    isFixed: initialFixed,
    fixedStyle: initialFixed ? { ...DefaultFixedStyle, ...propFixedStyleRef.current } : {},
  })

  const fixedInfo = useMemo(() => {
    const old = fixedInfoRef.current
    const current = getFixedInfo({
      offset: horizontal ? x : y,
      limit,
      root: rootRef?.current || window,
      target: targetRef.current,
      checkIsFixed,
      fixedStyle: old.fixedStyle,
    })
    // \u9632\u6B62\u6BCF\u6B21\u6EDA\u52A8\u90FD\u89E6\u53D1\u6E32\u67D3\uFF0C\u53EA\u6709\u5F53\u60AC\u6D6E\u72B6\u6001\u6216\u6837\u5F0F\u53D1\u751F\u53D8\u5316\u65F6\u624D\u89E6\u53D1\u6E32\u67D3
    if (current.isFixed !== old.isFixed || checkObjDiff(current.fixedStyle, old.fixedStyle)) {
      fixedInfoRef.current = current
    }
    return old
  }, [limit, horizontal, x, y, rootRef])

  return useMemo(() => ({ targetRef, rootRef, ...fixedInfo }), [rootRef, fixedInfo])
}

export default useScrollFixed

/**
 * \u83B7\u53D6\u9650\u5236\u503C
 */
function getLimit(limit: Limit, limitOptions: GetLimitOptions) {
  return typeof limit === 'function' ? limit.apply(limitOptions) : limit
}

/**
 * \u83B7\u53D6\u6EDA\u52A8\u7684\u4FE1\u606F
 */
function getFixedInfo({
  offset,
  limit,
  root,
  target,
  checkIsFixed = ({ offset, limit }) => offset > limit,
  fixedStyle,
}: {
  offset: number
  limit: Limit
  root?: Element
  target?: Element
  checkIsFixed?: CheckIsFixed
  fixedStyle?: Record<string, any>
}) {
  const usedLimit = getLimit(limit, { root, target })
  const isFixed = checkIsFixed({ offset, limit: usedLimit, root, target })
  return { isFixed, fixedStyle: isFixed ? { ...DefaultFixedStyle, top: 0, ...fixedStyle } : {} }
}

/**
 * \u68C0\u67E5\u4E24\u4E2A\u5BF9\u8C61\u662F\u5426\u76F8\u7B49
 */
function checkObjDiff(a: Record<string, any>, b: Record<string, any>) {
  return Object.keys(a).some((key) => a[key] !== b[key])
}`,_e=`import React, { useState } from 'react'
import useStyle from '.'

const Demo = () => {
  const [bgColor, setBgColor] = useState('red')
  useStyle(\`
    #test-useStyle-demo {
      background: \${bgColor};
    }
  \`)

  return (
    <>
      <button onClick={() => setBgColor(bgColor === 'red' ? 'blue' : 'red')}>change color</button>
      <div id="test-useStyle-demo" style={{ width: '200px', height: '200px' }}></div>
    </>
  )
}

export default Demo`,en=`/* eslint-disable max-len */
import React, { useEffect, useState } from 'react'
import { useToggle } from 'brick-hooks'
import useTransition from '.'

export function Demo1() {
  const [visible, toggleVisible] = useToggle(true)
  const [style] = useTransition({
    from: {
      opacity: 0,
      marginLeft: 0,
      width: 50,
      height: 50,
    },
    to: {
      opacity: 1,
      marginLeft: 500,
      width: 200,
      height: 200,
    },
    loop: 1,
    duration: 300,
    autoRun: true,
    reverse: !visible,
  })
  return (
    <>
      <div
        style={{
          backgroundColor: 'powderblue',
          ...style,
        }}
      />
      <div>
        <button onClick={() => toggleVisible()}>Fade {visible ? 'Out' : 'In'}</button>
      </div>
    </>
  )
}

function Transition({ visible, from, to, style, children }: any) {
  const [transStyle] = useTransition({
    from,
    to,
    loop: 1,
    duration: 1000,
    autoRun: true,
    reverse: !visible,
    // delay: 100,
  })

  return <div style={{ ...style, ...transStyle }}>{children}</div>
}

// \u5728\u4E24\u4E2A\u7EC4\u4EF6\u95F4\u5207\u6362
export function Demo2() {
  const from = { opacity: 0 }
  const to = { opacity: 1 }
  const [visible, toggleVisible] = useToggle(true)

  return (
    <>
      <div style={{ position: 'relative', height: 200 }}>
        <Transition from={from} to={to} visible={visible} style={{ position: 'absolute' }}>
          <div
            style={{
              width: 100,
              height: 100,
              background:
                'url(data:image/webp;base64,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)',
            }}
          ></div>
        </Transition>
        <Transition from={to} to={from} visible={visible} style={{ position: 'absolute' }}>
          <div
            style={{
              width: 100,
              height: 100,
              background:
                'url(data:image/webp;base64,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)',
            }}
          ></div>
        </Transition>
      </div>
      <div>
        <button onClick={() => toggleVisible()}>toggle</button>
      </div>
    </>
  )
}

// \u7EC4\u5408\u591A\u4E2A\u7EC4\u4EF6\u8FC7\u6E21\u52A8\u753B
export function Demo3() {
  const [visible, toggleVisible] = useToggle(true)
  const [compAStyle] = useTransition({
    from: {
      opacity: 0,
      left: 0,
      width: 400,
      height: 0,
    },
    to: {
      opacity: 1,
      width: 400,
      height: 400,
    },
    loop: 1,
    duration: 600,
    autoRun: true,
    reverse: !visible, // delay: 100,
  })
  const [compBStyle] = useTransition({
    from: {
      opacity: 0,
      top: 0,
      left: 400,
      width: 50,
      height: 50,
    },
    to: {
      opacity: 1,
      left: 0,
      width: 200,
      height: 200,
    },
    loop: 1,
    duration: 600,
    autoRun: true,
    reverse: !visible, // delay: 100,
  })
  return (
    <div
      style={{
        position: 'relative',
        height: 450,
      }}
    >
      <div
        style={{
          position: 'absolute',
          backgroundColor: 'powderblue',
          ...compAStyle,
        }}
      />
      /* Using the spread operator to merge the styles. */
      <div
        style={{
          position: 'absolute',
          backgroundColor: 'red',
          ...compBStyle,
        }}
      />
      <div
        style={{
          position: 'absolute',
          top: 400,
        }}
      >
        <button onClick={() => toggleVisible()}>toggle</button>
      </div>
    </div>
  )
}

const styles = [
  'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
  'linear-gradient(135deg, #c3cfe2 0%, #c3cfe2 100%)',
  'linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)',
  'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
  'linear-gradient(135deg, #d299c2 0%, #fef9d7 100%)',
  'linear-gradient(135deg, #ebc0fd 0%, #d9ded8 100%)',
  'linear-gradient(120deg, #f6d365 0%, #fda085 100%)',
]
const list = new Array(7).fill(1).map((v, i: number) => ({
  id: i + 1,
  value: i + 1,
  styleColor: styles[i],
})) // \u7EC4\u5408\u591A\u4E2A\u7EC4\u4EF6\u8FC7\u6E21\u52A8\u753B2

function shuffle(arr) {
  const result = []
  let random
  while (arr.length > 0) {
    random = Math.floor(Math.random() * arr.length)
    result.push(arr[random])
    arr.splice(random, 1)
  }
  return result
}

export const Demo4 = () => {
  const [rows, set] = useState(list)
  useEffect(() => {
    const timer = setInterval(() => {
      set(shuffle)
    }, 2000)

    return () => {
      clearInterval(timer)
    }
  }, [])

  const Item = (props) => {
    const [style] = useTransition({
      from: {
        opacity: 0,
        top: props.value * 60,
      },
      to: {
        opacity: 1,
        top: props.index * 60,
      },
      autoRun: true,
    })
    return (
      <div
        style={{
          position: 'absolute',
          background: props.styleColor,
          width: '100%',
          height: 50,
          ...style,
        }}
      >
        <div>{props.value}</div>
      </div>
    )
  }

  return (
    <div
      style={{
        position: 'relative',
        height: 450,
      }}
    >
      {rows.map((v, index) => (
        <Item key={v.id} {...v} index={index} />
      ))}
    </div>
  )
}

export default Demo3`,nn=`import { useLayoutEffect } from 'react'
import useAnimate from '../useAnimate'

export default function useTransition({ from, to, reverse = false, ...config }) {
  const [style, api] = useAnimate({
    from,
    to,
    autoRun: false,
    ...config,
  })

  useLayoutEffect(() => {
    console.log('reverse', reverse)
    api.start({ reverse })
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [reverse])

  return [style]
}`,tn=`import React from 'react'
import useAmapLocation from '..'
import './index.css'

const DefaultIcon = (
  <svg
    className="icon"
    viewBox="0 0 1024 1024"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    p-id="4449"
    width="20"
    height="20"
  >
    <path
      // eslint-disable-next-line max-len
      d="M512 1011.2l-25.6-25.6C268.8 748.8 160 569.6 160 448c0-198.4 153.6-352 352-352s352 153.6 352 352c0 128-108.8 307.2-326.4 537.6l-25.6 25.6zM512 160c-160 0-288 128-288 288 0 102.4 96 256 288 473.6 192-204.8 288-364.8 288-473.6 0-160-128-288-288-288z"
      p-id="4450"
    ></path>
    <path
      // eslint-disable-next-line max-len
      d="M512 608C422.4 608 352 537.6 352 448S422.4 288 512 288s160 70.4 160 160S601.6 608 512 608z m0-256c-51.2 0-96 44.8-96 96S460.8 544 512 544 608 499.2 608 448 563.2 352 512 352z"
      p-id="4451"
    ></path>
  </svg>
)

export default function LocationBar() {
  const { location, loading, loadLocation } = useAmapLocation({ amapKey: 'e2a0790d42bc5bfdebceb30b2b71f349' })

  return (
    <div className="location-bar">
      <div className="left">
        <span>{DefaultIcon}</span>
        <span>{loading ? '\u6B63\u5728\u5B9A\u4F4D' : \`\${location?.latitude}, \${location?.longitude}\`}</span>
      </div>
      <div className="right" onClick={loadLocation}>
        \u91CD\u65B0\u5B9A\u4F4D
      </div>
    </div>
  )
}`,O=`import { useAsync } from 'brick-hooks'
import { useEffect, useState } from 'react'
import { getLocationByAmap } from './helper'

type Location = {
  latitude?: string
  longitude?: string
  city?: string
  [x: string]: any
}

/**
 * \u4F7F\u7528\u9AD8\u5FB7\u5730\u56FE\u83B7\u53D6\u5B9A\u4F4D
 * @returns
 */
export default function useAmapLocation({ amapKey, getLocation = getLocationByAmapWebFn(amapKey) }: any = {}) {
  const [location, setLocation] = useState<Location>()
  const loadLocation = () =>
    getLocation()
      .then((data: Location) => {
        setLocation(data)
        return data
      })
      .catch(Promise.reject)

  const [loadLocationAsync, { loading }] = useAsync(loadLocation)

  useEffect(() => {
    loadLocationAsync()
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [])

  return {
    location,
    loading,
    loadLocation: loadLocationAsync,
  }
}

function getLocationByAmapWebFn(amapKey) {
  return () => getLocationByAmap(amapKey)
}`,rn=`import { isBrowser } from '../utils'

const getLocation = (onSuccess, onError) => {
  try {
    const AMap = (window as any).AMap
    if (!document.querySelector('#amp_default_location_container')) {
      const container = document.createElement('div')
      container.id = 'amp_default_location_container'
      container.style.display = 'none'
      document.body.appendChild(container)
    }

    // \u52A0\u8F7D\u5730\u56FE\uFF0C\u8C03\u7528\u6D4F\u89C8\u5668\u5B9A\u4F4D\u670D\u52A1
    // eslint-disable-next-line no-unused-vars
    const map = new AMap.Map('amp_default_location_container', {
      resizeEnable: true,
    })

    AMap.plugin('AMap.Geolocation', function () {
      const geolocation = new AMap.Geolocation({
        enableHighAccuracy: true, // \u662F\u5426\u4F7F\u7528\u9AD8\u7CBE\u5EA6\u5B9A\u4F4D\uFF0C\u9ED8\u8BA4:true
        timeout: 10000, // \u8D85\u8FC710\u79D2\u540E\u505C\u6B62\u5B9A\u4F4D\uFF0C\u9ED8\u8BA4\uFF1A\u65E0\u7A77\u5927
        buttonOffset: new AMap.Pixel(10, 20), // \u5B9A\u4F4D\u6309\u94AE\u4E0E\u8BBE\u7F6E\u7684\u505C\u9760\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF\uFF0C\u9ED8\u8BA4\uFF1APixel(10, 20)
        zoomToAccuracy: true, // \u5B9A\u4F4D\u6210\u529F\u540E\u8C03\u6574\u5730\u56FE\u89C6\u91CE\u8303\u56F4\u4F7F\u5B9A\u4F4D\u4F4D\u7F6E\u53CA\u7CBE\u5EA6\u8303\u56F4\u89C6\u91CE\u5185\u53EF\u89C1\uFF0C\u9ED8\u8BA4\uFF1Afalse
        buttonPosition: 'RB',
      })

      geolocation.getCurrentPosition((status, result) => {
        if (status === 'complete') {
          const { position: { lat: latitude, lng: longitude } = [], speed, accuracy, altitude } = result || {}
          onSuccess({ latitude, longitude, speed, accuracy, altitude })
        } else {
          onError(result)
        }
      })
    })
  } catch (error) {
    onError(new Error(error))
  }
}

export const getLocationByAmap = (amapKey) => {
  return new Promise<any>((resolve, reject) => {
    if (!isBrowser) {
      return reject(new Error('must be used in web'))
    }
    if (!(window as any).AMap) {
      loadAmapScript(amapKey)
        .then((data) => {
          getLocation(resolve, reject)
        })
        .catch(reject)
    } else {
      getLocation(resolve, reject)
    }
  })
}

const inserScript = (src) => {
  return new Promise((resolve, reject) => {
    const attr = {
      name: 'amap',
      src,
      type: 'text/javascript',
    }

    const parent = document.querySelector('body') // \u5BB9\u5668
    let script = parent && parent.querySelector(\`[name=\${attr.name}]\`)
    if (script) {
      resolve(true)
    } else {
      script = document.createElement('script')
      Object.getOwnPropertyNames(attr).forEach((name) => {
        script.setAttribute(name, attr[name]) // \u6682\u65F6\u53EA\u652F\u6301\u4E00\u5C42object
      })
      parent.appendChild(script).addEventListener(
        'load',
        () => {
          resolve(true)
        },
        false,
      )
    }
  })
}

export const loadAmapScript = (amapKey?: string, plugin = 'AMap.Geocoder') => {
  return new Promise((resolve, reject) => {
    if (!isBrowser) {
      return reject(new Error('must be used in browser'))
    }
    const AMap = (window as any)?.AMap
    if (!AMap) {
      if (amapKey) {
        inserScript(\`//webapi.amap.com/maps?v=2.0&key=\${amapKey}&plugin=\${plugin}\`).then(() => {
          const start = Date.now()
          const interval = setInterval(() => {
            if ((window as any).AMap) {
              clearInterval(interval)
              resolve(true)
            } else if (Date.now() - start > 3000) {
              clearInterval(interval)
            }
          }, 30)
        })
      } else {
        // eslint-disable-next-line no-console
        console.error('please set amapKey')
      }
    } else if (AMap && !AMap.Map) {
      // eslint-disable-next-line no-console
      console.error('please use plugin AMap.Geocoder')
    } else if (AMap && AMap.Map) {
      resolve(true)
    }
  })
}`,R=`export const isBrowser = !!(typeof window !== 'undefined' && window.document && window.document.createElement)

export const isNil = (value: any) => value === undefined || value === null`,on=`.location-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 300px;
  background-color: aliceblue;
  border-radius: 10px;
  padding: 0 10px;
  height: 30px;
  font-size: 12px;
}

.location-bar .left {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.location-bar .right {
  cursor: pointer;
}`,an=`import { useInput } from 'brick-hooks'
import React, { useEffect } from 'react'
import useAmapPoi from '..'
import useAmapLocation from '../../useAmapLocation'
import './index.css'

const defaultIcon = (
  <svg
    className="icon"
    viewBox="0 0 1024 1024"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    p-id="4449"
    width="20"
    height="20"
  >
    <path
      // eslint-disable-next-line max-len
      d="M512 1011.2l-25.6-25.6C268.8 748.8 160 569.6 160 448c0-198.4 153.6-352 352-352s352 153.6 352 352c0 128-108.8 307.2-326.4 537.6l-25.6 25.6zM512 160c-160 0-288 128-288 288 0 102.4 96 256 288 473.6 192-204.8 288-364.8 288-473.6 0-160-128-288-288-288z"
      p-id="4450"
    ></path>
    <path
      // eslint-disable-next-line max-len
      d="M512 608C422.4 608 352 537.6 352 448S422.4 288 512 288s160 70.4 160 160S601.6 608 512 608z m0-256c-51.2 0-96 44.8-96 96S460.8 544 512 544 608 499.2 608 448 563.2 352 512 352z"
      p-id="4451"
    ></path>
  </svg>
)

export default function Demo() {
  const { location, loading, loadLocation } = useAmapLocation({ amapKey: 'e2a0790d42bc5bfdebceb30b2b71f349' })
  const { currentPoi, pois, nearbyPois, onSelectPoi, setCurrentPois, getNearbyPois, searchPois } = useAmapPoi({
    amapKey: 'e2a0790d42bc5bfdebceb30b2b71f349',
  })

  useEffect(() => {
    if (location) {
      setCurrentPois(location)
      getNearbyPois({ current: location })
    }
  }, [location])

  return (
    <div className="business-useAmapPoi">
      <div className="location-bar">
        <div className="left">
          <span>{defaultIcon}</span>
          <span>{loading ? '\u6B63\u5728\u5B9A\u4F4D' : currentPoi?.name}</span>
        </div>
        <div className="right" onClick={loadLocation}>
          \u91CD\u65B0\u5B9A\u4F4D
        </div>
      </div>
      <div>
        <h4>\u9644\u8FD1</h4>
        <ul style={{ fontSize: '13px', textAlign: 'left', padding: 0, listStyle: 'none' }}>
          {nearbyPois?.map((v) => (
            <li
              key={v.id}
              style={currentPoi?.name === v.name ? { background: 'blue', color: 'white' } : {}}
              onClick={() => onSelectPoi(v)}
            >
              {v.name}
            </li>
          ))}
        </ul>
      </div>
      <div>
        <h4>\u641C\u7D22poi</h4>
        <Search searchPois={searchPois} />
        <ul>
          {pois?.map((v, i) => (
            <li key={i}>{v.name}</li>
          ))}
        </ul>
      </div>
    </div>
  )
}

function Search({ searchPois }) {
  const { value, bindEvent } = useInput('')
  return (
    <div>
      <input type="text" {...bindEvent} />
      <button onClick={() => searchPois({ address: value })}>\u641C\u7D22</button>
    </div>
  )
}`,sn=`import { useState, useRef } from 'react'
import { isBrowser } from '../utils'
import { formatPoiInfo, getNearByInfos, loadAmapScript, searchPois } from './helper'

type Location = {
  latitude?: string
  longitude?: string
  [x: string]: any
}

type Poi = {
  latitude?: string
  longitude?: string
  [x: string]: any
}

interface AmapNearByPoiInfo extends Poi {
  pois: Poi[]
  [x: string]: any
}

export type GetNearByInfos = (location: Location | Poi) => Promise<AmapNearByPoiInfo>

interface Options {
  defaultPoi?: Poi // \u6307\u5B9A\u9ED8\u8BA4poi \u683C\u5F0F\u4E3A\u9AD8\u5FB7\u5730\u56FEPoi\u683C\u5F0F
  currentLocation?: {
    city?: string
    latitude?: string
    longitude?: string
    [x: string]: any
  } // \u5F53\u524D\u5B9A\u4F4D\u4FE1\u606F\uFF0C\u901A\u5E38\u65E0\u9700\u4F20\u8FD9\u4E2A\u503C\uFF0CsearchPois\u65F6\u5982\u4E0D\u4F20city\uFF0C\u5219\u4F7F\u7528\u6B64\u5904\u5F53\u524D\u5B9A\u4F4D\u7684\u57CE\u5E02
  services?: {
    getNearByPoiList?: GetNearByInfos // \u81EA\u884C\u5C01\u88C5\u7684\u83B7\u53D6\u9644\u8FD1\u7684poi\u5217\u8868\u7684\u670D\u52A1\uFF0C\u4F7F\u7528\u83B7\u53D6\u9644\u8FD1Poi\u529F\u80FD\u5FC5\u4F20\u3002
    searchPoiList?: any // \u81EA\u884C\u5C01\u88C5\u7684\u641C\u7D22poi\u7684\u670D\u52A1\uFF0C\u4F7F\u7528\u641C\u7D22poi\u529F\u80FD\u5FC5\u4F20
  }
  onCurrentPoiChange?: (poi: Poi) => void
  formatPoi?: (poi: Poi) => Poi

  amapKey?: string
}

type GetNearbyPois = (options?: {
  current: Location
  size?: number // \u5C55\u793A\u6570\u91CF
  formatPois?: ((pois: Poi[]) => Poi[]) | ((pois: Poi[]) => Promise<Poi[]>)
  showCurrent?: boolean
}) => Promise<Poi[]>

interface UseAmapPoiRetrun {
  currentPoi: Poi
  pois: any[]
  nearbyPois: any[]
  onSelectPoi: (poi: Poi) => Promise<void>
  getNearbyPois: GetNearbyPois
  searchPois: (params: any) => Promise<Poi[]>
  setCurrentPois: (current: Poi) => Promise<Poi>
}

/**
 * \u83B7\u53D6\u9AD8\u5FB7\u5730\u56FEpoi\uFF0C\u4E3B\u8981\u7528\u4E8E\u4E34\u65F6\u7684poi\uFF0C\u5982\u521B\u5EFA\u5730\u5740\u65F6\u9009\u62E9poi\u3002\u5305\u542B\u67E5\u8BE2\u5C55\u793Apoi\u5217\u8868\uFF0C\u9009\u4E2Dpoi\u76F8\u5173\u903B\u8F91
 * @returns
 */
export default function useAmapPoi({
  defaultPoi,
  currentLocation,
  services: { getNearByPoiList, searchPoiList } = {},
  onCurrentPoiChange,
  formatPoi = formatPoiInfo,
  amapKey,
}: Options = {}): UseAmapPoiRetrun {
  const loadedScriptRef = useRef<boolean>(false)
  if (isBrowser) {
    // \u5982\u679C\u662F\u6D4F\u89C8\u5668\u7AEF\u4F7F\u7528\uFF0C\u9ED8\u8BA4\u53EF\u4EE5\u4E0D\u4F20service\u800C\u4F7F\u7528\u5185\u7F6E\u7684
    getNearByPoiList = getNearByPoiList || getNearByInfos
    searchPoiList = searchPoiList || searchPois
    if (!loadedScriptRef.current && amapKey) {
      loadedScriptRef.current = true
      loadAmapScript(amapKey)
    }
  }

  const [currentPoi, setCurrentPoi] = useState(defaultPoi)
  const [pois, setPois] = useState([])
  const [nearbyPois, setNearbyPois] = useState([])

  const handleSetCurrentPos = async (poi: Location | Poi) => {
    if (!poi.latitude || !poi.longitude) {
      setCurrentPoi({})
      return
    }

    let newPoiData: any = {}
    if ((!newPoiData.city || !newPoiData.poiId) && getNearByPoiList) {
      const data = await getNearByPoiList(poi)
      const closestPoi = data.pois?.[0]
      if (!newPoiData.poiId) {
        newPoiData =
          newPoiData.poiId || data.poiId ? { ...newPoiData, poiId: newPoiData.poiId || data.poiId } : { ...closestPoi }
      }
      newPoiData.city = newPoiData.city || data.city || data.cityname || closestPoi?.city || closestPoi?.cityname
    }
    newPoiData = await formatPoi(newPoiData)
    if (!newPoiData.city) return
    setCurrentPoi(newPoiData)
    return newPoiData
  }

  // \u8BBE\u7F6E\u4E34\u65F6\u7684\u5730\u5740\u9009\u62E9
  const onSelectPoi = async (poi: Poi) => {
    let newPoiData
    try {
      newPoiData = await handleSetCurrentPos(poi)
      onCurrentPoiChange && onCurrentPoiChange(newPoiData)
    } catch (error) {
      console.log('select poi error')
    }
  }

  // \u6839\u636E\u57CE\u5E02/\u641C\u7D22\u5173\u952E\u5B57\u83B7\u53D6\u5730\u5740\u5217\u8868\uFF0C \u5982\u4E0D\u4F20city\uFF0C\u5219\u4F7F\u7528\u5F53\u524D\u5B9A\u4F4D\u7684\u57CE\u5E02
  const handleSearchPois = async (params) => {
    if (!searchPoiList) {
      throw new Error('please set service searchPoiList')
    }
    try {
      const resultPois = (await searchPoiList({ ...params, city: params.city || currentLocation?.city })) || []
      setPois(resultPois)
      return resultPois
    } catch (error) {
      console.log(error)
    }
  }

  /**
   * \u6839\u636E\u5B9A\u4F4D\u83B7\u53D6\u51E0\u6761\u9644\u8FD1\u7684Poi
   */
  const getNearbyPois: GetNearbyPois = async ({
    current,
    size = 5,
    formatPois = (pois: Poi[]) => pois.map(formatPoi),
    showCurrent = false,
  }) => {
    if (!getNearByPoiList) {
      throw new Error('please set service getNearByPoiList')
    }
    const result = await getNearByPoiList(current)
    const showPois: Poi[] =
      result.pois
        ?.splice(0, size)
        .map((poi: Poi) => ({ ...poi, city: poi.city || current.city || current.cityname })) || []

    if (!result.latitude || !result.longitude || !showPois?.length) {
      setNearbyPois([])
      return []
    }

    // \u5730\u56FE\u7B49\u5F53\u524D\u5B9A\u4F4D\u5217\u8868\u91CC\u589E\u52A0\u5F53\u524D\u5B9A\u4F4D\u70B9
    if (showCurrent) {
      showPois.unshift(current)
    }

    // \u6709\u65F6\u5019\u9700\u8981\u67E5\u8BE2poi\u662F\u5426\u5728\u8303\u56F4\u5185\u7B49\u5904\u7406
    const formatedPois = await formatPois(showPois)
    setNearbyPois(formatedPois)
  }

  return {
    currentPoi,
    pois,
    nearbyPois,
    onSelectPoi,
    setCurrentPois: handleSetCurrentPos,
    getNearbyPois, // \u83B7\u53D6\u9644\u8FD1\u7684poi
    searchPois: handleSearchPois,
  }
}`,un=`import { isBrowser } from '../utils'

export function formatPoiInfo(poi: any = {}) {
  let name = poi.name || poi.formattedAddress
  name = formatPoiName(poi, name)
  const address = \`\${poi.formattedAddress || poi.address}\${poi.number || ''}\`
  const currentPoi = {
    ...poi,
    latitude: poi.latitude,
    longitude: poi.longitude,
    adcode: poi.adCode || poi.adcode,
    name,
    address,
    city: poi.city || poi.cityname,
    cityCode: poi.cityCode || poi.citycode,
  }
  return currentPoi
}

export function formatPoiName(data: any, name: string = '') {
  const { province = '', city = '', district = '', street } = data
  const removeAddress = province + city + district
  let newName = name.replace(removeAddress, '')

  if (newName.length > 18) {
    if (street) {
      newName = newName.replace(street, '')
    }
  }

  return newName
}

export const getNearByInfos = ({ latitude, longitude }) => {
  return new Promise<any>((resolve, reject) => {
    if (!isBrowser) {
      return reject(new Error('must be used in web'))
    }
    try {
      const AMap = (window as any).AMap
      const searchNearBy = () => {
        AMap.plugin('AMap.PlaceSearch', function () {
          const poiSearch = new AMap.PlaceSearch({
            pageSize: 5, // \u5355\u9875\u663E\u793A\u7ED3\u679C\u6761\u6570
            pageIndex: 1, // \u9875\u7801
            extensions: 'all',
          })

          poiSearch.searchNearBy('', [longitude, latitude], 200, (status: string, result: any) => {
            if (status === 'complete' && result.info === 'OK') {
              const { poiList = {} } = result
              poiList.pois = (poiList.pois || []).map((poi) => {
                const { lat, lng } = poi.location
                return Object.assign(poi, { longitude: lng, latitude: lat, city: poi.cityname })
              })

              resolve(Object.assign(poiList, { longitude, latitude }))
            } else {
              reject(new Error('get nearby pois fail'))
            }
          })
        })
      }
      searchNearBy()
    } catch (error) {
      reject(new Error('get nearby pois fail'))
    }
  })
}

export const searchPois = ({ city, address }: { city?: string; address?: string } = {}) => {
  return new Promise((resolve, reject) => {
    const AMap = (window as any)?.AMap

    AMap.plugin('AMap.PlaceSearch', function () {
      const placeSearch = new AMap.PlaceSearch({
        city,
      })
      placeSearch.search(address, function (status, result) {
        // \u67E5\u8BE2\u6210\u529F\u65F6\uFF0Cresult\u5373\u5BF9\u5E94\u5339\u914D\u7684POI\u4FE1\u606F
        if (status === 'complete' && result.info === 'OK') {
          const { poiList = {} } = result
          poiList.pois = (poiList.pois || []).map((poi) => {
            const { lat, lng } = poi.location
            return Object.assign(poi, { longitude: lng, latitude: lat, city: poi.cityname })
          })

          resolve(poiList.pois)
        } else {
          // reject(new Error('get nearby pois fail'))
        }
      })
    })
  })
}

const inserScript = (src) => {
  return new Promise((resolve, reject) => {
    const attr = {
      name: 'amap',
      src,
      type: 'text/javascript',
    }

    const parent = document.querySelector('body') // \u5BB9\u5668
    let script = parent && parent.querySelector(\`[name=\${attr.name}]\`)
    if (script) {
      resolve(true)
    } else {
      script = document.createElement('script')
      Object.getOwnPropertyNames(attr).forEach((name) => {
        script.setAttribute(name, attr[name]) // \u6682\u65F6\u53EA\u652F\u6301\u4E00\u5C42object
      })
      parent.appendChild(script).addEventListener(
        'load',
        () => {
          resolve(true)
        },
        false,
      )
    }
  })
}

export const loadAmapScript = (amapKey?: string, plugin = 'AMap.Geocoder') => {
  return new Promise((resolve, reject) => {
    if (!isBrowser) {
      return reject(new Error('must be used in browser'))
    }
    const AMap = (window as any)?.AMap
    if (!AMap) {
      if (amapKey) {
        inserScript(\`//webapi.amap.com/maps?v=2.0&key=\${amapKey}&plugin=\${plugin}\`).then(() => {
          const start = Date.now()
          const interval = setInterval(() => {
            if ((window as any).AMap) {
              clearInterval(interval)
              resolve(true)
            } else if (Date.now() - start > 3000) {
              clearInterval(interval)
            }
          }, 30)
        })
      } else {
        // eslint-disable-next-line no-console
        console.error('please set amapKey')
      }
    } else if (AMap && !AMap.Map) {
      // eslint-disable-next-line no-console
      console.error('please use plugin AMap.Geocoder')
    } else if (AMap && AMap.Map) {
      resolve(true)
    }
  })
}`,ln=`.business-useAmapPoi {
  width: 200px;
}

.business-useAmapPoi .location-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 200px;
  background-color: aliceblue;
  border-radius: 10px;
  padding: 0 10px;
  height: 30px;
  font-size: 12px;
}

.business-useAmapPoi .location-bar .left {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.business-useAmapPoi .location-bar .right {
  cursor: pointer;
}`,cn=`import React from 'react'
import 'antd/es/cascader/style/css'
import areaJson from './area'
import useCascader from '..'

const fetchSub = ({ id = 0 }: any = {}) => {
  return new Promise<any>((resolve, reject) => {
    setTimeout(() => {
      resolve(id === 0 ? areaJson.filter((v) => !v.pid) : areaJson.filter((v) => v.pid === id))
    }, 100)
  })
}

export default function Demo() {
  const { checkedIds, activeIds, maxLevel, flatNodes, loadSub, setActive, toggleChecked } = useCascader({
    fetchSub,
    parentIdKey: 'pid',
  })

  return (
    <div>
      {JSON.stringify(activeIds)}
      {/* <div>{JSON.stringify(flatNodes)}</div> */}

      <div style={{ display: 'flex' }}>
        {new Array(maxLevel).fill(0).map((v, i) => (
          <div key={i}>
            <h3>\u7B2C{i + 1}\u7EA7</h3>
            <ul>
              {flatNodes
                .filter((v) => v.level === i + 1 && v.pid === activeIds[i - 1])
                .map((v) => {
                  return (
                    <div
                      key={v.id}
                      onClick={() => {
                        setActive(v)
                        loadSub(v)
                      }}
                    >
                      <input type="checkbox" checked={checkedIds.includes(v.id)} onChange={() => toggleChecked(v.id)} />{' '}
                      {v.name}
                    </div>
                  )
                })}
            </ul>
          </div>
        ))}
      </div>
    </div>
  )
}`,dn=`const json = [
  {
    id: '110000',
    name: '\u5317\u4EAC\u5E02',
  },
  {
    id: '110100',
    name: '\u5317\u4EAC\u5E02',
    pid: '110000',
  },
  {
    id: '110101',
    name: '\u4E1C\u57CE\u533A',
    pid: '110100',
  },
  {
    id: '110102',
    name: '\u897F\u57CE\u533A',
    pid: '110100',
  },
  {
    id: '110105',
    name: '\u671D\u9633\u533A',
    pid: '110100',
  },
  {
    id: '110106',
    name: '\u4E30\u53F0\u533A',
    pid: '110100',
  },
  {
    id: '110107',
    name: '\u77F3\u666F\u5C71\u533A',
    pid: '110100',
  },
  {
    id: '110108',
    name: '\u6D77\u6DC0\u533A',
    pid: '110100',
  },
  {
    id: '110109',
    name: '\u95E8\u5934\u6C9F\u533A',
    pid: '110100',
  },
  {
    id: '110111',
    name: '\u623F\u5C71\u533A',
    pid: '110100',
  },
  {
    id: '110112',
    name: '\u901A\u5DDE\u533A',
    pid: '110100',
  },
  {
    id: '110113',
    name: '\u987A\u4E49\u533A',
    pid: '110100',
  },
  {
    id: '110114',
    name: '\u660C\u5E73\u533A',
    pid: '110100',
  },
  {
    id: '110115',
    name: '\u5927\u5174\u533A',
    pid: '110100',
  },
  {
    id: '110116',
    name: '\u6000\u67D4\u533A',
    pid: '110100',
  },
  {
    id: '110117',
    name: '\u5E73\u8C37\u533A',
    pid: '110100',
  },
  {
    id: '110118',
    name: '\u5BC6\u4E91\u533A',
    pid: '110100',
  },
  {
    id: '110119',
    name: '\u5EF6\u5E86\u533A',
    pid: '110100',
  },
  {
    id: '120000',
    name: '\u5929\u6D25\u5E02',
  },
  {
    id: '120100',
    name: '\u5E02\u8F96\u533A',
    pid: '120000',
  },
  {
    id: '120101',
    name: '\u548C\u5E73\u533A',
    pid: '120100',
  },
  {
    id: '120102',
    name: '\u6CB3\u4E1C\u533A',
    pid: '120100',
  },
  {
    id: '120103',
    name: '\u6CB3\u897F\u533A',
    pid: '120100',
  },
  {
    id: '120104',
    name: '\u5357\u5F00\u533A',
    pid: '120100',
  },
  {
    id: '120105',
    name: '\u6CB3\u5317\u533A',
    pid: '120100',
  },
  {
    id: '120106',
    name: '\u7EA2\u6865\u533A',
    pid: '120100',
  },
  {
    id: '120110',
    name: '\u4E1C\u4E3D\u533A',
    pid: '120100',
  },
  {
    id: '120111',
    name: '\u897F\u9752\u533A',
    pid: '120100',
  },
  {
    id: '120112',
    name: '\u6D25\u5357\u533A',
    pid: '120100',
  },
  {
    id: '120113',
    name: '\u5317\u8FB0\u533A',
    pid: '120100',
  },
  {
    id: '120114',
    name: '\u6B66\u6E05\u533A',
    pid: '120100',
  },
  {
    id: '120115',
    name: '\u5B9D\u577B\u533A',
    pid: '120100',
  },
  {
    id: '120116',
    name: '\u6EE8\u6D77\u65B0\u533A',
    pid: '120100',
  },
  {
    id: '120117',
    name: '\u5B81\u6CB3\u533A',
    pid: '120100',
  },
  {
    id: '120118',
    name: '\u9759\u6D77\u533A',
    pid: '120100',
  },
  {
    id: '120119',
    name: '\u84DF\u5DDE\u533A',
    pid: '120100',
  },
  {
    id: '130000',
    name: '\u6CB3\u5317\u7701',
  },
  {
    id: '130100',
    name: '\u77F3\u5BB6\u5E84\u5E02',
    pid: '130000',
  },
  {
    id: '130200',
    name: '\u5510\u5C71\u5E02',
    pid: '130000',
  },
  {
    id: '130101',
    name: '\u5E02\u8F96\u533A',
    pid: '130100',
  },
  {
    id: '130102',
    name: '\u957F\u5B89\u533A',
    pid: '130100',
  },
  {
    id: '130104',
    name: '\u6865\u897F\u533A',
    pid: '130100',
  },
  {
    id: '130105',
    name: '\u65B0\u534E\u533A',
    pid: '130100',
  },
  {
    id: '130107',
    name: '\u4E95\u9649\u77FF\u533A',
    pid: '130100',
  },
  {
    id: '130108',
    name: '\u88D5\u534E\u533A',
    pid: '130100',
  },
  {
    id: '130109',
    name: '\u85C1\u57CE\u533A',
    pid: '130100',
  },
  {
    id: '130110',
    name: '\u9E7F\u6CC9\u533A',
    pid: '130100',
  },
  {
    id: '130111',
    name: '\u683E\u57CE\u533A',
    pid: '130100',
  },
  {
    id: '130121',
    name: '\u4E95\u9649\u53BF',
    pid: '130100',
  },
  {
    id: '130123',
    name: '\u6B63\u5B9A\u53BF',
    pid: '130100',
  },
  {
    id: '130125',
    name: '\u884C\u5510\u53BF',
    pid: '130100',
  },
  {
    id: '130126',
    name: '\u7075\u5BFF\u53BF',
    pid: '130100',
  },
  {
    id: '130127',
    name: '\u9AD8\u9091\u53BF',
    pid: '130100',
  },
  {
    id: '130128',
    name: '\u6DF1\u6CFD\u53BF',
    pid: '130100',
  },
  {
    id: '130129',
    name: '\u8D5E\u7687\u53BF',
    pid: '130100',
  },
  {
    id: '130130',
    name: '\u65E0\u6781\u53BF',
    pid: '130100',
  },
  {
    id: '130131',
    name: '\u5E73\u5C71\u53BF',
    pid: '130100',
  },
  {
    id: '130132',
    name: '\u5143\u6C0F\u53BF',
    pid: '130100',
  },
  {
    id: '130133',
    name: '\u8D75\u53BF',
    pid: '130100',
  },
  {
    id: '130183',
    name: '\u664B\u5DDE\u5E02',
    pid: '130100',
  },
  {
    id: '130184',
    name: '\u65B0\u4E50\u5E02',
    pid: '130100',
  },
  {
    id: '130201',
    name: '\u5E02\u8F96\u533A',
    pid: '130200',
  },
  {
    id: '130202',
    name: '\u8DEF\u5357\u533A',
    pid: '130200',
  },
  {
    id: '130203',
    name: '\u8DEF\u5317\u533A',
    pid: '130200',
  },
  {
    id: '130204',
    name: '\u53E4\u51B6\u533A',
    pid: '130200',
  },
  {
    id: '130205',
    name: '\u5F00\u5E73\u533A',
    pid: '130200',
  },
  {
    id: '130207',
    name: '\u4E30\u5357\u533A',
    pid: '130200',
  },
  {
    id: '130208',
    name: '\u4E30\u6DA6\u533A',
    pid: '130200',
  },
  {
    id: '130209',
    name: '\u66F9\u5983\u7538\u533A',
    pid: '130200',
  },
  {
    id: '130223',
    name: '\u6EE6\u53BF',
    pid: '130200',
  },
  {
    id: '130224',
    name: '\u6EE6\u5357\u53BF',
    pid: '130200',
  },
  {
    id: '130225',
    name: '\u4E50\u4EAD\u53BF',
    pid: '130200',
  },
  {
    id: '130227',
    name: '\u8FC1\u897F\u53BF',
    pid: '130200',
  },
  {
    id: '130229',
    name: '\u7389\u7530\u53BF',
    pid: '130200',
  },
  {
    id: '130281',
    name: '\u9075\u5316\u5E02',
    pid: '130200',
  },
  {
    id: '130283',
    name: '\u8FC1\u5B89\u5E02',
    pid: '130200',
  },
]

export default json`,pn=`import { useEffect, useMemo } from 'react'
import { useAsync, useDataListToTree, useMethodsImmer, useRefCallback } from 'brick-hooks'

type Id = string | number
type CascaderNode = {
  checked?: boolean
  id?: Id
  level?: number
  [x: string]: any
}

interface State {
  nodeMap: Record<string, CascaderNode>
  disabledIds: any[]
  activeIds: Id[]
}

const DEFAULT_PARENT_KEY = 'parent'

export function isNil(value: any) {
  return value === undefined || value === null
}

const reducers = {
  // \u8BF7\u6C42\u52A0\u8F7D\u5B50\u8282\u70B9\u6570\u636E\u540E\u66F4\u65B0\u5230nodeMap\u4E2D
  addNodes: (
    state: State,
    payload: { nodes: any; parent: any; checked?: boolean; disabled?: boolean; parentIdKey?: string; level?: number },
  ) => {
    const { nodes, parent, checked, disabled, parentIdKey = DEFAULT_PARENT_KEY, level } = payload
    nodes?.forEach((node: CascaderNode) => {
      const { children, ...nodeInfo } = node
      state.nodeMap[node.id] = {
        ...nodeInfo,
        level,
        [parentIdKey]: node[parentIdKey] ?? parent?.id,
      }

      const nodeChecked = checked ?? parent?.checked
      if (!isNil(nodeChecked)) {
        state.nodeMap[node.id].checked = nodeChecked
      }
      const nodeDisabled = (state.disabledIds.includes(node.id) || disabled) ?? parent?.disabled
      if (!isNil(nodeDisabled)) {
        state.nodeMap[node.id].checked = nodeDisabled
      }
    })
  },

  // \u6279\u91CF\u66F4\u65B0\u9009\u4E2D\u7684\u8282\u70B9
  setCheckeds: (state: State, { ids, checked }: { ids: string[] | number[]; checked: boolean }) => {
    ids.forEach((v: Id) => {
      state.nodeMap[v].checked = checked
    })
  },

  // \u6279\u91CF\u66F4\u65B0\u7981\u7528\u72B6\u6001, \u53EA\u8BB0\u5F55\u7981\u7528\u72B6\u6001
  setDisableds: (state: State, { ids, disabled }: { ids: string[] | number[]; disabled: boolean }) => {
    ids?.forEach((v: Id) => {
      state.nodeMap[v].disabled = disabled
    })
  },

  // \u6E05\u7A7A\u9009\u4E2D\u8282\u70B9
  clearCheckeds: (state: State) => {
    Object.keys(state.nodeMap || {}).forEach((v) => {
      state.nodeMap[v].checked = false
    })
  },

  /**
   * \u66F4\u65B0\u6307\u5B9A\u8282\u70B9\u9009\u4E2D\u72B6\u6001
   */
  toggleChecked: (state: State, { id, checked }: any) => {
    if (!state.nodeMap[id]) return
    state.nodeMap[id].checked = checked ?? !state.nodeMap[id]?.checked
  },

  /**
   * \u66F4\u65B0\u6307\u5B9A\u8282\u70B9\u70B9\u9009\u72B6\u6001\uFF08\u5C55\u793A\u6001\uFF09
   */
  toggleActive: (state: State, id: any) => {
    const index = state.nodeMap?.[id]?.level - 1
    state.activeIds.splice(index, state.activeIds.length - index, id)
  },
}

export default function useCascader({
  fetchSub,
  disabledIds = [],
  onCheckedChange = () => {},
  root,
  parentIdKey = DEFAULT_PARENT_KEY,
}: {
  fetchSub: (current?: CascaderNode) => CascaderNode[] | Promise<CascaderNode[]>
  disabledIds?: Id[]
  onCheckedChange?: (checkIds: Id[]) => void
  root?: CascaderNode
  parentIdKey?: string
}) {
  const [{ nodeMap, activeIds }, api] = useMethodsImmer(reducers, {
    nodeMap: {},
    disabledIds,
    activeIds: [],
  })

  const onCheckedChangeRef = useRefCallback(onCheckedChange)
  const [fetchSubAsync, { loading }] = useAsync(fetchSub)

  const { flatNodes, checkeds, checkedIds, maxLevel } = useMemo(() => {
    const flatNodes = Object.values(nodeMap) as CascaderNode[]
    const checkeds = flatNodes.filter((v: CascaderNode) => v.checked)
    const checkedIds = checkeds.map((v) => v.id)
    const maxLevel = flatNodes.reduce((prev, cur) => (cur.level > prev ? cur.level : prev), 0)
    return {
      flatNodes,
      checkeds,
      checkedIds,
      maxLevel,
    }
  }, [nodeMap])

  const treeData = useDataListToTree(flatNodes, { parentId: parentIdKey })

  const loadSub = async (current: CascaderNode) => {
    const isLoaded = flatNodes.some((v) => v[parentIdKey] === current.id)
    if (isLoaded) return
    const subNodes = await fetchSubAsync(current)
    api.addNodes({
      nodes: subNodes,
      parent: current,
      checked: current.checked,
      disabled: current.disabled,
      parentIdKey,
      level: current.level + 1,
    })
  }

  const toggleChecked = async (id: Id, checked?: boolean) => api.toggleChecked({ id, checked })
  const setDisableds = async (ids: Id[], disabled: boolean) => api.setDisableds({ ids, disabled })
  const setCheckeds = async (ids: Id[], checked: boolean) => api.setCheckeds({ ids, checked })
  const clearCheckeds = async () => api.clearCheckeds()

  const setActive = (node: CascaderNode) => {
    api.toggleActive(node?.id)
  }

  useEffect(() => {
    fetchSubAsync(root).then((subtree) => {
      api.addNodes({ nodes: subtree, parent: root, checked: root?.checked, parentIdKey, level: 1 })
    })
  }, [])

  useEffect(() => {
    disabledIds && api.setDisableds({ ids: disabledIds, disabled: true })
  }, [disabledIds, api])

  useEffect(() => {
    onCheckedChangeRef && onCheckedChangeRef(checkeds)
  }, [checkeds, onCheckedChangeRef])

  return {
    loading,
    data: treeData,
    flatNodes,
    checkedIds,
    checkeds,
    activeIds,
    maxLevel,
    toggleChecked,
    setDisableds,
    setCheckeds,
    clearCheckeds,
    setActive,
    loadSub,
  }
}`,mn=`import React from 'react'
import { DatePicker, Radio } from 'antd'
import 'antd/es/date-picker/style/css'
import 'antd/es/radio/style/css'
import useCycleBuy from '.'

const { RangePicker } = DatePicker

const UseCycleBuy = () => {
  const {
    dates,
    model,
    models,
    cycles,
    range, // \u8FD4\u56DE\u4E00\u4E2A
    setRange,
    setModel,
    cycle,
    setCycle,
    checkDateDisable,
  } = useCycleBuy({ model: 'singleday', cycle: 'custom' })
  const onModelChange = (e) => {
    setModel(e.target.value)
  }
  const onCycleChange = (e) => {
    setCycle(e.target.value)
  }
  return (
    <>
      <div>
        <Radio.Group onChange={onModelChange} defaultValue={model}>
          {models.map((v) => (
            <Radio.Button key={v.key} value={v.value}>
              {v.name}
            </Radio.Button>
          ))}
        </Radio.Group>
      </div>

      <div>
        {model !== 'singleday' && (
          <Radio.Group onChange={onCycleChange} defaultValue={cycle}>
            {cycles.map((v) => (
              <Radio.Button key={v.key} value={v.value}>
                {v.name}
              </Radio.Button>
            ))}
          </Radio.Group>
        )}
      </div>

      <div>
        {cycle === 'custom' && (
          <RangePicker
            disabledDate={checkDateDisable}
            onChange={(values, formatString) => setRange(values.map((v) => v.format()))}
          />
        )}
      </div>

      {JSON.stringify(dates)}
      {JSON.stringify(range)}
    </>
  )
}

export default UseCycleBuy`,fn=`import moment from 'dayjs'
import { useCallback, useMemo, useState } from 'react'
import { isNil } from '../utils'
import { defaultCycles, defaultModels, formatDatas, getMap, getRangeDate } from './helper'

interface Data {
  model?: string | number
  cycle?: string | number
  dates?: string[]
  range?: string[]
}

interface Model {
  key: string
  value: string
  name: string
  disabled: () => boolean
}

interface Cycle {
  key: string
  value: string
  name: string
  check?: (current: any) => boolean
  range: (current: any) => [any?, any?]
}

interface Options {
  models?: Model[]
  cycles?: Cycle[]
}

/**
 * \u65E5\u671F\u5468\u671F/\u533A\u95F4\u9009\u62E9\uFF0C\u7528\u4E8E\u5468\u671F\u8D2D\u7B49\u573A\u666F
 */
export default function useCycleBuy(defaultData: Data = {}, options: Options = {}) {
  const { models = defaultModels as unknown as Model[], cycles = defaultCycles as unknown as Cycle[] } = options
  const { model: defaultModel = '', cycle: defaultCycle = '', dates: defaultDates = [] } = defaultData

  const modelMap = useMemo(() => getMap(models), [models])
  const cycleMap = useMemo(() => getMap(cycles), [cycles])

  const [{ dates, model, cycle, range }, setState] = useState<Data>({
    dates: defaultDates || [],
    model: defaultModel,
    cycle: defaultCycle,
    range: formatDatas(defaultDates || [])?.range,
  })

  const getDates = useCallback(
    ({ model, range }) => {
      const getIsDisabled = modelMap[model]?.disabled || (() => false)
      // // \u8FC7\u6EE4\u6389\u7981\u7528\u7684\u65E5\u671F
      return getRangeDate(range).filter((date) => !getIsDisabled(date))
    },
    [modelMap],
  )

  // \u5F53\u65E5\u671F\u4E3A\u8FDE\u7EED\u65F6\u95F4\u6BB5\u65F6
  const setRangeAndDates = useCallback(
    ({ cycle: newCycle, model: newModel, dates: newDates, range: newRange }, willSetRangeBydate = false) => {
      setState((prev: Data) => {
        let currentRange = prev.range?.length ? prev.range : []
        const nextState: Data = {}
        if (newRange) {
          currentRange = newRange
        } else if (willSetRangeBydate || newDates) {
          currentRange = formatDatas(newDates || prev.dates)?.range
        } else if (!isNil(newCycle) && newCycle !== cycleMap.custom.key) {
          const current = moment()
          currentRange = cycleMap[newCycle]?.range(current)
        }
        nextState.range = currentRange
        const dateList = getDates({ model: newModel || prev.model, range: currentRange })
        return {
          ...prev,
          cycle: newCycle ?? prev.cycle,
          model: newModel ?? prev.model,
          dates: dateList,
          range: currentRange,
        }
      })
    },
    [setState, cycleMap, getDates],
  )

  const setModel = (newModel: string | number) => {
    setRangeAndDates({ model: newModel })
  }

  const setCycle = (newCycle: string | number) => {
    setRangeAndDates({ cycle: newCycle })
  }

  const setDates = (newDates: string[], willSetRangeBydate = false) => {
    setRangeAndDates({ dates: newDates, willSetRangeBydate })
  }

  const setRange = (newRange: string[]) => {
    setRangeAndDates({ range: newRange })
  }

  // \u6821\u9A8C\u5F53\u524D\u65F6\u95F4\u70B9\u662F\u5426\u53EF\u9009
  const checkDateDisable = useCallback(
    (current) => {
      const startDate = moment().add(2, 'd')
      // \u5F53\u524D\u65E5\u671F\u4E24\u5929\u4E4B\u540E\u4E4B\u524D\u7981\u9009
      if (current && (current.isSame(startDate, 'day') || current.isBefore(startDate, 'day'))) return true
      if (!(cycleMap[cycle]?.check || (() => true))(current, cycle, cycleMap)) return true
      const getIsDisabled = modelMap[model]?.disabled || (() => false)
      return getIsDisabled(current)
    },
    [cycle, cycleMap, modelMap, model],
  )

  return {
    dates,
    setDates,
    model,
    models,
    cycles,
    range, // \u8FD4\u56DE\u4E00\u4E2A
    setRange,
    setModel,
    cycle,
    setCycle,
    checkDateDisable,
  }
}`,hn=`import moment from 'dayjs'

export const defaultModels = [
  {
    key: 'singleday',
    value: 'singleday',
    name: '\u5355\u6B21\u8D2D',
    disabled: () => false,
  }, // \u5355\u6B21
  {
    key: 'everyday',
    value: 'everyday',
    name: '\u6BCF\u65E5\u9001',
    disabled: () => false,
  }, // \u6BCF\u65E5\u9001
  {
    key: 'weekday',
    value: 'weekday',
    name: '\u5DE5\u4F5C\u65E5\u9001',
    disabled: (current) => [0, 6].includes(moment(current).day()),
  }, // \u5DE5\u4F5C\u65E5\u9001
  {
    key: 'oddday',
    value: 'oddday',
    name: '\u5355\u65E5\u9001',
    disabled: (current) => moment(current).date() % 2 === 0,
  }, // \u5355\u65E5
  {
    key: 'evenday',
    value: 'evenday',
    name: '\u53CC\u65E5\u9001',
    disabled: (current) => moment(current).date() % 2 !== 0,
  }, // \u53CC\u65E5
  {
    key: 'threeday',
    value: 'threeday',
    name: '\u4E09\u65E5\u9001',
    disabled: (current) => moment(current).date() % 3 !== 0,
  }, // \u4E09\u65E5\u9001
  {
    key: 'weekend',
    value: 'weekend',
    name: '\u5468\u672B\u9001',
    disabled: (current) => [1, 2, 3, 4, 5].includes(moment(current).day()),
  }, // \u5468\u672B\u9001
]

export const defaultCycles = [
  {
    key: 'custom',
    value: 'custom',
    name: '\u968F\u5FC3\u8BA2',
    check: (current) => true,
    range: (current) => getMonthRange(current, 0),
  }, // \u81EA\u9009
  {
    key: 'nextMonth',
    value: 'nextMonth',
    name: '\u4E0B\u4E2A\u6708',
    check: (current) => isInMonthRange(current, 1),
    range: (current) => getMonthRange(current, 1),
  }, // \u4E0B\u4E2A\u6708
  {
    key: 'nextTwoMonth',
    value: 'nextTwoMonth',
    name: '\u4E0B\u4E24\u4E2A\u6708',
    check: (current) => isInMonthRange(current, 2),
    range: (current) => getMonthRange(current, 2),
  }, // \u4E0B\u4E24\u4E2A\u6708
  {
    key: 'nextThreeMonth',
    value: 'nextThreeMonth',
    name: '\u4E0B\u4E09\u4E2A\u6708',
    check: (current) => isInMonthRange(current, 3),
    range: (current) => getMonthRange(current, 3),
  }, // \u4E0B\u4E09\u4E2A\u6708
]

export const getMap = (arr) => arr.reduce((prev, cur) => ({ ...prev, [cur.key]: cur }), {})

export function formatDatas(dates: any[]): any {
  const sortValue = dates.sort((a: any, b: any) => moment(a).diff(b))
  return {
    range: sortValue.length ? [sortValue[0], sortValue[sortValue.length - 1]] : [],
    dates: sortValue,
  }
}

/**
 * \u662F\u5426\u5728\u4E0Bn\u4E2A\u6708
 * @param {*} current \u5F53\u524D\u65F6\u95F4 moment\u5BF9\u8C61
 * @param {*} m \u6708\u4EFD\u95F4\u9694
 */
export function isInMonthRange(current: any, m: number = 1) {
  const [start, end] = getMonthRange(moment(), m)
  return current.isAfter(moment(start).subtract(1, 'day'), 'day') && current.isBefore(moment(end).add(1, 'day'), 'day')
}

// \u83B7\u53D6\u8FDE\u7EED\u65E5\u671F\u5185\u7684\u6240\u6709\u65F6\u95F4
export function getRangeDate([start, end] = []) {
  let next = moment(start)
  const list = []
  while (next) {
    if (end) {
      if (next.isSame(end)) {
        list.push(next.format('YYYY-MM-DD'))
        next = undefined
      } else if (next.isBefore(end)) {
        list.push(next.format('YYYY-MM-DD'))
        next = next.add(1, 'd')
      } else {
        next = undefined
      }
    } else {
      list.push(next.format('YYYY-MM-DD'))
      next = undefined
    }
  }
  return list
}

export const getMonthRange = (current: any, m: number = 1): [any?, any?] => {
  return [moment(current).add(1, 'M').date(1), moment(current).add(m, 'M').endOf('month')]
}`,yn={"usecountdown-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,6702));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:H},"index.ts":{import:".",content:w},"utils/index.ts":{import:"../utils",content:c}},dependencies:{react:{version:"16.14.0"}},identifier:"usecountdown-demo"}},"usecounter-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,83342));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:j},"index.ts":{import:".",content:f}},dependencies:{react:{version:"16.14.0"}},identifier:"usecounter-demo"}},"usecountup-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,94705));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:z},"index.ts":{import:".",content:C},"useForceRender/index.ts":{import:"../useForceRender",content:h},"utils/index.ts":{import:"../utils",content:c}},dependencies:{react:{version:"16.14.0"}},identifier:"usecountup-demo"}},"usehistoryref-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,98200));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:Q},"useCounter/index.ts":{import:".",content:f},"index.ts":{import:".",content:k},"historyState.ts":{import:"./historyState",content:D},"useForceRender/index.ts":{import:"../useForceRender",content:h}},dependencies:{react:{version:"16.14.0"}},identifier:"usehistoryref-demo"}},"uselistchecked-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,94222));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:G},"index.ts":{import:".",content:M},"utils/index.ts":{import:"../utils",content:c},"useMethods/index.ts":{import:"../useMethods",content:p}},dependencies:{react:{version:"16.14.0"}},identifier:"uselistchecked-demo"}},"uselistsequenceload-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,62172));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:K},"index.ts":{import:".",content:A},"useTimeoutFn/index.ts":{import:"../useTimeoutFn",content:P}},dependencies:{react:{version:"16.14.0"}},identifier:"uselistsequenceload-demo"}},"uselistviewdata-demo1":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,13267));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:Z},"index.ts":{import:"..",content:y},"useObjectState/index.ts":{import:"../useObjectState",content:g},"useMethods/index.ts":{import:"../useMethods",content:p},"utils/index.ts":{import:"../utils",content:c},"useAsync/index.ts":{import:"../useAsync",content:v},"useDebounceFn/index.ts":{import:"../useDebounceFn",content:b}},dependencies:{react:{version:"16.14.0"}},identifier:"uselistviewdata-demo1"}},"uselistviewdata-demo2":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,82424));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:W},"index.ts":{import:"..",content:y},"useObjectState/index.ts":{import:"../useObjectState",content:g},"useMethods/index.ts":{import:"../useMethods",content:p},"utils/index.ts":{import:"../utils",content:c},"useAsync/index.ts":{import:"../useAsync",content:v},"useDebounceFn/index.ts":{import:"../useDebounceFn",content:b}},dependencies:{react:{version:"16.14.0"},"intersection-observer":{version:"0.12.0"}},identifier:"uselistviewdata-demo2"}},"usepolling-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,97429));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:Y},"index.ts":{import:".",content:L}},dependencies:{react:{version:"16.14.0"}},identifier:"usepolling-demo"}},"useprevious-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,12967));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:J},"index.ts":{import:"../",content:X},"createContextHook/index.tsx":{import:"./createContextHook",content:q},"utils/index.ts":{import:"../utils",content:c},"useEventBus/eventBus.ts":{import:"../useEventBus/eventBus",content:$},"useArray/index.ts":{import:"./useArray",content:_},"useMethods/index.ts":{import:"../useMethods",content:p},"useAsync/index.ts":{import:"../useAsync",content:v},"useDebounceFn/index.ts":{import:"../useDebounceFn",content:b},"useObjectState/index.ts":{import:"../useObjectState",content:g},"useCounter/index.ts":{import:".",content:f},"useDebounceEffect/index.ts":{import:"./useDebounceEffect",content:ee},"useDebounceState/index.ts":{import:"./useDebounceState",content:ne},"useDebounceValue/index.ts":{import:"./useDebounceValue",content:te},"useDeepCompare/index.ts":{import:"./useDeepCompare",content:re},"useDidMount/index.ts":{import:"./useDidMount",content:oe},"useValueRef/index.ts":{import:"../useValueRef",content:ae},"useWillUnmount/index.ts":{import:"./useWillUnmount",content:se},"useDidUpdate/index.ts":{import:"./useDidUpdate",content:ie},"useUnmountedRef/index.ts":{import:"./useUnmountedRef",content:ue},"useEffectMaunal/index.ts":{import:"./useEffectMaunal",content:le},"useIsoEffect/index.ts":{import:"./useIsoEffect",content:ce},"useEventBus/index.ts":{import:"./useEventBus",content:de},"useRefCallback/index.ts":{import:"../useRefCallback",content:pe},"useForceRender/index.ts":{import:"../useForceRender",content:h},"useInput/index.ts":{import:"./useInput",content:me},"useInterval/index.ts":{import:"./useInterval",content:fe},"useMemoCompare/index.ts":{import:"./useMemoCompare",content:he},"useMethodsImmer/index.ts":{import:"./useMethodsImmer",content:ye},"useObjectStateImmer/index.ts":{import:"./useObjectStateImmer",content:ge},"usePolling/index.ts":{import:".",content:L},"useReducerImmer/index.ts":{import:"./useReducerImmer",content:ve},"useSet/index.ts":{import:"./useSet",content:be},"useThrottleFn/index.ts":{import:"./useThrottleFn",content:Se},"useListChecked/index.ts":{import:".",content:M},"useListData/index.ts":{import:"./useListData",content:Re},"useListData/helper.ts":{import:"./helper",content:xe},"useListState/index.ts":{import:"./useListState",content:we},"useListViewData/index.ts":{import:"..",content:y},"useDataListToTree/index.ts":{import:"./useDataListToTree",content:Ce},"useDataListToMap/index.ts":{import:"./useDataListToMap",content:ke},"useDataTreeToList/index.ts":{import:"./useDataTreeToList",content:De},"useListSequenceLoad/index.ts":{import:".",content:A},"useLogRender/index.ts":{import:"./useLogRender",content:Me},"useRenderCount/index.ts":{import:"../useRenderCount",content:Ae},"useTimeout/index.ts":{import:"./useTimeout",content:Pe},"useTimeoutFn/index.ts":{import:"../useTimeoutFn",content:P},"useToggle/index.ts":{import:"./useToggle",content:Le},"useTrimState/index.ts":{import:"./useTrimState",content:Te},"useTrim/index.ts":{import:"./useTrim",content:Ie},"useCountdown/index.ts":{import:".",content:w},"useCountup/index.ts":{import:".",content:C},"useHistoryRef/index.ts":{import:".",content:k},"historyState.ts":{import:"./historyState",content:D},"useHistoryState/index.ts":{import:"./useHistoryState",content:Ee}},dependencies:{react:{version:"16.14.0"},"lodash.isequal":{version:"4.5.0"},"lodash.clonedeep":{version:"4.5.0"},immer:{version:"9.0.7"}},identifier:"useprevious-demo"}},"useanimate-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,82016));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:Be},"index.ts":{import:".",content:T},"useStyle/index.ts":{import:"../useStyle",content:S},"utils/index.ts":{import:"../utils",content:l},"helper.ts":{import:"./helper",content:I}},dependencies:{react:{version:"16.14.0"},"brick-hooks":{version:"0.3.7"},uuid:{version:"9.0.0"},"react-dom":{version:">=16.9.0"}},identifier:"useanimate-demo"}},"usebreakpoint-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,56837));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{jsx:Fe},"index.ts":{import:".",content:Oe},"useMedia/index.ts":{import:"../useMedia",content:Ne},"utils/index.ts":{import:"../utils",content:l}},dependencies:{react:{version:"16.14.0"}},identifier:"usebreakpoint-demo"}},"usefreedrag-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,25162));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:Ue},"index.ts":{import:".",content:Ve},"useEventListener/index.ts":{import:"../useEventListener",content:E},"utils/index.ts":{import:"../utils",content:l}},dependencies:{react:{version:"16.14.0"}},identifier:"usefreedrag-demo"}},"usegeolocation-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,16210));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:He},"index.ts":{import:"..",content:je},"utils/index.ts":{import:"../utils",content:l},"index.css":{import:"./index.css",content:ze}},dependencies:{react:{version:">=16.9.0"},"brick-hooks":{version:"0.3.7"},"react-dom":{version:">=16.9.0"}},identifier:"usegeolocation-demo"}},"usehover-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,73363));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:Qe},"index.ts":{import:".",content:Ge},"useEventListener/index.ts":{import:"../useEventListener",content:E},"utils/index.ts":{import:"../utils",content:l}},dependencies:{react:{version:"16.14.0"}},identifier:"usehover-demo"}},"useinview-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,64386));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:Ke},"index.ts":{import:".",content:B}},dependencies:{react:{version:"16.14.0"},"intersection-observer":{version:"0.12.0"}},identifier:"useinview-demo"}},"uselazyimage-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,69986));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:Ze},"index.ts":{import:".",content:We},"utils/index.ts":{import:"../utils",content:l}},dependencies:{react:{version:"16.14.0"},"intersection-observer":{version:"0.12.0"}},identifier:"uselazyimage-demo"}},"uselazysequenceload-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,3685));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:Ye},"index.ts":{import:".",content:Je},"useInView/index.ts":{import:".",content:B}},dependencies:{react:{version:"16.14.0"},"brick-hooks":{version:"0.3.7"},"react-dom":{version:">=16.9.0"},"intersection-observer":{version:"0.12.0"}},identifier:"uselazysequenceload-demo"}},"usescroll-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,20452));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:Xe},"index.ts":{import:".",content:F},"utils/index.ts":{import:"../utils",content:l}},dependencies:{react:{version:"16.14.0"}},identifier:"usescroll-demo"}},"usescrollfixed-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,90569));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:qe},"index.ts":{import:".",content:$e},"utils/index.ts":{import:"../utils",content:l},"useScroll/index.ts":{import:".",content:F}},dependencies:{react:{version:"16.14.0"}},iframe:"true",identifier:"usescrollfixed-demo"}},"usestyle-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,75607));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:_e},"index.ts":{import:"../useStyle",content:S},"utils/index.ts":{import:"../utils",content:l}},dependencies:{react:{version:"16.14.0"}},identifier:"usestyle-demo"}},"usetransition-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,89737));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:en},"index.ts":{import:".",content:nn},"useAnimate/index.ts":{import:".",content:T},"useStyle/index.ts":{import:"../useStyle",content:S},"utils/index.ts":{import:"../utils",content:l},"helper.ts":{import:"./helper",content:I}},dependencies:{react:{version:"16.14.0"},"brick-hooks":{version:"0.3.7"},"react-dom":{version:">=16.9.0"},uuid:{version:"9.0.0"}},iframe:"true",identifier:"usetransition-demo"}},"useamaplocation-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,47258));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:tn},"index.ts":{import:"..",content:O},"helper.ts":{import:"./helper",content:rn},"utils/index.ts":{import:"../utils",content:R},"index.css":{import:"./index.css",content:on}},dependencies:{react:{version:">=16.9.0"},"brick-hooks":{version:"0.3.7"},"react-dom":{version:">=16.9.0"}},identifier:"useamaplocation-demo"}},"useamappoi-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,49382));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:an},"index.ts":{import:"..",content:sn},"utils/index.ts":{import:"../utils",content:R},"helper.ts":{import:"./helper",content:un},"useAmapLocation/index.ts":{import:"..",content:O},"index.css":{import:"./index.css",content:ln}},dependencies:{"brick-hooks":{version:"0.3.7"},react:{version:">=16.9.0"},"react-dom":{version:">=16.9.0"}},identifier:"useamappoi-demo"}},"usecascader-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,28700));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:cn},"area.js":{import:"./area",content:dn},"index.ts":{import:"..",content:pn}},dependencies:{react:{version:">=16.9.0"},antd:{version:"4.24.0",css:"antd/dist/antd.css"},"react-dom":{version:">=16.9.0"},"brick-hooks":{version:"0.3.7"}},identifier:"usecascader-demo"}},"usecyclebuy-demo":{component:(0,i.D8)({loader:function(){var t=(0,s.Z)(r().mark(function a(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4320),n.e(1354),n.e(6050)]).then(n.bind(n,41893));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},a)}));function o(){return t.apply(this,arguments)}return o}(),loading:()=>null}),previewerProps:{sources:{_:{tsx:mn},"index.ts":{import:".",content:fn},"utils/index.ts":{import:"../utils",content:R},"helper.ts":{import:"./helper",content:hn}},dependencies:{antd:{version:"4.24.0",css:"antd/dist/antd.css"},react:{version:"16.14.0"},"react-dom":{version:">=16.9.0"},dayjs:{version:"1.10.7"}},identifier:"usecyclebuy-demo"}}},gn={},vn=n(56500),bn=t=>x.createElement(vn.Z,(0,m.Z)({},t,{config:U,demos:yn,apis:gn}))}}]);
